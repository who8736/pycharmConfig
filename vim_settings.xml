<application>
  <component name="VimEditorSettings">
    <editor />
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry>valuation</entry>
        <entry>calpfnew</entry>
        <entry>ts</entry>
        <entry>ohlc</entry>
        <entry>pebuy</entry>
        <entry>start</entry>
        <entry>fixes</entry>
        <entry encoding="base64">YnRuLWxhcmdlIA==</entry>
        <entry encoding="base64">YnRuIA==</entry>
        <entry>cross</entry>
        <entry>1</entry>
        <entry>model_main</entry>
        <entry encoding="base64">XDxlbmNvZGVfdXRmOFw+</entry>
        <entry>inc_adf_linea</entry>
        <entry>inc_adf_linear</entry>
        <entry>reshape</entry>
        <entry>gridspec</entry>
        <entry>math</entry>
        <entry>del_</entry>
        <entry>readTa</entry>
      </history-search>
      <history-cmd>
        <entry encoding="base64">JzwsJz5zLyQvLCQvZw==</entry>
        <entry encoding="base64">JzwsJz5zLyQvLC9n</entry>
        <entry encoding="base64">JzwsJz5zLyA9LycsL2c=</entry>
        <entry encoding="base64">JzwsJz5zLywkL1xdLC9n</entry>
        <entry>s/start/end/g</entry>
        <entry encoding="base64">JzwsJz5zL2J0bi1sYXJnZSAvLw==</entry>
        <entry encoding="base64">JzwsJz5zL2J0biAvLw==</entry>
        <entry>s/1/2/g</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed OPEN_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed CLOSE_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="/Dummy.txt" timestamp="1587720597387">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="0" />
        <mark key="." line="0" column="0" />
      </file>
      <file name="/Python Console" timestamp="1587687947391">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="/fragment.py" timestamp="1587612520330">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="D:/workspace/stockdatamanage/test/linear_regression.py" timestamp="1587540225443">
        <mark key="'" line="85" column="22" />
        <mark key="[" line="887" column="16" />
        <mark key="]" line="840" column="14" />
        <mark key="." line="840" column="13" />
        <mark key="^" line="840" column="14" />
      </file>
      <file name="/a.dummy" timestamp="1587633325158">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="1" />
        <mark key="." line="0" column="1" />
        <mark key="^" line="0" column="5" />
      </file>
      <file name="D:/workspace/stockdatamanage/download.py" timestamp="1587686524099">
        <mark key="'" line="67" column="13" />
        <mark key="[" line="105" column="59" />
        <mark key="]" line="106" column="54" />
        <mark key="^" line="106" column="54" />
        <mark key="." line="106" column="53" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/rundownmisc.sh" timestamp="1587216747364">
        <mark key="[" line="1" column="8" />
        <mark key="]" line="1" column="8" />
        <mark key="." line="1" column="8" />
      </file>
      <file name="D:/workspace/stockdatamanage/downloadmisc.py" timestamp="1587865894758">
        <mark key="'" line="53" column="21" />
        <mark key="[" line="61" column="36" />
        <mark key="]" line="61" column="40" />
        <mark key="^" line="61" column="40" />
        <mark key="." line="61" column="39" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/run.sh" timestamp="1587216739309">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="1" column="21" />
      </file>
      <file name="D:/workspace/stockdatamanage/sqlrw.py" timestamp="1587692797626">
        <mark key="[" line="280" column="0" />
        <mark key="]" line="280" column="16" />
        <mark key="." line="280" column="16" />
        <mark key="^" line="1146" column="38" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/test/sklearn_examples_plot_anomaly_comparison.py" timestamp="1587294921769">
        <mark key="[" line="79" column="45" />
        <mark key="]" line="80" column="24" />
        <mark key="^" line="80" column="24" />
        <mark key="." line="80" column="23" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" timestamp="1587264320713">
        <mark key="'" line="765" column="22" />
        <mark key="[" line="810" column="29" />
        <mark key="]" line="810" column="34" />
        <mark key="^" line="810" column="34" />
        <mark key="." line="810" column="33" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/test/linear_regression.py" timestamp="1587394238321">
        <mark key="'" line="749" column="6" />
        <mark key="[" line="840" column="14" />
        <mark key="]" line="840" column="14" />
        <mark key="." line="840" column="14" />
        <mark key="^" line="840" column="13" />
      </file>
      <file name="D:/workspace/stockdatamanage/check.py" timestamp="1587522319535">
        <mark key="[" line="38" column="30" />
        <mark key="]" line="48" column="0" />
        <mark key="." line="48" column="0" />
        <mark key="^" line="47" column="51" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/runweb.py" timestamp="1587258099649">
        <mark key="[" line="15" column="0" />
        <mark key="]" line="15" column="0" />
        <mark key="." line="15" column="0" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/sqlrw.py" timestamp="1587259041981">
        <mark key="[" line="1519" column="27" />
        <mark key="]" line="1519" column="27" />
        <mark key="." line="1519" column="27" />
        <mark key="^" line="1519" column="21" />
      </file>
      <file name="D:/workspace/stockdatamanage/datatrans.py" timestamp="1587613432218">
        <mark key="[" line="239" column="0" />
        <mark key="]" line="239" column="12" />
        <mark key="^" line="238" column="37" />
        <mark key="." line="239" column="12" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/startdownmisc" timestamp="1587217095814">
        <mark key="[" line="1" column="79" />
        <mark key="]" line="1" column="86" />
        <mark key="." line="1" column="86" />
        <mark key="^" line="1" column="82" />
      </file>
      <file name="D:/workspace/stockdatamanage/test/mytest.py" timestamp="1587608694591">
        <mark key="'" line="614" column="0" />
      </file>
      <file name="D:/workspace/python/stockdatamanage/startstockmanage" timestamp="1587216407936">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="1" column="114" />
      </file>
    </filemarks>
    <jumps>
      <jump line="31" column="16" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="44" column="64" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="61" column="43" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="72" column="12" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="30" column="16" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="252" column="12" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="286" column="36" filename="D:/workspace/stockdatamanage/backtest.py" />
      <jump line="524" column="0" filename="D:/workspace/stockdatamanage/plot.py" />
      <jump line="112" column="29" filename="D:/workspace/stockdatamanage/web/views.py" />
      <jump line="115" column="17" filename="D:/workspace/stockdatamanage/web/views.py" />
      <jump line="0" column="15" filename="D:/workspace/stockdatamanage/web/templates/base.html" />
      <jump line="20" column="12" filename="D:/workspace/stockdatamanage/web/templates/base.html" />
      <jump line="67" column="12" filename="D:/workspace/stockdatamanage/web/templates/base.html" />
      <jump line="71" column="8" filename="D:/workspace/stockdatamanage/web/templates/base.html" />
      <jump line="50" column="0" filename="D:/workspace/stockdatamanage/web/templates/base.html" />
      <jump line="66" column="24" filename="D:/workspace/stockdatamanage/web/templates/base.html" />
      <jump line="38" column="0" filename="D:/workspace/stockdatamanage/mytest.py" />
      <jump line="538" column="0" filename="D:/workspace/stockdatamanage/plot.py" />
      <jump line="106" column="67" filename="D:/workspace/stockdatamanage/mytest.py" />
      <jump line="67" column="19" filename="D:/workspace/stockdatamanage/mytest.py" />
      <jump line="767" column="19" filename="D:/workspace/stockdatamanage/mytest.py" />
      <jump line="684" column="20" filename="D:/workspace/stockdatamanage/mytest.py" />
      <jump line="536" column="16" filename="D:/workspace/stockdatamanage/plot.py" />
      <jump line="35" column="0" filename="D:/workspace/pandastest/cleandata.py" />
      <jump line="57" column="4" filename="D:/workspace/pandastest/cleandata.py" />
      <jump line="0" column="16" filename="/Python Console" />
      <jump line="86" column="4" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="208" column="17" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="571" column="4" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="377" column="27" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="611" column="7" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="713" column="11" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="9" column="32" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="728" column="21" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="758" column="19" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="26" column="13" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="106" column="49" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="800" column="8" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="784" column="8" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="777" column="12" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="776" column="0" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="782" column="12" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="66" column="0" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="107" column="16" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="142" column="0" filename="D:/workspace/python/stockdatamanage/test/scaling_test.py" />
      <jump line="84" column="38" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="209" column="15" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="810" column="26" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="164" column="33" filename="D:/workspace/python/stockdatamanage/web/views.py" />
      <jump line="188" column="0" filename="D:/workspace/python/stockdatamanage/web/views.py" />
      <jump line="167" column="13" filename="D:/workspace/python/stockdatamanage/web/views.py" />
      <jump line="12" column="32" filename="D:/workspace/python/stockdatamanage/web/views.py" />
      <jump line="651" column="3" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="700" column="4" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="269" column="0" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="24" column="0" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="683" column="12" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="686" column="30" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="691" column="15" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="718" column="4" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="765" column="22" filename="D:/workspace/python/stockdatamanage/test/index_technical_indicators.py" />
      <jump line="19" column="49" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="725" column="13" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="20" column="29" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="468" column="20" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="580" column="16" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="735" column="18" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="222" column="9" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="751" column="21" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="752" column="24" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="10" column="30" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="174" column="9" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="320" column="9" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="434" column="11" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="765" column="6" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="5" column="0" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="767" column="18" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="4" column="30" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="740" column="16" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="21" column="47" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="749" column="6" filename="D:/workspace/python/stockdatamanage/test/linear_regression.py" />
      <jump line="807" column="37" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="822" column="13" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="85" column="22" filename="D:/workspace/stockdatamanage/test/linear_regression.py" />
      <jump line="796" column="28" filename="D:/workspace/stockdatamanage/test/mytest.py" />
      <jump line="614" column="0" filename="D:/workspace/stockdatamanage/test/mytest.py" />
      <jump line="549" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="50" column="17" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="109" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="192" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="290" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="298" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="491" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="748" column="0" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="909" column="4" filename="D:/workspace/stockdatamanage/sqlrw.py" />
      <jump line="0" column="0" filename="/a.dummy" />
      <jump line="142" column="43" filename="D:/workspace/stockdatamanage/download.py" />
      <jump line="37" column="19" filename="D:/workspace/stockdatamanage/download.py" />
      <jump line="67" column="13" filename="D:/workspace/stockdatamanage/download.py" />
      <jump line="53" column="21" filename="D:/workspace/stockdatamanage/downloadmisc.py" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="&quot;" type="4">
        <text>replace</text>
      </register>
      <register name="-" type="4">
        <text>replace</text>
      </register>
      <register name="/" type="4">
        <text>readTa</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgIHByaW50KGYnu7nUrb751rU6e2V4cChtdTEpOi4yZn0sICcsCiAgICAgICAgICBmJ7XN1rU6e2V4cChtdTEpIC0gMiAqIGV4cChzaWdtYTEpOi4yZn0sICcKICAgICAgICAgIGYnuN/WtTp7ZXhwKG11MSkgKyAyICogZXhwKHNpZ21hMSk6LjJmfScpCg==</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgICAgICB0YWJsZXMgPSBbJ2JhbGFuY2VzaGVldCcsICdpbmNvbWUnLCAnY2FzaGZsb3cnLCAnZmluYV9pbmRpY2F0b3InXQo=</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgIHRhYmxlcyA9IFsnYmFsYW5jZXNoZWV0JywgJ2luY29tZScsICdjYXNoZmxvdycsICdmaW5hX2luZGljYXRvciddCg==</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgIHRhYmxlcyA9IFsnYmFsYW5jZXNoZWV0JywgJ2luY29tZScsICdjYXNoZmxvdycsICdmaW5hX2luZGljYXRvciddCg==</text>
      </register>
      <register name="4" type="4">
        <text encoding="base64">IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiCkNyZWF0ZWQgb24gVGh1IE1hciAxMCAyMToxMTo1MSAyMDE2CgpAYXV0aG9yOiB3aG84NzM2CiIiIgoKaW1wb3J0IG9zCmltcG9ydCBsb2dnaW5nCiMgaW1wb3J0IHVybGxpYjIKIyBpbXBvcnQgc29ja2V0CmltcG9ydCBkYXRldGltZSBhcyBkdApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQojIGltcG9ydCBDb25maWdQYXJzZXIKIyBpbXBvcnQgcmUKIyBpbXBvcnQgdGltZQoKIyBpbXBvcnQgc3lzCgoKIyBmcm9tIGx4bWwgaW1wb3J0IGV0cmVlCiMgaW1wb3J0IGx4bWwKIyBpbXBvcnQgdHVzaGFyZSBhcyB0cyAgIyBAVW5yZXNvbHZlZEltcG9ydAppbXBvcnQgcGFuZGFzIGFzIHBkCiMgZnJvbSBwYW5kYXMuY29tcGF0IGltcG9ydCBTdHJpbmdJTwpmcm9tIGlvIGltcG9ydCBTdHJpbmdJTwojIGZyb20gc3FsYWxjaGVteSBpbXBvcnQgY3JlYXRlX2VuZ2luZQpmcm9tIHNxbGFsY2hlbXkgaW1wb3J0IE1ldGFEYXRhLCBUYWJsZSwgQ29sdW1uCmZyb20gc3FsYWxjaGVteSBpbXBvcnQgREFURSwgREVDSU1BTCwgU3RyaW5nCmZyb20gc3FsYWxjaGVteS5leHQuZGVjbGFyYXRpdmUgaW1wb3J0IGRlY2xhcmF0aXZlX2Jhc2UKIyBmcm9tIHNxbGFsY2hlbXkub3JtIGltcG9ydCBzZXNzaW9ubWFrZXIsIHNjb3BlZF9zZXNzaW9uCiMgaW1wb3J0IHNxbGFsY2hlbXkKZnJvbSBwYW5kYXMuY29yZS5mcmFtZSBpbXBvcnQgRGF0YUZyYW1lCiMgZnJvbSB0dXNoYXJlLnN0b2NrIGltcG9ydCBjb25zIGFzIGN0CmltcG9ydCB4bHJkCmltcG9ydCB0dXNoYXJlIGFzIHRzCgppbXBvcnQgZGF0YXRyYW5zCmltcG9ydCBpbml0c3FsCmZyb20gc3FsY29ubiBpbXBvcnQgU1FMQ29ubgojIGZyb20gbWlzYyBpbXBvcnQgZmlsZW5hbWVHdWJlbiwgZmlsZW5hbWVMaXJ1biwgZmlsZW5hbWVHdXpoaQpmcm9tIG1pc2MgaW1wb3J0IGZpbGVuYW1lTGlydW4sIGZpbGVuYW1lR3V6aGkKZnJvbSBpbml0bG9nIGltcG9ydCBpbml0bG9nCgojIGZyb20gZG93bmxvYWQgaW1wb3J0IGRvd25IWUZpbGUKCiMgZnJvbSBib2tlaC5zYW1wbGVkYXRhIGltcG9ydCBzdG9ja3MKCgpzcWxjb25uID0gU1FMQ29ubigpCmVuZ2luZSA9IHNxbGNvbm4uZW5naW5lClNlc3Npb24gPSBzcWxjb25uLlNlc3Npb24KCgpkZWYgd3JpdGVIWVRvU1FMKGZpbGVuYW1lKToKICAgICIiIiC0087EvP7W0LbByKHQ0NK10+u5ycaxttTTprnYz7WyotC0yOvK/b7dv+IKICAgICIiIgogICAgZmlsZW5hbWUgPSBvcy5wYXRoLmpvaW4oJy4vZGF0YScsIGZpbGVuYW1lKQogICAgeGxzRmlsZSA9IHhscmQub3Blbl93b3JrYm9vayhmaWxlbmFtZSwgZW5jb2Rpbmdfb3ZlcnJpZGU9ImNwMTI1MiIpCiAgICB0YWJsZSA9IHhsc0ZpbGUuc2hlZXRzKClbNF0KICAgIHRzX2NvZGVMaXN0ID0gdGFibGUuY29sX3ZhbHVlcygwKVsxOl0KICAgIHRzX2NvZGVMaXN0ID0gW2kgKyAoJy5TSCcgaWYgaVswXSA9PSAnNicgZWxzZSAnLlNaJykgZm9yIGkgaW4gdHNfY29kZUxpc3RdCiAgICBoeUlETGlzdCA9IHRhYmxlLmNvbF92YWx1ZXMoOClbMTpdCiAgICBoeURmID0gcGQuRGF0YUZyYW1lKHsndHNfY29kZSc6IHRzX2NvZGVMaXN0LCAnY2xhc3NpZnlfY29kZSc6IGh5SURMaXN0fSkKICAgIGVuZ2luZS5leGVjdXRlKCdUUlVOQ0FURSBUQUJMRSBjbGFzc2lmeV9tZW1iZXInKQogICAgd3JpdGVTUUwoaHlEZiwgJ2NsYXNzaWZ5X21lbWJlcicpCgoKZGVmIHdyaXRlSFlOYW1lVG9TUUwoZmlsZW5hbWUpOgogICAgZmlsZW5hbWUgPSBvcy5wYXRoLmpvaW4oJy4vZGF0YScsIGZpbGVuYW1lKQogICAgeGxzRmlsZSA9IHhscmQub3Blbl93b3JrYm9vayhmaWxlbmFtZSwgZW5jb2Rpbmdfb3ZlcnJpZGU9ImNwMTI1MiIpCiAgICB0YWJsZSA9IHhsc0ZpbGUuc2hlZXRzKClbMF0KICAgIGh5SURMaXN0ID0gdGFibGUuY29sX3ZhbHVlcygwKVsxOl0KICAgIGh5TmFtZUxpc3QgPSB0YWJsZS5jb2xfdmFsdWVzKDEpWzE6XQogICAgaHlMZXZlbExpc3QgPSBbbGVuKGh5SUQpIC8gMiBmb3IgaHlJRCBpbiBoeUlETGlzdF0KICAgIGh5TGV2ZWwxSURMaXN0ID0gW2h5SURbOjJdIGZvciBoeUlEIGluIGh5SURMaXN0XQogICAgaHlMZXZlbDJJRExpc3QgPSBbaHlJRFs6NF0gZm9yIGh5SUQgaW4gaHlJRExpc3RdCiAgICBoeUxldmVsM0lETGlzdCA9IFtoeUlEWzo2XSBmb3IgaHlJRCBpbiBoeUlETGlzdF0KICAgIGh5TmFtZURmID0gcGQuRGF0YUZyYW1lKHsnY29kZSc6IGh5SURMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogaHlOYW1lTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwnOiBoeUxldmVsTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwxaWQnOiBoeUxldmVsMUlETGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwyaWQnOiBoeUxldmVsMklETGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwzaWQnOiBoeUxldmVsM0lETGlzdH0pCiAgICBlbmdpbmUuZXhlY3V0ZSgnVFJVTkNBVEUgVEFCTEUgY2xhc3NpZnknKQogICAgd3JpdGVTUUwoaHlOYW1lRGYsICdjbGFzc2lmeScpCgoKZGVmIHdyaXRlR3ViZW5Ub1NRTChndWJlbkRmLCByZXBsYWNlPUZhbHNlKToKICAgICIiIrWluPa5ycaxucmxvsr9vt3QtMjryv2+3b/iCiAgICA6cGFyYW0gcmVwbGFjZToKICAgIDp0eXBlIGd1YmVuRGY6IERhdGFGcmFtZQogICAgIiIiCiAgICB0YWJsZW5hbWUgPSAnZ3ViZW4nCiAgICAjIGxhc3RVcGRhdGUgPSBndWJlblVwZGF0ZURhdGUodHNfY29kZSkKICAgICMgZ3ViZW5EZiA9IGd1YmVuRGZbcGQuVGltZXN0YW1wKGd1YmVuRGYuZGF0ZSkgPiBsYXN0VXBkYXRlXQogICAgIyBndWJlbkRmID0gZ3ViZW5EZltndWJlbkRmLmRhdGUgPiBsYXN0VXBkYXRlXQogICAgaWYgZ3ViZW5EZi5lbXB0eToKICAgICAgICByZXR1cm4gTm9uZQogICAgaWYgcmVwbGFjZToKICAgICAgICBmb3IgaW5kZXgsIHJvdyBpbiBndWJlbkRmLml0ZXJyb3dzKCk6CiAgICAgICAgICAgIHNxbCA9ICgoJ3JlcGxhY2UgaW50byBndWJlbicKICAgICAgICAgICAgICAgICAgICAnKHRzX2NvZGUsIGRhdGUsIHRvdGFsc2hhcmVzKSAnCiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlcygiJXMiLCAiJXMiLCAlcyknKQogICAgICAgICAgICAgICAgICAgJSAocm93Wyd0c19jb2RlJ10sIHJvd1snZGF0ZSddLCByb3dbJ3RvdGFsc2hhcmVzJ10pKQogICAgICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICBlbHNlOgogICAgICAgIHJldHVybiB3cml0ZVNRTChndWJlbkRmLCB0YWJsZW5hbWUpCgoKZGVmIHdyaXRlR3V6aGlUb1NRTCh0c19jb2RlLCBkYXRhKToKICAgICIiIs/C1Ni1pbj2ucnGsbnA1rXK/b7d0LTI68r9vt2/4iIiIgogICAgZ3V6aGlEaWN0ID0gZGF0YXRyYW5zLnRyYW5zR3V6aGlEYXRhVG9EaWN0KGRhdGEpCiAgICBpZiBndXpoaURpY3QgaXMgTm9uZToKICAgICAgICByZXR1cm4gVHJ1ZQogICAgIyBwcmludCBndXpoaURpY3QKICAgICMgICAgIGd1emhpRGYgPSBEYXRhRnJhbWUoZ3V6aGlEaWN0LCBpbmRleD1bMF0pCiAgICAjICAgICB3cml0ZVNRTFVwZGF0ZShndXpoaURpY3QsICdndXpoaScpCiAgICAjICAgICBwcmludCBndXpoaURpY3QKICAgIHRhYmxlbmFtZSA9ICdndXpoaScKICAgIGlmICdwZWcnIGluIGxpc3QoZ3V6aGlEaWN0LmtleXMoKSk6CiAgICAgICAgcGVnID0gZ3V6aGlEaWN0WydwZWcnXQogICAgZWxzZToKICAgICAgICBwZWcgPSAnbnVsbCcKICAgIGlmICduZXh0MVllYXJQRScgaW4gbGlzdChndXpoaURpY3Qua2V5cygpKToKICAgICAgICBuZXh0MVllYXJQRSA9IGd1emhpRGljdFsnbmV4dDFZZWFyUEUnXQogICAgZWxzZToKICAgICAgICBuZXh0MVllYXJQRSA9ICdudWxsJwogICAgaWYgJ25leHQyWWVhclBFJyBpbiBsaXN0KGd1emhpRGljdC5rZXlzKCkpOgogICAgICAgIG5leHQyWWVhclBFID0gZ3V6aGlEaWN0WyduZXh0MlllYXJQRSddCiAgICBlbHNlOgogICAgICAgIG5leHQyWWVhclBFID0gJ251bGwnCiAgICBpZiAnbmV4dDNZZWFyUEUnIGluIGxpc3QoZ3V6aGlEaWN0LmtleXMoKSk6CiAgICAgICAgbmV4dDNZZWFyUEUgPSBndXpoaURpY3RbJ25leHQzWWVhclBFJ10KICAgIGVsc2U6CiAgICAgICAgbmV4dDNZZWFyUEUgPSAnbnVsbCcKICAgIHNxbCA9ICgoJ3JlcGxhY2UgaW50byAlKHRhYmxlbmFtZSlzJwogICAgICAgICAgICAnKHRzX2NvZGUsIHBlZywgbmV4dDFZZWFyUEUsIG5leHQyWWVhclBFLCBuZXh0M1llYXJQRSkgJwogICAgICAgICAgICAndmFsdWVzKCIlKHRzX2NvZGUpcyIsICUocGVnKXMsICcKICAgICAgICAgICAgJyUobmV4dDFZZWFyUEUpcywgJShuZXh0MlllYXJQRSlzLCAnCiAgICAgICAgICAgICclKG5leHQzWWVhclBFKXMpOycpICUgbG9jYWxzKCkpCiAgICByZXR1cm4gZW5naW5lLmV4ZWN1dGUoc3FsKQoKCiMgZGVmIHdyaXRlS2xpbmUodHNfY29kZSwgZGYsIGluc2VydFR5cGU9J0lHTk9SRScpOgojICAgICAiIiK5ycaxS8/fwPrKt9C0yOvK/b7dv+IiIiIKIyAgICAgdGFibGVOYW1lID0gdGFibGVuYW1lS2xpbmUodHNfY29kZSkKIyAgICAgaWYgbm90IGluaXRzcWwuZXhpc3RUYWJsZSh0YWJsZU5hbWUpOgojICAgICAgICAgaW5pdHNxbC5jcmVhdGVLbGluZVRhYmxlKHRzX2NvZGUpCiMgICAgIHJldHVybiB3cml0ZVNRTChkZiwgdGFibGVOYW1lLCBpbnNlcnRUeXBlKQoKCmRlZiBsaXJ1bkZpbGVUb0xpc3QodHNfY29kZSwgZGF0ZSk6CiAgICBmaWxlTmFtZSA9IGZpbGVuYW1lTGlydW4odHNfY29kZSkKICAgIGxpcnVuRmlsZSA9IG9wZW4oZmlsZU5hbWUsICdyJykKICAgIGxpcnVuRGF0YSA9IGxpcnVuRmlsZS5yZWFkbGluZXMoKQoKICAgIGRhdGVMaXN0ID0gbGlydW5EYXRhWzBdLnNwbGl0KCkKICAgIGxvZ2dpbmcuZGVidWcocmVwcihkYXRlTGlzdCkpCgogICAgdHJ5OgogICAgICAgIGluZGV4ID0gZGF0ZUxpc3QuaW5kZXgoZGF0ZSkKICAgICAgICBsb2dnaW5nLmRlYnVnKHJlcHIoaW5kZXgpKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgcmV0dXJuIFtdCgogICAgcHJvZml0c0xpc3QgPSBsaXJ1bkRhdGFbNDJdLnNwbGl0KCkKICAgICMgaWYgcHJvZml0c0xpc3RbMF0uZGVjb2RlKCdnYmsnKSAhPSAnuenK9NPaxLi5q8u+y/nT0NXftcS+u8D7yPMnOgogICAgaWYgcHJvZml0c0xpc3RbMF0gIT0gJ7npyvTT2sS4uavLvsv509DV37XEvrvA+8jzJzoKICAgICAgICBsb2dnaW5nLmVycm9yKCdsaXJ1bkZpbGVUb0xpc3QgcmVhZCAlcyBlcnJvcicsIHRzX2NvZGUpCiAgICAgICAgcmV0dXJuIFtdCgogICAgcmV0dXJuIHsndHNfY29kZSc6IHRzX2NvZGUsCiAgICAgICAgICAgICdkYXRlJzogZGF0ZSwKICAgICAgICAgICAgJ3Byb2ZpdHMnOiBwcm9maXRzTGlzdFtpbmRleF0sCiAgICAgICAgICAgICdyZXBvcnRkYXRlJzogZGF0ZUxpc3RbaW5kZXhdCiAgICAgICAgICAgIH0KCgojIGRlZiB0YWJsZW5hbWVLbGluZSh0c19jb2RlKToKIyAgICAgcmV0dXJuICdrbGluZSVzJyAlIHRzX2NvZGUKCgpkZWYgbG9hZENoaWd1KCk6CiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUgZnJvbSBjaGlndTsnCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4gW2lbMF0gZm9yIGkgaW4gcmVzdWx0LmZldGNoYWxsKCldCgoKZGVmIGRyb3BUYWJsZSh0YWJsZU5hbWUpOgogICAgZW5naW5lLmV4ZWN1dGUoJ0RST1AgVEFCTEUgJXMnICUgdGFibGVOYW1lKQoKCmRlZiBkcm9wTkFEYXRhKCk6CiAgICAiIiIgx+Wz/UvP3828yv2+3dbQvbvS18G/zqowtcTK/b7dCiAgICAiIiIKICAgICMgc3RvY2tMaXN0ID0gcmVhZHRzX2NvZGVzRnJvbVNRTCgpCiAgICAjICAgICBzdG9ja0xpc3QgPSBbJzAwMjEwMCddCiAgICAjIGZvciB0c19jb2RlIGluIHN0b2NrTGlzdDoKICAgICMgdGFibGVuYW1lID0gdGFibGVuYW1lS2xpbmUodHNfY29kZSkKICAgICMgc3FsID0gJ2RlbGV0ZSBmcm9tICUodGFibGVuYW1lKXMgd2hlcmUgdm9sdW1lPTA7JyAlIGxvY2FscygpCiAgICBzcWwgPSAnZGVsZXRlIGZyb20ga2xpbmVzdG9jayB3aGVyZSB2b2x1bWU9MDsnCiAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCgoKZGVmIGdldExvd1BFU3RvY2tMaXN0KG1heFBFPTQwKToKICAgICIiItGhyKHWuLaot7bOp1BFtcS5ycaxCiAgICBtYXhQRTog1+6081BFCiAgICAiIiIKICAgIHNxbCA9ICdzZWxlY3QgdHNfY29kZSwgcGUgZnJvbSBzdG9ja2xpc3Qgd2hlcmUgcGUgPiAwIGFuZCBwZSA8PSAlcycgJSBtYXhQRQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHJldHVybiBkZgoKCmRlZiBnZXRBbGxNYXJrZXRQRVVwZGF0ZURhdGUoKToKICAgICIiIgogICAgyKvK0LOhUEW4/NDCyNXG2gogICAgOnJldHVybjoKICAgICIiIgogICAgc3FsID0gJ3NlbGVjdCBtYXgodHJhZGVfZGF0ZSkgZnJvbSBpbmRleF9wZSB3aGVyZSB0c19jb2RlPSJhbGwiOycKICAgIHJldHVybiBfZ2V0TGFzdFVwZGF0ZShzcWwpCgoKZGVmIGdldEluZGV4UEVVcGRhdGVEYXRlKCk6CiAgICAiIiIKICAgINa4yv1QRbj80MLI1cbaLLWxx7C99tPQyc/WpDE4MNa4yv21xFBF1rXQ6MrWtq+8xsvjCiAgICA6cmV0dXJuOgogICAgIiIiCiAgICBzcWwgPSBmJ3NlbGVjdCBtYXgodHJhZGVfZGF0ZSkgZnJvbSBpbmRleF9wZSB3aGVyZSB0c19jb2RlPSIwMDAwMTAuU0giOycKICAgIHJldHVybiBfZ2V0TGFzdFVwZGF0ZShzcWwpCgoKZGVmIGdldEd1emhpKHRzX2NvZGUpOgogICAgc3FsID0gZidzZWxlY3QgKiBmcm9tIGd1emhpcmVzdWx0IHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSIgbGltaXQgMScKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHJldHVybiByZXN1bHQuZmV0Y2hvbmUoKQoKCmRlZiByZWFkU3RvY2tMaXN0KCk6CiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUsIG5hbWUgZnJvbSBzdG9ja19iYXNpYycKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICByZXR1cm4gZGYKCgpkZWYgd3JpdGVTUUwoZGF0YTogcGQuRGF0YUZyYW1lLCB0YWJsZU5hbWU6IHN0ciwgcmVwbGFjZT1GYWxzZSk6CiAgICAiIiIKICAgIERhdGFmcmFtZbjxyr3K/b7d0LTI63RhYmxlTmFtZda4tqi1xLHt1tAKICAgIHJlcGxhY2U6IFRydWWjrNb3vPzW2Li0yrG4/NDCyv2+3aOsIEZhbHNlLCC69sLU1ti4tNb3vPwsIMSsyM/OqkZhbHNlCiAgICAiIiIKICAgIGlmIGRhdGEuZW1wdHk6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIGxvZ2dpbmcuZGVidWcoJ3N0YXJ0IHdyaXRlU1FMICVzJyAlIHRhYmxlTmFtZSkKICAgIGlmIG5vdCBpbml0c3FsLmV4aXN0VGFibGUodGFibGVOYW1lKToKICAgICAgICBsb2dnaW5nLmVycm9yKCdub3QgZXhpc3QgJXMnICUgdGFibGVOYW1lKQogICAgICAgIHJldHVybiBGYWxzZQogICAgZGF0YSA9IGRhdGEud2hlcmUocGQubm90bnVsbChkYXRhKSwgTm9uZSkKICAgIGRhdGEgPSBkYXRhdHJhbnMudHJhbnNEZlRvTGlzdChkYXRhKQoKICAgIEJhc2UgPSBkZWNsYXJhdGl2ZV9iYXNlKCkKCiAgICBjbGFzcyBNeVRhYmxlKEJhc2UpOgogICAgICAgIF9fdGFibGVfXyA9IFRhYmxlKGYne3RhYmxlTmFtZX0nLCBCYXNlLm1ldGFkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9sb2FkPVRydWUsIGF1dG9sb2FkX3dpdGg9ZW5naW5lKQoKICAgIHRyeToKICAgICAgICBzZXNzaW9uID0gU2Vzc2lvbigpCiAgICAgICAgbWV0YWRhdGEgPSBNZXRhRGF0YShiaW5kPWVuZ2luZSkKICAgICAgICBpZiByZXBsYWNlOgogICAgICAgICAgICBmb3IgZCBpbiBkYXRhOgogICAgICAgICAgICAgICAgIyBmb3IgaW5kZXgsIHJvdyBpbiBkYXRhLml0ZXJyb3dzKCk6CiAgICAgICAgICAgICAgICAjICAgICB0bXBEaWN0ID0gcm93LnRvX2RpY3QoKQogICAgICAgICAgICAgICAgIyAgICAgdG1wRGljdFtkYXRhLmluZGV4Lm5hbWVdID0gaW5kZXgKICAgICAgICAgICAgICAgICMgZCA9IHtrZXk6IGdldGF0dHIocm93LCBrZXkpIGZvciBrZXkgaW4gcm93LmtleXMoKX0KICAgICAgICAgICAgICAgICMgZm9yIGtleSBpbiByb3cua2V5cygpOgogICAgICAgICAgICAgICAgIyAgICAgcHJpbnQoJ2tleSB0eXBlOicsIHR5cGUoa2V5KSkKICAgICAgICAgICAgICAgICMgICAgIHByaW50KCd2YWx1ZSB0eXBlOicsIHR5cGUoZ2V0YXR0cihyb3csIGtleSkpKQogICAgICAgICAgICAgICAgIyAgICAgcHJpbnQoJ3ZhbHVlOicsIGdldGF0dHIocm93LCBrZXkpKQogICAgICAgICAgICAgICAgIyB0YWJsZSA9IE15VGFibGUoKip0bXBEaWN0KQogICAgICAgICAgICAgICAgdGFibGUgPSBNeVRhYmxlKCoqZCkKICAgICAgICAgICAgICAgIHNlc3Npb24ubWVyZ2UodGFibGUpCiAgICAgICAgICAgIHNlc3Npb24uY29tbWl0KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBteXRhYmxlID0gVGFibGUodGFibGVOYW1lLCBtZXRhZGF0YSwgYXV0b2xvYWQ9VHJ1ZSkKICAgICAgICAgICAgc2Vzc2lvbi5leGVjdXRlKG15dGFibGUuaW5zZXJ0KCkucHJlZml4X3dpdGgoJ0lHTk9SRScpLCBkYXRhKQogICAgICAgIHNlc3Npb24uY29tbWl0KCkKICAgICAgICBzZXNzaW9uLmNsb3NlKCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChlKQogICAgICAgIHByaW50KCfQtLHtyqew3KO6ICVzJyAlIHRhYmxlTmFtZSkKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgoKZGVmIHdyaXRldHNfY29kZUxpc3RUb0ZpbGUodHNfY29kZUxpc3QsIGZpbGVuYW1lKToKICAgIHN0b2NrRmlsZSA9IG9wZW4oZmlsZW5hbWUsICd3YicpCiAgICBzdG9ja0ZpbGUud3JpdGUoYnl0ZXMoJ1xuJykuam9pbih0c19jb2RlTGlzdCkpCiAgICBzdG9ja0ZpbGUuY2xvc2UoKQoKCmRlZiByZWFkR3V6aGlGaWxlVG9EaWN0KHRzX2NvZGUpOgogICAgIiIiCiAgICC2wcihucDWtc7EvP4KICAgIDpydHlwZTogZGljdAogICAgOnR5cGUgdHNfY29kZTogc3RyaW5nCiAgICA6cmV0dXJuIGRpY3QKICAgICIiIgogICAgZ3V6aGlGaWxlbmFtZSA9IGZpbGVuYW1lR3V6aGkodHNfY29kZSkKICAgIGd1emhpRmlsZSA9IG9wZW4oZ3V6aGlGaWxlbmFtZSkKICAgIGd1emhpRGF0YSA9IGd1emhpRmlsZS5yZWFkKCkKICAgIGd1emhpRmlsZS5jbG9zZSgpCiAgICByZXR1cm4gZGF0YXRyYW5zLnRyYW5zR3V6aGlEYXRhVG9EaWN0KGd1emhpRGF0YSkKCgpkZWYgcmVhZEd1emhpRmlsZXNUb0RmKHN0b2NrTGlzdCk6CiAgICBndXpoaUxpc3QgPSBbXQogICAgZm9yIHRzX2NvZGUgaW4gc3RvY2tMaXN0OgogICAgICAgIGxvZ2dpbmcuZGVidWcoJ3JlYWRHdXpoaUZpbGVzVG9EZjogJXMnLCB0c19jb2RlKQogICAgICAgIGd1emhpZGF0YSA9IHJlYWRHdXpoaUZpbGVUb0RpY3QodHNfY29kZSkKICAgICAgICBpZiBndXpoaWRhdGEgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGd1emhpTGlzdC5hcHBlbmQoZ3V6aGlkYXRhKQogICAgcmV0dXJuIERhdGFGcmFtZShndXpoaUxpc3QpCgoKZGVmIHJlYWRHdXpoaVNRTFRvRGYoc3RvY2tMaXN0KToKICAgIGxpc3RTdHIgPSAnLCcuam9pbihzdG9ja0xpc3QpCiAgICBzcWwgPSAnc2VsZWN0ICogZnJvbSBndXpoaSB3aGVyZSB0c19jb2RlIGluICglcyk7JyAlIGxpc3RTdHIKICAgICMgICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICBwcmludChkZikKICAgIHJldHVybiBkZgoKCmRlZiByZWFkVmFsdWF0aW9uU2FtbWFyeSgpOgogICAgIiIitsHIobnJxrHGwLfW0MXPoiIiIgogICAgIyC7+bG+0MXPogogICAgc3FsID0gKCdzZWxlY3QgdHNfY29kZSwgbmFtZSwgZGF0ZSwgcGYsIHBlLCBwZWcsIHBlMjAwLCBwZTEwMDAgJwogICAgICAgICAgICdmcm9tIHZhbHVhdGlvbiB3aGVyZSBkYXRlID0gKHNlbGVjdCBtYXgoZGF0ZSkgZnJvbSB2YWx1YXRpb24pICcKICAgICAgICAgICAnb3JkZXIgYnkgcGYgZGVzYzsnKQogICAgc3RvY2tzID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCgogICAgIyDQ0NK1w/uzxgogICAgc3FsID0gKCdzZWxlY3QgYS50c19jb2RlLCBhLm5hbWUsIGMubmFtZSBhcyBjbGFzc2lmeV9uYW1lJwogICAgICAgICAgICcgZnJvbSBzdG9ja19iYXNpYyBhLCBjbGFzc2lmeV9tZW1iZXIgYiwgY2xhc3NpZnkgYycKICAgICAgICAgICAnIHdoZXJlIGEudHNfY29kZT1iLnRzX2NvZGUgYW5kIGIuY2xhc3NpZnlfY29kZT1jLmNvZGUnCiAgICAgICAgICAgJyBvcmRlciBieSB0c19jb2RlOycpCiAgICBoeW5hbWUgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHN0b2NrcyA9IHBkLm1lcmdlKHN0b2NrcywgaHluYW1lLCBob3c9J2xlZnQnKQoKICAgICMgssbO8da4seoKICAgIHNxbCA9ICgnc2VsZWN0IGEudHNfY29kZSwgYS5lbmRfZGF0ZSBhcyBmaW5hX2RhdGUsJwogICAgICAgICAgICcgYS5ncm9zc3Byb2ZpdF9tYXJnaW4sIGEucm9lJwogICAgICAgICAgICcgZnJvbSBmaW5hX2luZGljYXRvciBhLCcKICAgICAgICAgICAnIChzZWxlY3QgdHNfY29kZSwgbWF4KGVuZF9kYXRlKSBhcyBmaW5hX2RhdGUgJwogICAgICAgICAgICcgZnJvbSBmaW5hX2luZGljYXRvciBncm91cCBieSB0c19jb2RlKSBiJwogICAgICAgICAgICcgd2hlcmUgYS50c19jb2RlID0gYi50c19jb2RlIGFuZCBhLmVuZF9kYXRlID0gYi5maW5hX2RhdGU7JykKICAgIGZpbmFzdGF0ID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICBmaW5hc3RhdFsnZ3Jvc3Nwcm9maXRfbWFyZ2luJ10gPSBmaW5hc3RhdC5ncm9zc3Byb2ZpdF9tYXJnaW4ucm91bmQoMikKICAgIGZpbmFzdGF0Wydyb2UnXSA9IGZpbmFzdGF0LnJvZS5yb3VuZCgyKQogICAgZmluYXN0YXQgPSBmaW5hc3RhdFtbJ3RzX2NvZGUnLCAnZmluYV9kYXRlJywgJ2dyb3NzcHJvZml0X21hcmdpbicsICdyb2UnXV0KICAgIHN0b2NrcyA9IHBkLm1lcmdlKHN0b2NrcywgZmluYXN0YXQsIGhvdz0nbGVmdCcpCgogICAgIyDDv8jV1rix6gogICAgIyBzcWwgPSAoJ3NlbGVjdCBhLnRzX2NvZGUsIGEuZHZfdHRtLCcKICAgICMgICAgICAgICcgZnJvbSBkYWlseV9iYXNpYyBhLCcKICAgICMgICAgICAgICcgKHNlbGVjdCB0c19jb2RlLCBtYXgoZGF0ZSkgYXMgZGFpbHlfZGF0ZScKICAgICMgICAgICAgICcgZnJvbSBkYWlseV9iYXNpYyBncm91cCBieSB0c19jb2RlKSBiJwogICAgIyAgICAgICAgJyB3aGVyZSBhLnRzX2NvZGU9Yi50c19jb2RlIGFuZCBhLmRhdGUgPSBiLmRhaWx5X2RhdGUnKQogICAgc3FsID0gIiIic2VsZWN0IGEudHNfY29kZSwgYS5kdl90dG0gZnJvbSBkYWlseV9iYXNpYyBhLAogICAgICAgICAgICAoc2VsZWN0IHRzX2NvZGUsIG1heCh0cmFkZV9kYXRlKSBhcyBkYWlseV9kYXRlIAogICAgICAgICAgICBmcm9tIGRhaWx5X2Jhc2ljIGdyb3VwIGJ5IHRzX2NvZGUpIGIKICAgICAgICAgICAgd2hlcmUgYS50c19jb2RlID0gYi50c19jb2RlIGFuZCBhLnRyYWRlX2RhdGUgPSBiLmRhaWx5X2RhdGU7IiIiCgogICAgZGFpbHkgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHN0b2NrcyA9IHBkLm1lcmdlKHN0b2NrcywgZGFpbHksIGhvdz0nbGVmdCcpCgogICAgIyDFxdDyCiAgICBzdG9ja3Muc29ydF92YWx1ZXMoYnk9WydwZicsICdwZSddLCBhc2NlbmRpbmc9KEZhbHNlLCBUcnVlKSwgaW5wbGFjZT1UcnVlKQogICAgcmV0dXJuIHN0b2NrcwoKCmRlZiByZWFkVmFsdWF0aW9uKHRzX2NvZGUpOgogICAgc3FsID0gKGYnc2VsZWN0ICogZnJvbSB2YWx1YXRpb24gd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IicKICAgICAgICAgICAnb3JkZXIgYnkgZGF0ZSBkZXNjIGxpbWl0IDEnKQogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5mZXRjaG9uZSgpCiAgICByZXR1cm4gcmVzdWx0CgoKIyBkZWYgZG93bmxvYWRLbGluZSh0c19jb2RlLCBzdGFydERhdGU9Tm9uZSwgZW5kRGF0ZT1Ob25lKToKIyAgICAgaWYgc3RhcnREYXRlIGlzIE5vbmU6ICAjIHN0YXJ0RGF0Zc6qv9XKscihucnGsdfuuvO4/NDCyNXG2gojICAgICAgICAgc3RhcnREYXRlID0gZ2V0S2xpbmVVcGRhdGVEYXRlKHRzX2NvZGUpCiMgICAgICAgICBzdGFydERhdGUgPSBzdGFydERhdGUuc3RyZnRpbWUoJyVZLSVtLSVkJykKIyAgICAgaWYgZW5kRGF0ZSBpcyBOb25lOgojICAgICAgICAgZW5kRGF0ZSA9IGR0LmRhdGV0aW1lLnRvZGF5KCkuc3RyZnRpbWUoJyVZLSVtLSVkJykKIyAgICAgcmV0dXJuIGRvd25sb2FkS2xpbmVUdVNoYXJlKHRzX2NvZGUsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSkKIwojCiMgZGVmIGRvd25sb2FkS2xpbmVUdVNoYXJlKHRzX2NvZGUsCiMgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZT0nMTk5MC0wMS0wMScsIGVuZERhdGU9JzIwOTktMTItMzEnKToKIyAgICAgdHJ5OgojICAgICAgICAgaGlzdERmID0gdHMuZ2V0X2hpc3RfZGF0YSh0c19jb2RlLCBzdGFydERhdGUsIGVuZERhdGUpCiMgICAgIGV4Y2VwdCBJT0Vycm9yOgojICAgICAgICAgcmV0dXJuIE5vbmUKIyAgICAgcmV0dXJuIGhpc3REZgoKCmRlZiByZWFkTGlydW5MaXN0KGRhdGUpOgogICAgc3FsID0gJ3NlbGVjdCAqIGZyb20gbGlydW4gd2hlcmUgYGRhdGVgID49ICVzIGFuZCBgZGF0ZWAgPD0gJXMnICUgKAogICAgICAgIHN0cihkYXRlIC0gMTApLCBzdHIoZGF0ZSkpCiAgICBkZiA9IHBkLnJlYWRfc3FsKHNxbCwgZW5naW5lKQogICAgcmV0dXJuIGRmCgoKZGVmIHJlYWRQRVJhdGUodHNfY29kZSk6CiAgICAiIiIgtsHIodK71ru5ycaxtcRQRcD6yrfLrsa9o6wKICAgICMgt7W72FBFMjAwo6wgUEUxMDAwwb249sr91rWjrLfWsfC0+rHtuMO5ycaxtbHHsFBF1rXU2rn9yKUyMDChojEwMDC49r270tfI1dbQtcTLrsa9CiAgICAiIiIKICAgIHNxbCA9IChmJ3NlbGVjdCByb3VuZChwZTIwMCwgMikgcGUyMDAsIHJvdW5kKHBlMTAwMCwgMikgcGUxMDAwJwogICAgICAgICAgIGYnIGZyb20gZ3V6aGlyZXN1bHQgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IiBsaW1pdCAxJykKICAgIHByaW50KHNxbCkKICAgICMg1ri2qMjVxtqjqLqso6nHsM7eVFRNwPvI88r9vt21xKOssunRr8bwyrzI1cbayei2qM6qc3RhcnREYXRlCiAgICAjILfx1PLJ6LaozqrX7r380ru0zsr9vt3I1cbaCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpLmZldGNob25lKCkKICAgIGlmIHJlc3VsdCBpcyBOb25lOgogICAgICAgIHJldHVybiBOb25lLCBOb25lCiAgICBlbHNlOgogICAgICAgIHJldHVybiByZXN1bHQKCgpkZWYgcmVhZFRUTVByb2ZpdHModHNfY29kZTogc3RyLCBzdGFydERhdGU9Tm9uZSwgZW5kRGF0ZT1Ob25lKToKICAgICIiIsih1ri2qLnJxrHSu7bOyNW85LXEVFRNwPvI86Osc3RhcnREYXRltbHI1c7eyv2+3cqxo6zIodaux7DX7r380ru0zsr9vt0KICAgIFBhcmFtZXRlcnMKICAgIC0tLS0tLS0tCiAgICB0c19jb2RlOiBzdHIgucnGsbT6wusgIGUuZzogJzYwMDUxOScKICAgIHN0YXJ0RGF0ZTogZGF0ZSDG8Mq8yNXG2iAgZS5nOiAnMTk5MC0wMS0wMScKICAgIGVuZERhdGU6IGRhdGUgvdjWucjVxtogIGUuZzogJzE5OTAtMDEtMDEnCgogICAgUmV0dXJuCiAgICAtLS0tLS0tLQogICAgRGF0YUZyYW1lOiC3tbvYRGF0YUZyYW1luPHKvVRUTcD7yPMKICAgICIiIgogICAgIyDWuLaoyNXG2qOouqyjqcew1+69/NK7tM7A+8jzseS2r8jVxtoKICAgIGlmIHN0YXJ0RGF0ZSBpcyBOb25lOgogICAgICAgIHJldHVybgogICAgc3RhcnREYXRlU3RyID0gc3RhcnREYXRlLnN0cmZ0aW1lKCclWS0lbS0lZCcpCiAgICBzcWwgPSAoJ3NlbGVjdCBtYXgocmVwb3J0ZGF0ZSkgZnJvbSB0dG1saXJ1biAnCiAgICAgICAgICAgJ3doZXJlIHRzX2NvZGU9IiUodHNfY29kZSlzIiAnCiAgICAgICAgICAgJ2FuZCByZXBvcnRkYXRlPD0iJShzdGFydERhdGVTdHIpcyInICUgbG9jYWxzKCkpCiAgICAjICAgICBwcmludCBzcWwKICAgICMg1ri2qMjVxtqjqLqso6nHsM7eVFRNwPvI88r9vt21xKOssunRr8bwyrzI1cbayei2qM6qc3RhcnREYXRlCiAgICAjILfx1PLJ6LaozqrX7r380ru0zsr9vt3I1cbaCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpLmZldGNob25lKCkKICAgIGlmIHJlc3VsdFswXSBpcyBOb25lOgogICAgICAgIFRUTUxpcnVuU3RhcnREYXRlID0gc3RhcnREYXRlU3RyCiAgICBlbHNlOgogICAgICAgIFRUTUxpcnVuU3RhcnREYXRlID0gcmVzdWx0WzBdCiAgICBzcWwgPSAoJ3NlbGVjdCAqIGZyb20gdHRtbGlydW4gd2hlcmUgdHNfY29kZSA9ICIlKHRzX2NvZGUpcyIgJwogICAgICAgICAgICdhbmQgYHJlcG9ydGRhdGVgID49ICIlKFRUTUxpcnVuU3RhcnREYXRlKXMiICcKICAgICAgICAgICAnb3JkZXIgYnkgZGF0ZScgJSBsb2NhbHMoKSkKICAgICMgICAgIHByaW50IHNxbAogICAgaWYgZW5kRGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBzcWwgKz0gJyBhbmQgYGRhdGVgIDw9ICIlcyInICUgZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKCiAgICAjINa4tqjI1cbao6i6rKOpx7C05tTaucmxvrHktq/K/b7dtcSjrNbYyei12jG0zrHktq/I1cbazqpzdGFydERhdGWjrAogICAgIyC89cnZuPzQwktsaW5lse3W0NfcytDWtcv50Oi8xsvjwb8KICAgIGlmIFRUTUxpcnVuU3RhcnREYXRlICE9IHN0YXJ0RGF0ZVN0cjoKICAgICAgICBkZi5sb2NbZGYucmVwb3J0ZGF0ZSA9PSBUVE1MaXJ1blN0YXJ0RGF0ZSwgJ3JlcG9ydGRhdGUnXSA9IHN0YXJ0RGF0ZQogICAgcmV0dXJuIGRmCgoKZGVmIHJlYWRMYXN0VFRNUHJvZml0KHRzX2NvZGUsIGxpbWl0PTEsIGRhdGU9Tm9uZSk6CiAgICAiIiLIoda4tqi5ycax1+69/Ly4xtpUVE3A+8jzCiAgICBQYXJhbWV0ZXJzCiAgICAtLS0tLS0tLQogICAgdHNfY29kZTogc3RyILnJxrG0+sLrICBlLmc6ICc2MDA1MTkuU0gnCiAgICBkYXRlOiBzdHIgsunRr73Y1rnI1cbao6wgZS5nOiAnMjAxOTEyMzEnCiAgICBsaW1pdDogyKHX7r38xtrK/bXEyv2+3QoKICAgIFJldHVybgogICAgLS0tLS0tLS0KICAgIGxpc3Q6ILe1u9hsaXN0uPHKvVRUTcD7yPMKICAgICIiIgogICAgc3FsID0gZidzZWxlY3QgaW5jcmF0ZSBmcm9tIHR0bXByb2ZpdHMgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IiAnCiAgICBpZiBkYXRlIGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSBmJyBhbmQgcmVwb3J0ZGF0ZTw9IntkYXRlfSInCiAgICBzcWwgKz0gZicgb3JkZXIgYnkgZGF0ZSBkZXNjIGxpbWl0IHtsaW1pdH0nCiAgICAjICAgICBwcmludCBzcWwKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkuZmV0Y2hhbGwoKQogICAgcmVzdWx0ID0gW2lbMF0gZm9yIGkgaW4gcmV2ZXJzZWQocmVzdWx0KV0KICAgIHJldHVybiByZXN1bHQKCgpkZWYgcmVhZExhc3RUVE1Qcm9maXRzKHN0b2NrTGlzdCwgbGltaXQ9MSwgZGF0ZT1Ob25lKToKICAgICIiIsihucnGscHQse3X7r38vLjG2lRUTcD7yPMKICAgIFBhcmFtZXRlcnMKICAgIC0tLS0tLS0tCiAgICA6cGFyYW0gc3RvY2tMaXN0OiBzdHIgucnGsbT6wusgIGUuZzogWyc2MDA1MTkuU0gnLCAnMDAyNTE4LlNaJ10KICAgIDpwYXJhbSBsaW1pdDogyKHX7r38xtrK/bXEyv2+3QogICAgOnBhcmFtIGRhdGU6CgogICAgUmV0dXJuCiAgICAtLS0tLS0tLQogICAgRGF0YUZyYW1lOiC3tbvYRGF0YUZyYW1luPHKvVRUTcD7yPMKICAgICIiIgogICAgVFRNTGlydW5MaXN0ID0gW10KICAgIGZvciB0c19jb2RlIGluIHN0b2NrTGlzdDoKICAgICAgICBUVE1MaXJ1biA9IHJlYWRMYXN0VFRNUHJvZml0KHRzX2NvZGUsIGxpbWl0LCBkYXRlKQogICAgICAgIFRUTUxpcnVuLmluc2VydCgwLCB0c19jb2RlKQogICAgICAgIFRUTUxpcnVuTGlzdC5hcHBlbmQoVFRNTGlydW4pCgogICAgIyAgICAgcHJpbnQgVFRNTGlydW5MaXN0CiAgICBjb2x1bW5zID0gWydpbmNyYXRlJXMnICUgaSBmb3IgaSBpbiByYW5nZShsaW1pdCldCiAgICBjb2x1bW5zLmluc2VydCgwLCAndHNfY29kZScpCiAgICBUVE1MaXJ1bkRmID0gRGF0YUZyYW1lKFRUTUxpcnVuTGlzdCwgY29sdW1ucz1jb2x1bW5zKQogICAgcmV0dXJuIFRUTUxpcnVuRGYKCgpkZWYgcmVhZFRUTVByb2ZpdHNGb3JEYXRlKGRhdGUpOgogICAgIiIitNNUVE1MaXJ1brHttsHIocSzvL62yLnJxrFUVE3A+8jzCiAgICBkYXRlOiC48cq9WVlZWVEsIDTOu8TqKzHOu7y+tsijrMD7yPPL+cr0yNXG2gogICAgcmV0dXJuOiC3tbvYRGF0YUZyYW1luPHKvVRUTcD7yPMKICAgICIiIgogICAgc3FsID0gKCdzZWxlY3QgKiBmcm9tIHR0bWxpcnVuIHdoZXJlICcKICAgICAgICAgICAnYGRhdGVgID0gIiUoZGF0ZSlzIicgJSBsb2NhbHMoKSkKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICByZXR1cm4gZGYKCgpkZWYgcmVhZExpcnVuRm9yRGF0ZShkYXRlKToKICAgICIiIrTTTGlydW6x7bbByKHSu8baucnGscD7yPMKICAgIGRhdGU6ILjxyr1ZWVlZUSwgNM67xOorMc67vL62yKOswPvI88v5yvTI1cbaCiAgICByZXR1cm46ILe1u9hEYXRhRnJhbWW48cq9wPvI8wogICAgIiIiCiAgICBzcWwgPSAoJ3NlbGVjdCAqIGZyb20gbGlydW4gd2hlcmUgJwogICAgICAgICAgICdgZGF0ZWAgPSAiJShkYXRlKXMiJyAlIGxvY2FscygpKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHJldHVybiBkZgoKCmRlZiByZWFkVFRNUEUodHNfY29kZSk6CiAgICAiIiIgtsHIocSz1qe5ycaxtcTIq7K/VFRNUEUKICAgICIiIgogICAgc3FsID0gKCdzZWxlY3QgZGF0ZSwgdHRtcGUgZnJvbSBrbGluZXN0b2NrIHdoZXJlIHRzX2NvZGU9IiUodHNfY29kZSlzIjsnCiAgICAgICAgICAgJSBsb2NhbHMoKSkKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICByZXR1cm4gZGYKCgpkZWYgcmVhZExhc3RUVE1QRSh0c19jb2RlLCBkYXRlPU5vbmUpOgogICAgIiIitsHIoda4tqi5ycax1ri2qMjVxtq1xFRUTVBFo6zErMjPzqrX7rrz0rvM7LXEVFRNUEUKCiAgICA6cGFyYW0gdHNfY29kZTogc3RyCiAgICAgICAgucnGsbT6wuujrCDI5yc2MDAwMTMnCiAgICA6cGFyYW0gZGF0ZTogc3RyCiAgICAgICAg1ri2qMjVxtqjrCC48cq9J1lZWVltbWRkJwogICAgOnJldHVybjoKICAgICIiIgogICAgc3FsID0gKGYnc2VsZWN0IHBlX3R0bSBmcm9tIGRhaWx5X2Jhc2ljIHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSIgJwogICAgICAgICAgIGYnYW5kIHRyYWRlX2RhdGU9KHNlbGVjdCBtYXgoYHRyYWRlX2RhdGVgKSBmcm9tIGRhaWx5X2Jhc2ljIHdoZXJlICcKICAgICAgICAgICBmJ3RzX2NvZGU9Int0c19jb2RlfSInKQogICAgaWYgZGF0ZSBpcyBOb25lOgogICAgICAgIHNxbCArPSAnKScKICAgIGVsc2U6CiAgICAgICAgc3FsICs9IGYnIGFuZCB0cmFkZV9kYXRlPD17ZGF0ZX0pJwoKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkuZmV0Y2hvbmUoKQogICAgaWYgcmVzdWx0IGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHJlc3VsdFswXQoKCmRlZiByZWFkQ2FsKHN0YXJ0RGF0ZT1Ob25lLCBlbmREYXRlPU5vbmUsIGV4Y2hhbmdlPSdTU0UnLCBpc19vcGVuPTEpOgogICAgc3FsID0gKGYnc2VsZWN0IGNhbF9kYXRlIHRyYWRlX2RhdGUgZnJvbSB0cmFkZV9jYWwnCiAgICAgICAgICAgZicgd2hlcmUgZXhjaGFuZ2U9IntleGNoYW5nZX0iJykKICAgIGlmIHN0YXJ0RGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBzcWwgKz0gZicgYW5kIGNhbF9kYXRlPj0ie3N0YXJ0RGF0ZX0iJwogICAgaWYgZW5kRGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBzcWwgKz0gZicgYW5kIGNhbF9kYXRlPD0ie2VuZERhdGV9IicKICAgIHNxbCArPSBmJyBhbmQgaXNfb3Blbj17aXNfb3Blbn0nCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpLmZldGNoYWxsKCkKICAgIHJldHVybiBbZFswXS5zdHJmdGltZSgnJVklbSVkJykgZm9yIGQgaW4gcmVzdWx0XQoKCmRlZiByZWFkTGFzdFRUTVBFcyhzdG9ja0xpc3QsIHRyYWRlX2RhdGU9Tm9uZSk6CiAgICAiIiIKICAgILbByKFzdG9ja0xpc3TW0LnJxrHWuLaoyNXG2rXEVFRNUEUsIMSsyM/IodfuuvPSu8zstcRUVE1QRQogICAgOnBhcmFtIHN0b2NrTGlzdDogbGlzdAogICAgICAgILnJxrHB0LHtCiAgICA6cGFyYW0gdHJhZGVfZGF0ZTogc3RyCiAgICAgICAgJ1lZWVltbWRkJ7jxyr21xMjVxtoKICAgIDpyZXR1cm46CiAgICAiIiIKICAgIHNxbCA9ICdzZWxlY3QgdHNfY29kZSwgcGVfdHRtIHBlIGZyb20gZGFpbHlfYmFzaWMgd2hlcmUgdHJhZGVfZGF0ZT0nCiAgICBpZiB0cmFkZV9kYXRlIGlzIE5vbmU6CiAgICAgICAgc3FsICs9ICcoc2VsZWN0IG1heCh0cmFkZV9kYXRlKSBmcm9tIGRhaWx5X2Jhc2ljKScKICAgIGVsc2U6CiAgICAgICAgc3FsICs9IGYnInt0cmFkZV9kYXRlfSInCgogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5mZXRjaGFsbCgpCiAgICBpZiBub3QgcmVzdWx0OgogICAgICAgIGxvZ2dpbmcud2FybmluZyhmJ8ixydl7dHJhZGVfZGF0ZX3Dv8jV1rix6icpCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICAjIHRzX2NvZGVzLCB0dG1wZXMgPSB6aXAoKnJlc3VsdCkKICAgICMgZGYgPSBwZC5EYXRhRnJhbWUoeyd0c19jb2RlJzogdHNfY29kZXMsICdwZSc6IHR0bXBlc30pCiAgICBkZiA9IGRmLmxvY1tkZlsndHNfY29kZSddLmlzaW4oc3RvY2tMaXN0KV0KICAgIGRmID0gZGYuZHJvcG5hKCkKICAgIHJldHVybiBkZgoKCiMgZGVmIGFsdGVyS2xpbmUoKToKIyAgICAgc3FsID0gJ3Nob3cgdGFibGVzIGxpa2UgJXMnCiMgICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCwgJ2tsaW5lJScpCiMgICAgIHJlc3VsdCA9IHJlc3VsdC5mZXRjaGFsbCgpCiMKIyAgICAgZm9yIGkgaW4gcmVzdWx0OgojICAgICAgICAgdGFibGVuYW1lID0gaVswXQojICAgICAgICAgc3FsID0gJ2NhbGwgc3RvY2tkYXRhLmFsdGVya2xpbmUoJXMpJwojICAgICAgICAgdHJ5OgojICAgICAgICAgICAgIGVuZ2luZS5leGVjdXRlKHNxbCwgdGFibGVuYW1lKQojICAgICAgICAgICAgICMgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZldGNoYWxsKCkKIyAgICAgICAgICAgICBwcmludCh0YWJsZW5hbWUpCiMgICAgICAgICBleGNlcHQgc3FsYWxjaGVteS5leGMuT3BlcmF0aW9uYWxFcnJvciBhcyBlOgojICAgICAgICAgICAgIHByaW50KGUpCiMgICAgIHJldHVybgoKCmRlZiBjYWxBbGxUVE1MaXJ1bihkYXRlLCBpbmNyZW1lbnRVcGRhdGU9VHJ1ZSk6CiAgICAiIiK8xsvjyKuyv7nJxrGxvsbaVFRNwPvI87Ki0LTI61RUTUxpcnVuse0KICAgIGRhdGU6ILjxyr1ZWVlZUaOsIDTOu8TqKzHOu7y+tsgKICAgIGluY3JlbWVudFVwZGF0ZTogVHJ1ZSwg1PbBv7j80MKjrCBGYWxzZSwguLK4x9LR09DK/b7dtcS4/NDCt73KvQogICAgIyC8xsvjuavKvaO6IFRUTcD7yPMgPSCxvsbawPvI8yArIMnPxOq12svEvL62yMD7yPMgLSDJz8TqzazG2sD7yPMKICAgICMgvMbL49StwO2julRUTcD7yPPOqtaux7DBrND4y8S49ry+tsjA+8jz1q66zQogICAgIyCxvsbawPvI87D8uqy98cTq0tTAtLL6yfrL+dPQwPvI86Osyc/E6rXay8S8vrbIwPvI8yC89cnPxOrNrMbawPvI886qyc/E6s2sxtq689K7uPa8vrbI1sHE6sSpwPvI8wogICAgIyDBvdXfz+C807y0zqpUVE3A+8jzCiAgICAjIL7ZwP2jujIwMTbE6jG8vrbIVFRNwPvI8yA9IDIwMTbE6jG8vrbIwPvI8yArIDIwMTXE6jS8vrbIwPvI8yAgLSAyMDE1xOoxvL62yMD7yPMKICAgICMgyv2+3c3q1fu1xMfpv/bPwrXIzazT2qO6CiAgICAjIDIwMTXE6jK8vrbIwPvI8yArIDIwMTXE6jO8vrbIwPvI8yArIDIwMTXE6jS8vrbIwPvI8yArIDIwMTbE6jG8vrbIwPvI8wogICAgIyC1sbG+xtrOqrXaNLy+tsjKsaOsvMbL47mryr3I1NPQ0KejrCDI56O6CiAgICAjIDIwMTbE6jS8vrbIVFRNwPvI8yA9IDIwMTbE6jS8vrbIwPvI8yArIDIwMTXE6jS8vrbIwPvI8yAgLSAyMDE1xOo0vL62yMD7yPMKICAgICOhobWrzqrM4bjf0KfCyqOstbGxvsbazqq12jS8vrbIyrGjrFRUTcD7yPM9sb7G2sD7yPOjrCDWsb3Tt7W72MD7yPPK/b7dCiAgICAiIiIKICAgIGxpcnVuQ3VyID0gcmVhZExpcnVuRm9yRGF0ZShkYXRlKQogICAgaWYgKGRhdGUgJSAxMCkgPT0gNDoKICAgICAgICBUVE1MaXJ1biA9IGxpcnVuQ3VyLmNvcHkoKQogICAgICAgIFRUTUxpcnVuLmNvbHVtbnMgPSBbJ3RzX2NvZGUnLCAnZGF0ZScsICd0dG1wcm9maXRzJywgJ3JlcG9ydGRhdGUnXQogICAgIyAgICAgICAgIHJldHVybiB3cml0ZVNRTChUVE1MaXJ1biwgJ3R0bWxpcnVuJykKICAgIGVsc2U6CiAgICAgICAgaWYgaW5jcmVtZW50VXBkYXRlOgogICAgICAgICAgICBUVE1MaXJ1bkN1ciA9IHJlYWRUVE1Qcm9maXRzRm9yRGF0ZShkYXRlKQogICAgICAgICAgICBsaXJ1bkN1ciA9IGxpcnVuQ3VyW35saXJ1bkN1ci50c19jb2RlLmlzaW4oVFRNTGlydW5DdXIudHNfY29kZSldCgogICAgICAgICMgyc/E6rXay8S8vrbIwPvI8ywgvfbIocD7yPPX1rbOsqK4/MP7zqpwcm9maXRzMQogICAgICAgIGxhc3RZZWFyRW5kID0gKGRhdGUgLy8gMTAgLSAxKSAqIDEwICsgNAogICAgICAgIGxpcnVuTGFzdFllYXJFbmQgPSByZWFkTGlydW5Gb3JEYXRlKGxhc3RZZWFyRW5kKQogICAgICAgIHByaW50KCgnbGlydW5MYXN0WWVhckVuZC5oZWFkKCk6JywgbGlydW5MYXN0WWVhckVuZC5oZWFkKCkpKQogICAgICAgIGxpcnVuTGFzdFllYXJFbmQgPSBsaXJ1bkxhc3RZZWFyRW5kW1sndHNfY29kZScsICdwcm9maXRzJ11dCiAgICAgICAgbGlydW5MYXN0WWVhckVuZC5jb2x1bW5zID0gWyd0c19jb2RlJywgJ3Byb2ZpdHMxJ10KCiAgICAgICAgIyDJz8TqzazG2sD7yPMsIL32yKHA+8jz19a2zrKiuPzD+86qcHJvZml0czIKICAgICAgICBsYXN0WWVhclF1YXJ0ZXIgPSBkYXRlIC0gMTAKICAgICAgICBsaXJ1bkxhc3RRYXJ0ZXIgPSByZWFkTGlydW5Gb3JEYXRlKGxhc3RZZWFyUXVhcnRlcikKICAgICAgICBsaXJ1bkxhc3RRYXJ0ZXIgPSBsaXJ1bkxhc3RRYXJ0ZXJbWyd0c19jb2RlJywgJ3Byb2ZpdHMnXV0KICAgICAgICBsaXJ1bkxhc3RRYXJ0ZXIuY29sdW1ucyA9IFsndHNfY29kZScsICdwcm9maXRzMiddCgogICAgICAgICMg1fu6z9LUyc/I/bj2vL62yMD7yPOjrHRzX2NvZGXOqtX7us+8/AogICAgICAgIFRUTUxpcnVuID0gcGQubWVyZ2UobGlydW5DdXIsIGxpcnVuTGFzdFllYXJFbmQsIG9uPSd0c19jb2RlJykKICAgICAgICBUVE1MaXJ1biA9IHBkLm1lcmdlKFRUTUxpcnVuLCBsaXJ1bkxhc3RRYXJ0ZXIsIG9uPSd0c19jb2RlJykKCiAgICAgICAgVFRNTGlydW5bJ3R0bXByb2ZpdHMnXSA9IChUVE1MaXJ1bi5wcm9maXRzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRUTUxpcnVuLnByb2ZpdHMxIC0gVFRNTGlydW4ucHJvZml0czIpCiAgICAgICAgVFRNTGlydW4gPSBUVE1MaXJ1bltbJ3RzX2NvZGUnLCAnZGF0ZScsICd0dG1wcm9maXRzJywgJ3JlcG9ydGRhdGUnXV0KICAgIHByaW50KCdUVE1MaXJ1bi5oZWFkKCk6XG4nLCBUVE1MaXJ1bi5oZWFkKCkpCgogICAgIyDQtMjrdHRtbGlydW6x7brzo6zW2MvjVFRNwPvI89T2s6TCygogICAgaWYgaW5jcmVtZW50VXBkYXRlOgogICAgICAgIHdyaXRlU1FMKFRUTUxpcnVuLCAndHRtbGlydW4nKQogICAgZWxzZToKICAgICAgICByZXBsYWNlVFRNTGlucnVuKFRUTUxpcnVuKQoKICAgIHJldHVybiBjYWxUVE1MaXJ1bkluY1JhdGUoZGF0ZSkKCgpkZWYgcmVwbGFjZVRUTUxpbnJ1bihkZik6CiAgICAiIiIKICAgINLUzOa7u7e9yr24/NDCVFRNwPvI86Os08PT2sX6wb/Q3tX9VFRNwPvI87HttO3O8wogICAgOnBhcmFtIGRmOgogICAgOnJldHVybjoKICAgICIiIgogICAgZm9yIGluZGV4LCByb3cgaW4gZGYuaXRlcnJvd3MoKToKICAgICAgICAjIHByaW50KHJvd1sndHNfY29kZSddKQogICAgICAgIHRzX2NvZGUgPSByb3dbJ3RzX2NvZGUnXQogICAgICAgIF9kYXRlID0gcm93WydkYXRlJ10KICAgICAgICB0dG1wcm9maXRzID0gcm93Wyd0dG1wcm9maXRzJ10KICAgICAgICByZXBvcnRkYXRlID0gcm93WydyZXBvcnRkYXRlJ10KICAgICAgICBzcWwgPSAoJ3JlcGxhY2UgaW50byB0dG1saXJ1bih0c19jb2RlLCBkYXRlLCB0dG1wcm9maXRzLCByZXBvcnRkYXRlKSAnCiAgICAgICAgICAgICAgICd2YWx1ZXMoIiUodHNfY29kZSlzIiwgJShfZGF0ZSlzLCAnCiAgICAgICAgICAgICAgICclKHR0bXByb2ZpdHMpcywgIiUocmVwb3J0ZGF0ZSlzIik7JyAlIGxvY2FscygpKQogICAgICAgIHByaW50KHNxbCkKICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCgoKZGVmIGNhbFRUTUxpcnVuSW5jUmF0ZShkYXRlLCBpbmNyZW1lbnRVcGRhdGU9VHJ1ZSk6CiAgICAiIiK8xsvjyKuyv7nJxrGxvsbaVFRNwPvI89T2s6TCyrKi0LTI61RUTUxpcnVuse0KICAgIGRhdGU6ILjxyr1ZWVlZUaOsIDTOu8TqKzHOu7y+tsgKICAgICMgvMbL47mryr2juiBUVE3A+8jz1PazpMLKPSAosb7G2lRUTcD7yPMgIC0gyc/E6s2sxtpUVE3A+8jzKSAvIFRUTcD7yPMgKiAxMDAKICAgICIiIgogICAgVFRNTGlydW5DdXIgPSByZWFkVFRNUHJvZml0c0ZvckRhdGUoZGF0ZSkKICAgIGlmIGluY3JlbWVudFVwZGF0ZToKICAgICAgICBUVE1MaXJ1bkN1ciA9IFRUTUxpcnVuQ3VyW1RUTUxpcnVuQ3VyLmluY3JhdGUuaXNudWxsKCldCiAgICBUVE1MaXJ1bkxhc3RZZWFyID0gcmVhZFRUTVByb2ZpdHNGb3JEYXRlKGRhdGUgLSAxMCkKICAgIFRUTUxpcnVuTGFzdFllYXIgPSBUVE1MaXJ1bkxhc3RZZWFyW1sndHNfY29kZScsICd0dG1wcm9maXRzJ11dCiAgICBUVE1MaXJ1bkxhc3RZZWFyLmNvbHVtbnMgPSBbJ3RzX2NvZGUnLCAndHRtcHJvZml0czEnXQogICAgVFRNTGlydW5MYXN0WWVhciA9IFRUTUxpcnVuTGFzdFllYXJbVFRNTGlydW5MYXN0WWVhci50dG1wcm9maXRzMSAhPSAwXQoKICAgICMg1fu6z9LUyc8yuPax7aOsdHNfY29kZc6q1fu6z7z8CiAgICBUVE1MaXJ1bkN1ciA9IHBkLm1lcmdlKFRUTUxpcnVuQ3VyLCBUVE1MaXJ1bkxhc3RZZWFyLCBvbj0ndHNfY29kZScpCgogICAgVFRNTGlydW5DdXJbJ2luY3JhdGUnXSA9ICgoVFRNTGlydW5DdXIudHRtcHJvZml0cyAtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUVE1MaXJ1bkN1ci50dG1wcm9maXRzMSkgLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYnMoVFRNTGlydW5DdXIudHRtcHJvZml0czEpICogMTAwKQogICAgZm9yIGkgaW4gVFRNTGlydW5DdXIudmFsdWVzOgogICAgICAgIHRzX2NvZGUgPSBpWzBdCiAgICAgICAgaW5jUmF0ZSA9IHJvdW5kKGlbNF0sIDIpCiAgICAgICAgc3FsID0gKCd1cGRhdGUgdHRtbGlydW4gJwogICAgICAgICAgICAgICAnc2V0IGluY3JhdGUgPSAlKGluY1JhdGUpcycKICAgICAgICAgICAgICAgJyB3aGVyZSB0c19jb2RlID0gIiUodHNfY29kZSlzIicKICAgICAgICAgICAgICAgJ2FuZCBgZGF0ZWAgPSAlKGRhdGUpcycgJSBsb2NhbHMoKSkKICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4KCgpkZWYgY2FsVFRNTGlydW4oc3RvY2tkZiwgZGF0ZSk6CiAgICBsaXJ1bjEgPSBzdG9ja2RmW3N0b2NrZGYuZGF0ZSA9PSBkYXRlIC0gMTBdICAjIMnPxOrNrMbawPvI8wogICAgbGlydW4yID0gc3RvY2tkZltzdG9ja2RmLmRhdGUgPT0gKGRhdGUgLyAxMCAtIDEpICogMTAgKyA0XSAgIyDJz8TqxKnA+8jzCiAgICBsaXJ1bjMgPSBzdG9ja2RmW3N0b2NrZGYuZGF0ZSA9PSBkYXRlXSAgIyCxvsbawPvI8wogICAgaWYgbGlydW4xLmVtcHR5IG9yIGxpcnVuMi5lbXB0eSBvciBsaXJ1bjMuZW1wdHk6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGxpcnVuMSA9IGxpcnVuMS5pYXRbMCwgMl0KICAgIGxpcnVuMiA9IGxpcnVuMi5pYXRbMCwgMl0KICAgIHRzX2NvZGUgPSBsaXJ1bjMuaWF0WzAsIDBdCiAgICByZXBvcnRkYXRlID0gbGlydW4zLmlhdFswLCAzXQogICAgbGlydW4zID0gbGlydW4zLmlhdFswLCAyXQogICAgIyBUVE3A+8jzID0gsb7G2sD7yPOjq8nPxOrEqcD7yPMtyc/E6s2sxtrA+8jzCiAgICBsaXJ1biA9IGxpcnVuMyArIGxpcnVuMiAtIGxpcnVuMQogICAgcmV0dXJuIFt0c19jb2RlLCBkYXRlLCBsaXJ1biwgcmVwb3J0ZGF0ZV0KCgpkZWYgZ2V0TGlydW5VcGRhdGVFbmRRdWFydGVyKCk6CiAgICBjdXJRdWFydGVyID0gZGF0YXRyYW5zLnRyYW5zRGF0ZVRvUXVhcnRlcihkdC5kYXRldGltZS5ub3coKSkKICAgIHJldHVybiBkYXRhdHJhbnMucXVhcnRlclN1YihjdXJRdWFydGVyLCAxKQoKCmRlZiBfZ2V0TGFzdFVwZGF0ZShzcWwpOgogICAgIiIiCiAgICBQYXJhbWV0ZXJzCiAgICAtLS0tLS0tLQogICAgc3FsOiBzdHIgINa4tqiy6dGvuPzQwsjVxtq1xFNRTNPvvuQKICAgIGUuZzogJ3NlbGVjdCB0dG1wZSBmcm9tIGxhc3R1cGRhdGUgd2hlcmUgdHNfY29kZT0iMDAyNzk2IicKCiAgICBSZXR1cm4KICAgIC0tLS0tLS0tCiAgICBkYXRldGltZaO6ZGF0ZXRpbWUKICAgICIiIgogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5maXJzdCgpCiAgICBpZiByZXN1bHQgaXMgTm9uZToKICAgICAgICByZXR1cm4gZHQuZGF0ZXRpbWUuc3RycHRpbWUoJzE5OTAtMDEtMDEnLCAnJVktJW0tJWQnKS5kYXRlKCkKCiAgICBsYXN0VXBkYXRlRGF0ZSA9IHJlc3VsdFswXQogICAgaWYgbGFzdFVwZGF0ZURhdGUgaXMgTm9uZToKICAgICAgICByZXR1cm4gZHQuZGF0ZXRpbWUuc3RycHRpbWUoJzE5OTAtMDEtMDEnLCAnJVktJW0tJWQnKS5kYXRlKCkKCiAgICAjIGxhc3RVcGRhdGVEYXRlID0gbGFzdFVwZGF0ZURhdGVbMF0KICAgIGlmIGlzaW5zdGFuY2UobGFzdFVwZGF0ZURhdGUsIGR0LmRhdGUpOgogICAgICAgIHJldHVybiBsYXN0VXBkYXRlRGF0ZQogICAgICAgICMgcmV0dXJuIGxhc3RVcGRhdGVEYXRlICsgZHQudGltZWRlbHRhKGRheXM9MSkKICAgIGVsc2U6CiAgICAgICAgbG9nZ2luZy5kZWJ1ZygnbGFzdFVwZGF0ZURhdGUgdHlwZSBpczogJXMnLCB0eXBlKGxhc3RVcGRhdGVEYXRlKSkKICAgICAgICByZXR1cm4gZHQuZGF0ZXRpbWUuc3RycHRpbWUobGFzdFVwZGF0ZURhdGUsICclWS0lbS0lZCcpLmRhdGUoKQoKCmRlZiB3cml0ZUNoaWd1KHN0b2NrTGlzdCk6CiAgICBlbmdpbmUuZXhlY3V0ZSgnVFJVTkNBVEUgVEFCTEUgY2hpZ3UnKQogICAgZm9yIHRzX2NvZGUgaW4gc3RvY2tMaXN0OgogICAgICAgIHNxbCA9ICgnaW5zZXJ0IGludG8gY2hpZ3UgKGB0c19jb2RlYCkgJwogICAgICAgICAgICAgICAndmFsdWVzICgiJXMiKTsnKSAlIHRzX2NvZGUKICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCgoKIyBkZWYgc2F2ZVBFTGlydW5JbmNyZWFzZShzdGFydERhdGU9JzIwMDctMDEtMDEnLCBlbmREYXRlPU5vbmUpOgojICAgICBzdG9ja0xpc3QgPSByZWFkU3RvY2tMaXN0RnJvbVNRTCgpCiMgICAgIGZvciB0c19jb2RlLCBzdG9ja05hbWVfIGluIHN0b2NrTGlzdDoKIyAgICAgICAgICMgICAgIHNxbCA9ICh1J2luc2VydCBpZ25vcmUgaW50byBwZWxpcnVuaW5jcmVhc2UodHNfY29kZSwgZGF0ZSwgcGUpICcKIyAgICAgICAgICMgICAgICAgICAgICB1J3NlbGVjdCAiJSh0c19jb2RlKXMiLCBkYXRlLCB0dG1wZSAnCiMgICAgICAgICAjICAgICAgICAgICAgdSdmcm9tIGtsaW5lc3RvY2slKHRzX2NvZGUpcyAnCiMgICAgICAgICAjICAgICAgICAgICAgdSd3aGVyZSBgZGF0ZWA+PSIlKHN0YXJ0RGF0ZSlzIjsnKSAlIGxvY2FscygpCiMgICAgICAgICAjCiMgICAgICAgICAjICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCiMKIyAgICAgICAgIFRUTUxpcnVuRGYgPSByZWFkVFRNUHJvZml0cyh0c19jb2RlLCBzdGFydERhdGUpCiMgICAgICAgICBUVE1MaXJ1bkRmID0gVFRNTGlydW5EZi5kcm9wbmEoKS5yZXNldF9pbmRleChkcm9wPVRydWUpCiMgICAgICAgICBrbGluZVRhYmxlbmFtZSA9ICdrbGluZXN0b2NrJwojICAgICAgICAgVFRNTGlydW5Db3VudCA9IGxlbihUVE1MaXJ1bkRmKQojICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoVFRNTGlydW5Db3VudCk6CiMgICAgICAgICAgICAgaW5jcmF0ZSA9IFRUTUxpcnVuRGZbJ2luY3JhdGUnXS5pbG9jW2ldCiMgICAgICAgICAgICAgc3RhcnREYXRlXyA9IFRUTUxpcnVuRGZbJ3JlcG9ydGRhdGUnXS5pbG9jW2ldCiMgICAgICAgICAgICAgdHJ5OgojICAgICAgICAgICAgICAgICBlbmREYXRlXyA9IFRUTUxpcnVuRGZbJ3JlcG9ydGRhdGUnXS5pbG9jW2kgKyAxXQojICAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgojICAgICAgICAgICAgICAgICBlbmREYXRlXyA9IE5vbmUKIwojICAgICAgICAgICAgIHNxbCA9ICgndXBkYXRlIHBlbGlydW5pbmNyZWFzZSAnCiMgICAgICAgICAgICAgICAgICAgICdzZXQgbGlydW5pbmNyZWFzZSA9ICUoaW5jcmF0ZSlzJwojICAgICAgICAgICAgICAgICAgICAnIHdoZXJlIHRzX2NvZGU9IiUodHNfY29kZSlzIicKIyAgICAgICAgICAgICAgICAgICAgJyBhbmQgZGF0ZT49IiUoc3RhcnREYXRlXylzIicpICUgbG9jYWxzKCkKIyAgICAgICAgICAgICBpZiBlbmREYXRlXyBpcyBub3QgTm9uZToKIyAgICAgICAgICAgICAgICAgc3FsICs9ICgnIGFuZCBkYXRlPCIlKGVuZERhdGVfKXMiJyAlIGxvY2FscygpKQojICAgICAgICAgICAgIGVuZ2luZS5leGVjdXRlKHNxbCkKIwojCiMgIyAgICAgICAgIGJyZWFrCgoKIyBkZWYgc2V0S2xpbmVUVE1QRUxhc3RVcGRhdGUodHNfY29kZSwgZW5kRGF0ZSk6CiMgICAgIHNxbCA9ICgnaW5zZXJ0IGludG8gbGFzdHVwZGF0ZSAoYHRzX2NvZGVgLCBgdHRtcGVgKSAnCiMgICAgICAgICAgICAndmFsdWVzICgiJSh0c19jb2RlKXMiLCAiJShlbmREYXRlKXMiKSAnCiMgICAgICAgICAgICAnb24gZHVwbGljYXRlIGtleSB1cGRhdGUgYHR0bXBlYD0iJShlbmREYXRlKXMiOycgJSBsb2NhbHMoKSkKIyAgICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKQojICAgICByZXR1cm4gcmVzdWx0CgoKZGVmIHNldEd1YmVuTGFzdFVwZGF0ZSh0c19jb2RlLCBlbmREYXRlPU5vbmUpOgogICAgc3FsID0gKCdpbnNlcnQgaW50byBsYXN0dXBkYXRlIChgdHNfY29kZWAsIGBndWJlbmApICcKICAgICAgICAgICAndmFsdWVzICgiJSh0c19jb2RlKXMiLCAiJShlbmREYXRlKXMiKSAnCiAgICAgICAgICAgJ29uIGR1cGxpY2F0ZSBrZXkgdXBkYXRlIGBndWJlbmA9IiUoZW5kRGF0ZSlzIjsnICUgbG9jYWxzKCkpCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGRlbF91cGRhdGVLbGluZVRUTVBFKHRzX2NvZGUsIHN0YXJ0RGF0ZSwgZW5kRGF0ZT1Ob25lKToKICAgICIiIgogICAgIyC4/NDCS2xpbmWx7VRUTVBFCiAgICAiIiIKICAgICMgICAgIGVuZ2luZSA9IGdldEVuZ2luZSgpCiAgICBpZiBzdGFydERhdGUgaXMgTm9uZToKICAgICAgICByZXR1cm4KCiAgICBzdGFydERhdGVTdHIgPSBzdGFydERhdGUuc3RyZnRpbWUoJyVZLSVtLSVkJykKICAgIGtsaW5lVGFibGVuYW1lID0gJ2tsaW5lc3RvY2snCiAgICBzcWwgPSAoJ3VwZGF0ZSAlKGtsaW5lVGFibGVuYW1lKXMgJwogICAgICAgICAgICdzZXQgdHRtcGUgPSByb3VuZCh0b3RhbG1hcmtldHZhbHVlIC8gdHRtcHJvZml0cywgMiknCiAgICAgICAgICAgJyB3aGVyZSB0c19jb2RlPSIlKHRzX2NvZGUpcyIgYW5kIGRhdGU+PSIlKHN0YXJ0RGF0ZVN0cilzIicKICAgICAgICAgICAlIGxvY2FscygpKQogICAgaWYgZW5kRGF0ZToKICAgICAgICBzcWwgKz0gJyBhbmQgZGF0ZSA8ICIlcyInICUgZW5kRGF0ZQogICAgc3FsICs9ICcgYW5kIHRvdGFsbWFya2V0dmFsdWUgaXMgbm90IG51bGwnCiAgICBzcWwgKz0gJyBhbmQgdHRtcHJvZml0cyBpcyBub3QgbnVsbCcKICAgIHVudXNlZFJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHNxbCA9IGYnc2VsZWN0IG1heChkYXRlKSBmcm9tIGtsaW5lc3RvY2sgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IicKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGVuZERhdGUgPSByZXN1bHQuZmV0Y2hvbmUoKVswXQogICAgaWYgZW5kRGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBlbmREYXRlID0gZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgZWxzZToKICAgICAgICBlbmREYXRlID0gKGR0LmRhdGV0aW1lLnRvZGF5KCkgLSBkdC50aW1lZGVsdGEoZGF5cz0xKSkKICAgICAgICBlbmREYXRlID0gZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgcmV0dXJuIGVuZERhdGUKCgpkZWYgcmVhZEd1YmVuKHRzX2NvZGUsIHN0YXJ0RGF0ZT1Ob25lLCBlbmREYXRlPU5vbmUpOgogICAgIiIiyKHWuLaoucnGsdK7ts7I1bzktcS5ybG+seS2r8r9vt2jrHN0YXJ0RGF0ZbWxyNXO3sr9vt3KsaOsyKHWrsew1+69/NK7tM6x5Lavyv2+3QogICAgUGFyYW1ldGVycwogICAgLS0tLS0tLS0KICAgIHRzX2NvZGU6IHN0ciC5ycaxtPrC6yAgZS5nOiAnNjAwNTE5JwogICAgc3RhcnREYXRlOiBzdHIgxvDKvMjVxtogIGUuZzogJzE5OTAtMDEtMDEnCiAgICBlbmREYXRlOiBzdHIgvdjWucjVxtogIGUuZzogJzE5OTAtMDEtMDEnCgogICAgUmV0dXJuCiAgICAtLS0tLS0tLQogICAgRGF0YUZyYW1lCiAgICAgICAgZGF0ZTogucmxvrHktq/I1cbaCiAgICAgICAgdG90YWxzaGFyZXM6ILHktq+689fcucmxvgogICAgIiIiCiAgICAjINa4tqjI1cbao6i6rKOpx7DX7r380ru0zrnJsb6x5LavyNXG2gogICAgaWYgc3RhcnREYXRlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuCiAgICBzdGFydERhdGVTdHIgPSBzdGFydERhdGUuc3RyZnRpbWUoJyVZLSVtLSVkJykKICAgIHNxbCA9ICgnc2VsZWN0IG1heChkYXRlKSBmcm9tIGd1YmVuICcKICAgICAgICAgICAnd2hlcmUgdHNfY29kZT0iJSh0c19jb2RlKXMiICcKICAgICAgICAgICAnYW5kIGRhdGU8PSIlKHN0YXJ0RGF0ZVN0cilzIicgJSBsb2NhbHMoKSkKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGxhc3RVcGRhdGUgPSByZXN1bHQuZmV0Y2hvbmUoKVswXQoKICAgICMg1ri2qMjVxtqjqLqso6nHsM7eucmxvrHktq/K/b7dtcSjrLLp0a/G8Mq8yNXG2snotqjOqnN0YXJ0RGF0ZQogICAgIyC38dTyyei2qM6q1+69/NK7tM6x5LavyNXG2gogICAgaWYgbGFzdFVwZGF0ZSBpcyBOb25lOgogICAgICAgIGd1YmVuU3RhcnREYXRlID0gc3RhcnREYXRlU3RyCiAgICBlbHNlOgogICAgICAgIGd1YmVuU3RhcnREYXRlID0gbGFzdFVwZGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQoKICAgIHNxbCA9ICgnc2VsZWN0IGRhdGUsIHRvdGFsc2hhcmVzIGZyb20gZ3ViZW4gJwogICAgICAgICAgICd3aGVyZSB0c19jb2RlID0gIiUodHNfY29kZSlzIicKICAgICAgICAgICAnIGFuZCBgZGF0ZWA+PSIlKGd1YmVuU3RhcnREYXRlKXMiJyAlIGxvY2FscygpKQogICAgaWYgZW5kRGF0ZToKICAgICAgICBzcWwgKz0gJyBhbmQgYGRhdGVgIDw9ICIlcyInICUgZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKCiAgICAjINa4tqjI1cbao6i6rKOpx7C05tTaucmxvrHktq/K/b7dtcSjrNbYyei12jG0zrHktq/I1cbazqpzdGFydERhdGWjrAogICAgIyC89cnZuPzQwktsaW5lse3W0NfcytDWtcv50Oi8xsvjwb8KICAgIGlmIGxhc3RVcGRhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgZ2JkYXRlID0gZGF0ZXRpbWUuc3RycHRpbWUoZ3ViZW5TdGFydERhdGUsICclWS0lbS0lZCcpLmRhdGUoKQogICAgICAgIGRmLmxvY1tkZlsnZGF0ZSddID09IGdiZGF0ZSwgJ2RhdGUnXSA9IHN0YXJ0RGF0ZVN0cgogICAgcmV0dXJuIGRmCgoKZGVmIHJlYWRHdWJlblVwZGF0ZUxpc3QoKToKICAgICIiIiCxyL3PucnGsdLRtOa5ybG+yv2+3dPr1+7QwrnJyv2+3aOssrvP4M2syrHU8rHtyr7Q6NKquPzQwrXEucnGsQogICAgIiIiCiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUsIHRvdGFscyBhcyB0b3RhbHNuZXcgZnJvbSBzdG9ja2xpc3Q7JwogICAgZGZOZXcgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKCiAgICAjICAgICBkZk5ldyA9IHRzLmdldF9zdG9ja19iYXNpY3MoKQogICAgIyAgICAgZGZOZXcgPSBkZk5ldy5yZXNldF9pbmRleCgpCiAgICAjICAgICBkZk5ldyA9IGRmTmV3W1snY29kZScsICd0b3RhbHMnXV0KICAgICMgICAgIGRmTmV3LmNvbHVtbnMgPSBbJ3RzX2NvZGUnLCAndG90YWxzbmV3J10KICAgIHNxbCA9ICgnU0VMRUNUIHRzX2NvZGUsIHRvdGFsc2hhcmVzIGFzIHRvdGFsc29sZCAnCiAgICAgICAgICAgJ0ZST00gKHNlbGVjdCAqIGZyb20gc3RvY2tkYXRhLmd1YmVuIG9yZGVyIGJ5IGRhdGUgZGVzYykgJwogICAgICAgICAgICdhcyB0YWJsZWEgZ3JvdXAgYnkgdHNfY29kZTsnKQogICAgZGZPbGQgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIGRmT2xkLnRvdGFsc29sZCA9IGRmT2xkLnRvdGFsc29sZCAvIDEwMDAwMDAwMAogICAgZGZPbGQgPSBkZk9sZC5yb3VuZCgyKQogICAgdXBkYXRlTGlzdCA9IHBkLm1lcmdlKGRmTmV3LCBkZk9sZCwgb249J3RzX2NvZGUnLCBob3c9J2xlZnQnKQogICAgdXBkYXRlTGlzdC5maWxsbmEoeyd0b3RhbHNvbGQnOiAwfSwgaW5wbGFjZT1UcnVlKQogICAgdXBkYXRlTGlzdCA9IHVwZGF0ZUxpc3RbYWJzKAogICAgICAgIHVwZGF0ZUxpc3QudG90YWxzbmV3IC0gdXBkYXRlTGlzdC50b3RhbHNvbGQpID4gMC4xXQogICAgcmV0dXJuIHVwZGF0ZUxpc3QudHNfY29kZQoKCmRlZiByZWFkQ2xvc2UodHNfY29kZSk6CiAgICBzcWwgPSAoJ3NlbGVjdCBkYXRlLCBjbG9zZSBmcm9tIGtsaW5lc3RvY2sgd2hlcmUgdHNfY29kZT0iJSh0c19jb2RlKXMiOycKICAgICAgICAgICAlIGxvY2FscygpKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHJldHVybiBkZgoKCmRlZiByZWFkQ3VycmVudENsb3NlKHRzX2NvZGUpOgogICAgc3FsID0gKGYnc2VsZWN0IGNsb3NlIGZyb20gZGFpbHkgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IiAnCiAgICAgICAgICAgZicgYW5kIHRyYWRlX2RhdGU9KHNlbGVjdCBtYXgoYHRyYWRlX2RhdGVgKScKICAgICAgICAgICBmJyBmcm9tIGRhaWx5IHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSIpJykKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHJldHVybiByZXN1bHQuZmV0Y2hvbmUoKVswXQoKCmRlZiByZWFkQ3VycmVudFBFRyh0c19jb2RlKToKICAgIHNxbCA9ICdzZWxlY3QgcGVnIGZyb20gZ3V6aGlyZXN1bHQgd2hlcmUgdHNfY29kZT0iJXMiIGxpbWl0IDEnICUgdHNfY29kZQogICAgbG9nZ2luZy5pbmZvKHNxbCkKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHRyeToKICAgICAgICByZXN1bHQgPSByZXN1bHQuZmV0Y2hvbmUoKVswXQogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICByZXR1cm4gTm9uZQogICAgZWxzZToKICAgICAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGdldHRzX2NvZGVzRm9yQ2xhc3NpZmllZChjbGFzc2lmaWVkKToKICAgIHNxbCA9ICgnc2VsZWN0IHRzX2NvZGUgZnJvbSBjbGFzc2lmaWVkICcKICAgICAgICAgICAnd2hlcmUgY25hbWUgPSAiJShjbGFzc2lmaWVkKXMiJyAlIGxvY2FscygpKQogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKQogICAgdHNfY29kZUxpc3QgPSBbY2xhc3NpZmllZElEWzBdIGZvciBjbGFzc2lmaWVkSUQgaW4gcmVzdWx0LmZldGNoYWxsKCldCiAgICByZXR1cm4gdHNfY29kZUxpc3QKCgpkZWYgY2xhc3NpZmllZFRvU1FMKGNsYXNzaWZpZWREZik6CiAgICAiIiIgvsmw5tC00NDStbfWwOC1vcr9vt2/4qOsILzGu67JvrP9sb66r8r9CiAgICAiIiIKICAgIHRhYmxlbmFtZSA9ICdjbGFzc2lmaWVkJwogICAgcmV0dXJuIHdyaXRlU1FMKGNsYXNzaWZpZWREZiwgdGFibGVuYW1lKQoKCmRlZiBnZXRDaGlndUxpc3QoKToKICAgICMgICAgIHNxbCA9ICgnc2VsZWN0IGNoaWd1LnRzX2NvZGUsIHN0b2NrbGlzdC5uYW1lIGZyb20gY2hpZ3UsIHN0b2NrbGlzdCAnCiAgICAjICAgICAgICAgICAgJ3doZXJlIGNoaWd1LnRzX2NvZGU9c3RvY2tsaXN0LnRzX2NvZGUnKQogICAgc3FsID0gJ3NlbGVjdCB0c19jb2RlIGZyb20gY2hpZ3UnCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4gW3RzX2NvZGVbMF0gZm9yIHRzX2NvZGUgaW4gcmVzdWx0LmZldGNoYWxsKCldCgoKZGVmIGdldEd1emhpTGlzdCgpOgogICAgIyAgICAgc3FsID0gKCdzZWxlY3QgZ3V6aGlyZXN1bHQudHNfY29kZSwgc3RvY2tsaXN0Lm5hbWUgJwogICAgIyAgICAgICAgICAgICdmcm9tIGd1emhpcmVzdWx0LCBzdG9ja2xpc3QgJwogICAgIyAgICAgICAgICAgICd3aGVyZSBndXpoaXJlc3VsdC50c19jb2RlPXN0b2NrbGlzdC50c19jb2RlJykKICAgIHNxbCA9ICdzZWxlY3QgdHNfY29kZSBmcm9tIHlvdXpoaWd1emhpJwogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKQogICAgcmV0dXJuIFt0c19jb2RlWzBdIGZvciB0c19jb2RlIGluIHJlc3VsdC5mZXRjaGFsbCgpXQoKCiMgICAgIHJldHVybiByZXN1bHQuZmV0Y2hhbGwoKQoKCmRlZiBnZXRZb3V6aGlMaXN0KCk6CiAgICAjICAgICBzcWwgPSAoJ3NlbGVjdCB5b3V6aGlndXpoaS50c19jb2RlLCBzdG9ja2xpc3QubmFtZSAnCiAgICAjICAgICAgICAgICAgJ2Zyb20geW91emhpZ3V6aGksIHN0b2NrbGlzdCAnCiAgICAjICAgICAgICAgICAgJ3doZXJlIHlvdXpoaWd1emhpLnRzX2NvZGU9c3RvY2tsaXN0LnRzX2NvZGUnKQogICAgIyAgICAgc3FsID0gJ3NlbGVjdCB0c19jb2RlIGZyb20gZ3V6aGlyZXN1bHQnCiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUgZnJvbSB5b3V6aGlndXpoaScKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHJldHVybiBbdHNfY29kZVswXSBmb3IgdHNfY29kZSBpbiByZXN1bHQuZmV0Y2hhbGwoKV0KCgpkZWYgZ2V0Q2xhc3NpZmllZEZvclN0b2Nrc0lEKHRzX2NvZGUpOgogICAgc3FsID0gKCdzZWxlY3QgY25hbWUgZnJvbSBjbGFzc2lmaWVkICcKICAgICAgICAgICAnd2hlcmUgdHNfY29kZSA9ICIlKHRzX2NvZGUpcyInICUgdHNfY29kZSkKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGNsYXNzaWZpZWQgPSByZXN1bHQuZmlyc3QoKVswXQogICAgcmV0dXJuIGNsYXNzaWZpZWQKCgpkZWYgZ2V0U3RvY2tOYW1lKHRzX2NvZGUpOgogICAgc3FsID0gZidzZWxlY3QgbmFtZSBmcm9tIHN0b2NrX2Jhc2ljIHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSI7JwogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5maXJzdCgpCiAgICBpZiByZXN1bHQgaXMgbm90IE5vbmU6CiAgICAgICAgcmV0dXJuIHJlc3VsdFswXQogICAgZWxzZToKICAgICAgICByZXR1cm4gTm9uZQoKCmRlZiByZWFkU3RvY2tLbGluZSh0c19jb2RlLCBzdGFydERhdGU9Tm9uZSwgZW5kRGF0ZT1Ob25lLCBkYXlzPTApOgogICAgIiIiCiAgICC2wcihucnGsUvP38r9vt0KICAgIDpwYXJhbSBlbmREYXRlOgogICAgOnBhcmFtIHN0YXJ0RGF0ZToKICAgIDpwYXJhbSB0c19jb2RlOiBzdHIsIDbOu7nJxrG0+sLrCiAgICA6cGFyYW0gZGF5czogaW50LCC2wcihtcTM7Mr9CiAgICA6cmV0dXJuOiBEYXRhZnJhbWUKICAgIGtsaW5lRGYgPSBwZC5EYXRhRnJhbWUoeydkYXRlJzogZGF0ZUxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbic6IG9wZW5MaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogY2xvc2VMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZ2gnOiBoaWdoTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb3cnOiBsb3dMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BlJzogcGVMaXN0fSkKICAgICIiIgogICAgc3FsID0gKGYnc2VsZWN0IGEudHJhZGVfZGF0ZSwgYS5vcGVuLCBhLmhpZ2gsIGEubG93LCBhLmNsb3NlLCBiLnBlX3R0bScKICAgICAgICAgICBmJyBmcm9tIGRhaWx5IGEsIGRhaWx5X2Jhc2ljIGIgd2hlcmUgYS50c19jb2RlPSJ7dHNfY29kZX0iICcpCiAgICBpZiBzdGFydERhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgc3FsICs9IGYnIGFuZCBhLnRyYWRlX2RhdGU+PSJ7c3RhcnREYXRlfSInCiAgICBpZiBlbmREYXRlIGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSBmJyBhbmQgYS50cmFkZV9kYXRlPD0ie2VuZERhdGV9IicKICAgIHNxbCArPSBmJyBhbmQgYS50c19jb2RlPWIudHNfY29kZSBhbmQgYS50cmFkZV9kYXRlPWIudHJhZGVfZGF0ZScKICAgIGlmIGRheXMgIT0gMDoKICAgICAgICBzcWwgKz0gZicgb3JkZXIgYnkgYS50cmFkZV9kYXRlIGRlc2MgbGltaXQge2RheXN9JwogICAgcmV0dXJuIF9yZWFkS2xpbmUoc3FsKQoKCmRlZiByZWFkUHJvZml0c0luY0FkZigpOgogICAgc3RvY2tzID0gcGQucmVhZF9leGNlbCgnZGF0YS9wcm9maXRzX2luY19hZGZfbGluZWFyLnhsc3gnKQogICAgc3RvY2tzID0gc3RvY2tzLnJvdW5kKDIpCiAgICAjIHN0b2NrcyA9IHN0b2Nrc1soc3RvY2tzWydtZWFuJ10gPj0gMTApICYKICAgICMgICAgICAgICAgICAgICAgIChzdG9ja3Muc2hhcnAgPj0gMC44KSAmCiAgICAjICAgICAgICAgICAgICAgICAoc3RvY2tzLnBlX3R0bSA8PSAzMCldCiAgICBzdG9ja3MgPSBzdG9ja3NbKHN0b2Nrc1sncjInXSA+PSAwLjMpICYgKHN0b2Nrc1snY29lZiddID4gMCldCiAgICBzdG9ja3Muc29ydF92YWx1ZXMoJ3NoYXJwJywgYXNjZW5kaW5nPUZhbHNlLCBpbnBsYWNlPVRydWUpCiAgICByZXR1cm4gc3RvY2tzCgoKZGVmIHJlYWRJbmRleEtsaW5lKGluZGV4X2NvZGUsIGRheXMpOgogICAgIiIiCiAgICC2wcih1rjK/UvP38r9vt0KICAgIDpwYXJhbSBpbmRleF9jb2RlOiBzdHIsIDnOu9a4yv20+sLrCiAgICA6cGFyYW0gZGF5czogaW50LCC2wcihtcTM7Mr9CiAgICA6cmV0dXJuOiBEYXRhZnJhbWUKICAgIGluZGV4RGYgPSBwZC5EYXRhRnJhbWUoeydkYXRlJzogZGF0ZUxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbic6IG9wZW5MaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogY2xvc2VMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZ2gnOiBoaWdoTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb3cnOiBsb3dMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BlJzogcGVMaXN0fSkKICAgICIiIgogICAgcGVUYWJsZSA9ICdpbmRleF9wZScgaWYgaW5kZXhfY29kZSA9PSAnMDAwMDEwLlNIJyBlbHNlICdpbmRleF9kYWlseWJhc2ljJwogICAgc3FsID0gKGYnc2VsZWN0IGEudHJhZGVfZGF0ZSwgYS5vcGVuLCBhLmhpZ2gsIGEubG93LCBhLmNsb3NlLCBiLnBlX3R0bSAnCiAgICAgICAgICAgZicgZnJvbSBpbmRleF9kYWlseSBhLCB7cGVUYWJsZX0gYiAnCiAgICAgICAgICAgZicgd2hlcmUgYS50c19jb2RlPSJ7aW5kZXhfY29kZX0iIGFuZCBhLnRzX2NvZGU9Yi50c19jb2RlICcKICAgICAgICAgICBmJyBhbmQgYS50cmFkZV9kYXRlPWIudHJhZGVfZGF0ZScKICAgICAgICAgICBmJyBvcmRlciBieSB0cmFkZV9kYXRlIGRlc2MgbGltaXQge2RheXN9OycpCiAgICBkZiA9IF9yZWFkS2xpbmUoc3FsKQogICAgIyBkZiA9IHBkLnJlYWRfc3FsKHNxbCwgZW5naW5lKQogICAgIyBkZi5yZW5hbWUoY29sdW1ucz17J3BlX3R0bSc6ICdwZSd9LCBpbnBsYWNlPVRydWUpCiAgICAjIGRmWydkYXRlJ10gPSBkZi50cmFkZV9kYXRlLmFwcGx5KGxhbWJkYSB4OiB4LnN0cmZ0aW1lKCclWSVtJWQnKSkKICAgICMgZGYuc29ydF92YWx1ZXMoYnk9J2RhdGUnLCBpbnBsYWNlPVRydWUpCiAgICAjIGRmLnNldF9pbmRleChrZXlzPSdkYXRlJywgaW5wbGFjZT1UcnVlKQogICAgIyBkZi5yZXNldF9pbmRleChpbnBsYWNlPVRydWUpCiAgICAjIGRmLnNvcnRfdmFsdWVzKGJ5PSd0cmFkZV9kYXRlJywgaW5wbGFjZT1UcnVlKQogICAgcmV0dXJuIGRmCgoKZGVmIF9yZWFkS2xpbmUoc3FsKToKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICBkZi5yZW5hbWUoY29sdW1ucz17J3RyYWRlX2RhdGUnOiAnZGF0ZScsICdwZV90dG0nOiAncGUnfSwgaW5wbGFjZT1UcnVlKQogICAgZGYuZGF0ZSA9IHBkLnRvX2RhdGV0aW1lKGRmLmRhdGUpCiAgICBkZiA9IGRmLnNldF9pbmRleCgnZGF0ZScpCiAgICBkZiA9IGRmLnNvcnRfaW5kZXgoKQogICAgZGYgPSBkZi5yZXNldF9pbmRleCgpCiAgICByZXR1cm4gZGYKICAgICMgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5mZXRjaGFsbCgpCiAgICAjIHN0b2NrRGF0YXMgPSBbaSBmb3IgaSBpbiByZXZlcnNlZChyZXN1bHQpXQogICAgIyAjIGtsaW5lRGF0YXMgPSBbXQogICAgIyBkYXRlTGlzdCA9IFtdCiAgICAjIG9wZW5MaXN0ID0gW10KICAgICMgY2xvc2VMaXN0ID0gW10KICAgICMgaGlnaExpc3QgPSBbXQogICAgIyBsb3dMaXN0ID0gW10KICAgICMgcGVMaXN0ID0gW10KICAgICMgaW5kZXhlcyA9IGxpc3QocmFuZ2UobGVuKHJlc3VsdCkpKQogICAgIyBmb3IgaSBpbiBpbmRleGVzOgogICAgIyAgICAgZGF0ZSwgX29wZW4sIGhpZ2gsIGxvdywgY2xvc2UsIHR0bXBlID0gc3RvY2tEYXRhc1tpXQogICAgIyAgICAgZGF0ZUxpc3QuYXBwZW5kKGRhdGUuc3RyZnRpbWUoIiVZLSVtLSVkIikpCiAgICAjICAgICAjIFF1YXJ0ZXJMaXN0LmFwcGVuZChkYXRlKQogICAgIyAgICAgb3Blbkxpc3QuYXBwZW5kKF9vcGVuKQogICAgIyAgICAgY2xvc2VMaXN0LmFwcGVuZChjbG9zZSkKICAgICMgICAgIGhpZ2hMaXN0LmFwcGVuZChoaWdoKQogICAgIyAgICAgbG93TGlzdC5hcHBlbmQobG93KQogICAgIyAgICAgcGVMaXN0LmFwcGVuZCh0dG1wZSkKICAgICMga2xpbmVEZiA9IHBkLkRhdGFGcmFtZSh7J2RhdGUnOiBkYXRlTGlzdCwKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgJ29wZW4nOiBvcGVuTGlzdCwKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogY2xvc2VMaXN0LAogICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAnaGlnaCc6IGhpZ2hMaXN0LAogICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAnbG93JzogbG93TGlzdCwKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgJ3BlJzogcGVMaXN0fSkKICAgICMgcmV0dXJuIGtsaW5lRGYKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgaW5pdGxvZygpCiAgICBwYXNzCiAgICAjICAgIGh5bGlzdCA9IGdldEhZTGlzdCgpCiAgICAjICAgICBwcmludChyZWFkQ3VycmVudFRUTVBFKCcwMDI1MDgnKSkKCiAgICAjILLiytR1cGRhdGVLbGluZUVYVERhdGEKICAgIHRzX2NvZGUgPSAnMDAwNjUxJwogICAgc3RhcnREYXRlID0gJzIwMTYtMDEtMDEnCiAgICAjIHVwZGF0ZUtsaW5lRVhURGF0YSh0c19jb2RlLCBzdGFydERhdGUpCgoKZGVmIHJlYWRUYWJsZUZpZWxkcyh0YWJsZSk6CiAgICBzcWwgPSAoZidzZWxlY3QgY29sdW1uX25hbWUgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucycKICAgICAgICAgICBmJyB3aGVyZSB0YWJsZV9uYW1lPQ==</text>
      </register>
      <register name="5" type="4">
        <text encoding="base64">IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiCkNyZWF0ZWQgb24gVGh1IE1hciAxMCAyMToxMTo1MSAyMDE2CgpAYXV0aG9yOiB3aG84NzM2CiIiIgoKaW1wb3J0IG9zCmltcG9ydCBsb2dnaW5nCiMgaW1wb3J0IHVybGxpYjIKIyBpbXBvcnQgc29ja2V0CmltcG9ydCBkYXRldGltZSBhcyBkdApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQojIGltcG9ydCBDb25maWdQYXJzZXIKIyBpbXBvcnQgcmUKIyBpbXBvcnQgdGltZQoKIyBpbXBvcnQgc3lzCgoKIyBmcm9tIGx4bWwgaW1wb3J0IGV0cmVlCiMgaW1wb3J0IGx4bWwKIyBpbXBvcnQgdHVzaGFyZSBhcyB0cyAgIyBAVW5yZXNvbHZlZEltcG9ydAppbXBvcnQgcGFuZGFzIGFzIHBkCiMgZnJvbSBwYW5kYXMuY29tcGF0IGltcG9ydCBTdHJpbmdJTwpmcm9tIGlvIGltcG9ydCBTdHJpbmdJTwojIGZyb20gc3FsYWxjaGVteSBpbXBvcnQgY3JlYXRlX2VuZ2luZQpmcm9tIHNxbGFsY2hlbXkgaW1wb3J0IE1ldGFEYXRhLCBUYWJsZSwgQ29sdW1uCmZyb20gc3FsYWxjaGVteSBpbXBvcnQgREFURSwgREVDSU1BTCwgU3RyaW5nCmZyb20gc3FsYWxjaGVteS5leHQuZGVjbGFyYXRpdmUgaW1wb3J0IGRlY2xhcmF0aXZlX2Jhc2UKIyBmcm9tIHNxbGFsY2hlbXkub3JtIGltcG9ydCBzZXNzaW9ubWFrZXIsIHNjb3BlZF9zZXNzaW9uCiMgaW1wb3J0IHNxbGFsY2hlbXkKZnJvbSBwYW5kYXMuY29yZS5mcmFtZSBpbXBvcnQgRGF0YUZyYW1lCiMgZnJvbSB0dXNoYXJlLnN0b2NrIGltcG9ydCBjb25zIGFzIGN0CmltcG9ydCB4bHJkCmltcG9ydCB0dXNoYXJlIGFzIHRzCgppbXBvcnQgZGF0YXRyYW5zCmltcG9ydCBpbml0c3FsCmZyb20gc3FsY29ubiBpbXBvcnQgU1FMQ29ubgojIGZyb20gbWlzYyBpbXBvcnQgZmlsZW5hbWVHdWJlbiwgZmlsZW5hbWVMaXJ1biwgZmlsZW5hbWVHdXpoaQpmcm9tIG1pc2MgaW1wb3J0IGZpbGVuYW1lTGlydW4sIGZpbGVuYW1lR3V6aGkKZnJvbSBpbml0bG9nIGltcG9ydCBpbml0bG9nCgojIGZyb20gZG93bmxvYWQgaW1wb3J0IGRvd25IWUZpbGUKCiMgZnJvbSBib2tlaC5zYW1wbGVkYXRhIGltcG9ydCBzdG9ja3MKCgpzcWxjb25uID0gU1FMQ29ubigpCmVuZ2luZSA9IHNxbGNvbm4uZW5naW5lClNlc3Npb24gPSBzcWxjb25uLlNlc3Npb24KCgpkZWYgd3JpdGVIWVRvU1FMKGZpbGVuYW1lKToKICAgICIiIiC0087EvP7W0LbByKHQ0NK10+u5ycaxttTTprnYz7WyotC0yOvK/b7dv+IKICAgICIiIgogICAgZmlsZW5hbWUgPSBvcy5wYXRoLmpvaW4oJy4vZGF0YScsIGZpbGVuYW1lKQogICAgeGxzRmlsZSA9IHhscmQub3Blbl93b3JrYm9vayhmaWxlbmFtZSwgZW5jb2Rpbmdfb3ZlcnJpZGU9ImNwMTI1MiIpCiAgICB0YWJsZSA9IHhsc0ZpbGUuc2hlZXRzKClbNF0KICAgIHRzX2NvZGVMaXN0ID0gdGFibGUuY29sX3ZhbHVlcygwKVsxOl0KICAgIHRzX2NvZGVMaXN0ID0gW2kgKyAoJy5TSCcgaWYgaVswXSA9PSAnNicgZWxzZSAnLlNaJykgZm9yIGkgaW4gdHNfY29kZUxpc3RdCiAgICBoeUlETGlzdCA9IHRhYmxlLmNvbF92YWx1ZXMoOClbMTpdCiAgICBoeURmID0gcGQuRGF0YUZyYW1lKHsndHNfY29kZSc6IHRzX2NvZGVMaXN0LCAnY2xhc3NpZnlfY29kZSc6IGh5SURMaXN0fSkKICAgIGVuZ2luZS5leGVjdXRlKCdUUlVOQ0FURSBUQUJMRSBjbGFzc2lmeV9tZW1iZXInKQogICAgd3JpdGVTUUwoaHlEZiwgJ2NsYXNzaWZ5X21lbWJlcicpCgoKZGVmIHdyaXRlSFlOYW1lVG9TUUwoZmlsZW5hbWUpOgogICAgZmlsZW5hbWUgPSBvcy5wYXRoLmpvaW4oJy4vZGF0YScsIGZpbGVuYW1lKQogICAgeGxzRmlsZSA9IHhscmQub3Blbl93b3JrYm9vayhmaWxlbmFtZSwgZW5jb2Rpbmdfb3ZlcnJpZGU9ImNwMTI1MiIpCiAgICB0YWJsZSA9IHhsc0ZpbGUuc2hlZXRzKClbMF0KICAgIGh5SURMaXN0ID0gdGFibGUuY29sX3ZhbHVlcygwKVsxOl0KICAgIGh5TmFtZUxpc3QgPSB0YWJsZS5jb2xfdmFsdWVzKDEpWzE6XQogICAgaHlMZXZlbExpc3QgPSBbbGVuKGh5SUQpIC8gMiBmb3IgaHlJRCBpbiBoeUlETGlzdF0KICAgIGh5TGV2ZWwxSURMaXN0ID0gW2h5SURbOjJdIGZvciBoeUlEIGluIGh5SURMaXN0XQogICAgaHlMZXZlbDJJRExpc3QgPSBbaHlJRFs6NF0gZm9yIGh5SUQgaW4gaHlJRExpc3RdCiAgICBoeUxldmVsM0lETGlzdCA9IFtoeUlEWzo2XSBmb3IgaHlJRCBpbiBoeUlETGlzdF0KICAgIGh5TmFtZURmID0gcGQuRGF0YUZyYW1lKHsnY29kZSc6IGh5SURMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogaHlOYW1lTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwnOiBoeUxldmVsTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwxaWQnOiBoeUxldmVsMUlETGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwyaWQnOiBoeUxldmVsMklETGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV2ZWwzaWQnOiBoeUxldmVsM0lETGlzdH0pCiAgICBlbmdpbmUuZXhlY3V0ZSgnVFJVTkNBVEUgVEFCTEUgY2xhc3NpZnknKQogICAgd3JpdGVTUUwoaHlOYW1lRGYsICdjbGFzc2lmeScpCgoKZGVmIHdyaXRlR3ViZW5Ub1NRTChndWJlbkRmLCByZXBsYWNlPUZhbHNlKToKICAgICIiIrWluPa5ycaxucmxvsr9vt3QtMjryv2+3b/iCiAgICA6cGFyYW0gcmVwbGFjZToKICAgIDp0eXBlIGd1YmVuRGY6IERhdGFGcmFtZQogICAgIiIiCiAgICB0YWJsZW5hbWUgPSAnZ3ViZW4nCiAgICAjIGxhc3RVcGRhdGUgPSBndWJlblVwZGF0ZURhdGUodHNfY29kZSkKICAgICMgZ3ViZW5EZiA9IGd1YmVuRGZbcGQuVGltZXN0YW1wKGd1YmVuRGYuZGF0ZSkgPiBsYXN0VXBkYXRlXQogICAgIyBndWJlbkRmID0gZ3ViZW5EZltndWJlbkRmLmRhdGUgPiBsYXN0VXBkYXRlXQogICAgaWYgZ3ViZW5EZi5lbXB0eToKICAgICAgICByZXR1cm4gTm9uZQogICAgaWYgcmVwbGFjZToKICAgICAgICBmb3IgaW5kZXgsIHJvdyBpbiBndWJlbkRmLml0ZXJyb3dzKCk6CiAgICAgICAgICAgIHNxbCA9ICgoJ3JlcGxhY2UgaW50byBndWJlbicKICAgICAgICAgICAgICAgICAgICAnKHRzX2NvZGUsIGRhdGUsIHRvdGFsc2hhcmVzKSAnCiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlcygiJXMiLCAiJXMiLCAlcyknKQogICAgICAgICAgICAgICAgICAgJSAocm93Wyd0c19jb2RlJ10sIHJvd1snZGF0ZSddLCByb3dbJ3RvdGFsc2hhcmVzJ10pKQogICAgICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICBlbHNlOgogICAgICAgIHJldHVybiB3cml0ZVNRTChndWJlbkRmLCB0YWJsZW5hbWUpCgoKZGVmIHdyaXRlR3V6aGlUb1NRTCh0c19jb2RlLCBkYXRhKToKICAgICIiIs/C1Ni1pbj2ucnGsbnA1rXK/b7d0LTI68r9vt2/4iIiIgogICAgZ3V6aGlEaWN0ID0gZGF0YXRyYW5zLnRyYW5zR3V6aGlEYXRhVG9EaWN0KGRhdGEpCiAgICBpZiBndXpoaURpY3QgaXMgTm9uZToKICAgICAgICByZXR1cm4gVHJ1ZQogICAgIyBwcmludCBndXpoaURpY3QKICAgICMgICAgIGd1emhpRGYgPSBEYXRhRnJhbWUoZ3V6aGlEaWN0LCBpbmRleD1bMF0pCiAgICAjICAgICB3cml0ZVNRTFVwZGF0ZShndXpoaURpY3QsICdndXpoaScpCiAgICAjICAgICBwcmludCBndXpoaURpY3QKICAgIHRhYmxlbmFtZSA9ICdndXpoaScKICAgIGlmICdwZWcnIGluIGxpc3QoZ3V6aGlEaWN0LmtleXMoKSk6CiAgICAgICAgcGVnID0gZ3V6aGlEaWN0WydwZWcnXQogICAgZWxzZToKICAgICAgICBwZWcgPSAnbnVsbCcKICAgIGlmICduZXh0MVllYXJQRScgaW4gbGlzdChndXpoaURpY3Qua2V5cygpKToKICAgICAgICBuZXh0MVllYXJQRSA9IGd1emhpRGljdFsnbmV4dDFZZWFyUEUnXQogICAgZWxzZToKICAgICAgICBuZXh0MVllYXJQRSA9ICdudWxsJwogICAgaWYgJ25leHQyWWVhclBFJyBpbiBsaXN0KGd1emhpRGljdC5rZXlzKCkpOgogICAgICAgIG5leHQyWWVhclBFID0gZ3V6aGlEaWN0WyduZXh0MlllYXJQRSddCiAgICBlbHNlOgogICAgICAgIG5leHQyWWVhclBFID0gJ251bGwnCiAgICBpZiAnbmV4dDNZZWFyUEUnIGluIGxpc3QoZ3V6aGlEaWN0LmtleXMoKSk6CiAgICAgICAgbmV4dDNZZWFyUEUgPSBndXpoaURpY3RbJ25leHQzWWVhclBFJ10KICAgIGVsc2U6CiAgICAgICAgbmV4dDNZZWFyUEUgPSAnbnVsbCcKICAgIHNxbCA9ICgoJ3JlcGxhY2UgaW50byAlKHRhYmxlbmFtZSlzJwogICAgICAgICAgICAnKHRzX2NvZGUsIHBlZywgbmV4dDFZZWFyUEUsIG5leHQyWWVhclBFLCBuZXh0M1llYXJQRSkgJwogICAgICAgICAgICAndmFsdWVzKCIlKHRzX2NvZGUpcyIsICUocGVnKXMsICcKICAgICAgICAgICAgJyUobmV4dDFZZWFyUEUpcywgJShuZXh0MlllYXJQRSlzLCAnCiAgICAgICAgICAgICclKG5leHQzWWVhclBFKXMpOycpICUgbG9jYWxzKCkpCiAgICByZXR1cm4gZW5naW5lLmV4ZWN1dGUoc3FsKQoKCiMgZGVmIHdyaXRlS2xpbmUodHNfY29kZSwgZGYsIGluc2VydFR5cGU9J0lHTk9SRScpOgojICAgICAiIiK5ycaxS8/fwPrKt9C0yOvK/b7dv+IiIiIKIyAgICAgdGFibGVOYW1lID0gdGFibGVuYW1lS2xpbmUodHNfY29kZSkKIyAgICAgaWYgbm90IGluaXRzcWwuZXhpc3RUYWJsZSh0YWJsZU5hbWUpOgojICAgICAgICAgaW5pdHNxbC5jcmVhdGVLbGluZVRhYmxlKHRzX2NvZGUpCiMgICAgIHJldHVybiB3cml0ZVNRTChkZiwgdGFibGVOYW1lLCBpbnNlcnRUeXBlKQoKCmRlZiBsaXJ1bkZpbGVUb0xpc3QodHNfY29kZSwgZGF0ZSk6CiAgICBmaWxlTmFtZSA9IGZpbGVuYW1lTGlydW4odHNfY29kZSkKICAgIGxpcnVuRmlsZSA9IG9wZW4oZmlsZU5hbWUsICdyJykKICAgIGxpcnVuRGF0YSA9IGxpcnVuRmlsZS5yZWFkbGluZXMoKQoKICAgIGRhdGVMaXN0ID0gbGlydW5EYXRhWzBdLnNwbGl0KCkKICAgIGxvZ2dpbmcuZGVidWcocmVwcihkYXRlTGlzdCkpCgogICAgdHJ5OgogICAgICAgIGluZGV4ID0gZGF0ZUxpc3QuaW5kZXgoZGF0ZSkKICAgICAgICBsb2dnaW5nLmRlYnVnKHJlcHIoaW5kZXgpKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgcmV0dXJuIFtdCgogICAgcHJvZml0c0xpc3QgPSBsaXJ1bkRhdGFbNDJdLnNwbGl0KCkKICAgICMgaWYgcHJvZml0c0xpc3RbMF0uZGVjb2RlKCdnYmsnKSAhPSAnuenK9NPaxLi5q8u+y/nT0NXftcS+u8D7yPMnOgogICAgaWYgcHJvZml0c0xpc3RbMF0gIT0gJ7npyvTT2sS4uavLvsv509DV37XEvrvA+8jzJzoKICAgICAgICBsb2dnaW5nLmVycm9yKCdsaXJ1bkZpbGVUb0xpc3QgcmVhZCAlcyBlcnJvcicsIHRzX2NvZGUpCiAgICAgICAgcmV0dXJuIFtdCgogICAgcmV0dXJuIHsndHNfY29kZSc6IHRzX2NvZGUsCiAgICAgICAgICAgICdkYXRlJzogZGF0ZSwKICAgICAgICAgICAgJ3Byb2ZpdHMnOiBwcm9maXRzTGlzdFtpbmRleF0sCiAgICAgICAgICAgICdyZXBvcnRkYXRlJzogZGF0ZUxpc3RbaW5kZXhdCiAgICAgICAgICAgIH0KCgojIGRlZiB0YWJsZW5hbWVLbGluZSh0c19jb2RlKToKIyAgICAgcmV0dXJuICdrbGluZSVzJyAlIHRzX2NvZGUKCgpkZWYgbG9hZENoaWd1KCk6CiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUgZnJvbSBjaGlndTsnCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4gW2lbMF0gZm9yIGkgaW4gcmVzdWx0LmZldGNoYWxsKCldCgoKZGVmIGRyb3BUYWJsZSh0YWJsZU5hbWUpOgogICAgZW5naW5lLmV4ZWN1dGUoJ0RST1AgVEFCTEUgJXMnICUgdGFibGVOYW1lKQoKCmRlZiBkcm9wTkFEYXRhKCk6CiAgICAiIiIgx+Wz/UvP3828yv2+3dbQvbvS18G/zqowtcTK/b7dCiAgICAiIiIKICAgICMgc3RvY2tMaXN0ID0gcmVhZHRzX2NvZGVzRnJvbVNRTCgpCiAgICAjICAgICBzdG9ja0xpc3QgPSBbJzAwMjEwMCddCiAgICAjIGZvciB0c19jb2RlIGluIHN0b2NrTGlzdDoKICAgICMgdGFibGVuYW1lID0gdGFibGVuYW1lS2xpbmUodHNfY29kZSkKICAgICMgc3FsID0gJ2RlbGV0ZSBmcm9tICUodGFibGVuYW1lKXMgd2hlcmUgdm9sdW1lPTA7JyAlIGxvY2FscygpCiAgICBzcWwgPSAnZGVsZXRlIGZyb20ga2xpbmVzdG9jayB3aGVyZSB2b2x1bWU9MDsnCiAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCgoKZGVmIGdldExvd1BFU3RvY2tMaXN0KG1heFBFPTQwKToKICAgICIiItGhyKHWuLaot7bOp1BFtcS5ycaxCiAgICBtYXhQRTog1+6081BFCiAgICAiIiIKICAgIHNxbCA9ICdzZWxlY3QgdHNfY29kZSwgcGUgZnJvbSBzdG9ja2xpc3Qgd2hlcmUgcGUgPiAwIGFuZCBwZSA8PSAlcycgJSBtYXhQRQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHJldHVybiBkZgoKCmRlZiBnZXRBbGxNYXJrZXRQRVVwZGF0ZURhdGUoKToKICAgICIiIgogICAgyKvK0LOhUEW4/NDCyNXG2gogICAgOnJldHVybjoKICAgICIiIgogICAgc3FsID0gJ3NlbGVjdCBtYXgodHJhZGVfZGF0ZSkgZnJvbSBpbmRleF9wZSB3aGVyZSB0c19jb2RlPSJhbGwiOycKICAgIHJldHVybiBfZ2V0TGFzdFVwZGF0ZShzcWwpCgoKZGVmIGdldEluZGV4UEVVcGRhdGVEYXRlKCk6CiAgICAiIiIKICAgINa4yv1QRbj80MLI1cbaLLWxx7C99tPQyc/WpDE4MNa4yv21xFBF1rXQ6MrWtq+8xsvjCiAgICA6cmV0dXJuOgogICAgIiIiCiAgICBzcWwgPSBmJ3NlbGVjdCBtYXgodHJhZGVfZGF0ZSkgZnJvbSBpbmRleF9wZSB3aGVyZSB0c19jb2RlPSIwMDAwMTAuU0giOycKICAgIHJldHVybiBfZ2V0TGFzdFVwZGF0ZShzcWwpCgoKZGVmIGdldEd1emhpKHRzX2NvZGUpOgogICAgc3FsID0gZidzZWxlY3QgKiBmcm9tIGd1emhpcmVzdWx0IHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSIgbGltaXQgMScKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHJldHVybiByZXN1bHQuZmV0Y2hvbmUoKQoKCmRlZiByZWFkU3RvY2tMaXN0KCk6CiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUsIG5hbWUgZnJvbSBzdG9ja19iYXNpYycKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICByZXR1cm4gZGYKCgpkZWYgd3JpdGVTUUwoZGF0YTogcGQuRGF0YUZyYW1lLCB0YWJsZU5hbWU6IHN0ciwgcmVwbGFjZT1GYWxzZSk6CiAgICAiIiIKICAgIERhdGFmcmFtZbjxyr3K/b7d0LTI63RhYmxlTmFtZda4tqi1xLHt1tAKICAgIHJlcGxhY2U6IFRydWWjrNb3vPzW2Li0yrG4/NDCyv2+3aOsIEZhbHNlLCC69sLU1ti4tNb3vPwsIMSsyM/OqkZhbHNlCiAgICAiIiIKICAgIGlmIGRhdGEuZW1wdHk6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIGxvZ2dpbmcuZGVidWcoJ3N0YXJ0IHdyaXRlU1FMICVzJyAlIHRhYmxlTmFtZSkKICAgIGlmIG5vdCBpbml0c3FsLmV4aXN0VGFibGUodGFibGVOYW1lKToKICAgICAgICBsb2dnaW5nLmVycm9yKCdub3QgZXhpc3QgJXMnICUgdGFibGVOYW1lKQogICAgICAgIHJldHVybiBGYWxzZQogICAgZGF0YSA9IGRhdGEud2hlcmUocGQubm90bnVsbChkYXRhKSwgTm9uZSkKICAgIGRhdGEgPSBkYXRhdHJhbnMudHJhbnNEZlRvTGlzdChkYXRhKQoKICAgIEJhc2UgPSBkZWNsYXJhdGl2ZV9iYXNlKCkKCiAgICBjbGFzcyBNeVRhYmxlKEJhc2UpOgogICAgICAgIF9fdGFibGVfXyA9IFRhYmxlKGYne3RhYmxlTmFtZX0nLCBCYXNlLm1ldGFkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9sb2FkPVRydWUsIGF1dG9sb2FkX3dpdGg9ZW5naW5lKQoKICAgIHRyeToKICAgICAgICBzZXNzaW9uID0gU2Vzc2lvbigpCiAgICAgICAgbWV0YWRhdGEgPSBNZXRhRGF0YShiaW5kPWVuZ2luZSkKICAgICAgICBpZiByZXBsYWNlOgogICAgICAgICAgICBmb3IgZCBpbiBkYXRhOgogICAgICAgICAgICAgICAgIyBmb3IgaW5kZXgsIHJvdyBpbiBkYXRhLml0ZXJyb3dzKCk6CiAgICAgICAgICAgICAgICAjICAgICB0bXBEaWN0ID0gcm93LnRvX2RpY3QoKQogICAgICAgICAgICAgICAgIyAgICAgdG1wRGljdFtkYXRhLmluZGV4Lm5hbWVdID0gaW5kZXgKICAgICAgICAgICAgICAgICMgZCA9IHtrZXk6IGdldGF0dHIocm93LCBrZXkpIGZvciBrZXkgaW4gcm93LmtleXMoKX0KICAgICAgICAgICAgICAgICMgZm9yIGtleSBpbiByb3cua2V5cygpOgogICAgICAgICAgICAgICAgIyAgICAgcHJpbnQoJ2tleSB0eXBlOicsIHR5cGUoa2V5KSkKICAgICAgICAgICAgICAgICMgICAgIHByaW50KCd2YWx1ZSB0eXBlOicsIHR5cGUoZ2V0YXR0cihyb3csIGtleSkpKQogICAgICAgICAgICAgICAgIyAgICAgcHJpbnQoJ3ZhbHVlOicsIGdldGF0dHIocm93LCBrZXkpKQogICAgICAgICAgICAgICAgIyB0YWJsZSA9IE15VGFibGUoKip0bXBEaWN0KQogICAgICAgICAgICAgICAgdGFibGUgPSBNeVRhYmxlKCoqZCkKICAgICAgICAgICAgICAgIHNlc3Npb24ubWVyZ2UodGFibGUpCiAgICAgICAgICAgIHNlc3Npb24uY29tbWl0KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBteXRhYmxlID0gVGFibGUodGFibGVOYW1lLCBtZXRhZGF0YSwgYXV0b2xvYWQ9VHJ1ZSkKICAgICAgICAgICAgc2Vzc2lvbi5leGVjdXRlKG15dGFibGUuaW5zZXJ0KCkucHJlZml4X3dpdGgoJ0lHTk9SRScpLCBkYXRhKQogICAgICAgIHNlc3Npb24uY29tbWl0KCkKICAgICAgICBzZXNzaW9uLmNsb3NlKCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChlKQogICAgICAgIHByaW50KCfQtLHtyqew3KO6ICVzJyAlIHRhYmxlTmFtZSkKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgoKZGVmIHdyaXRldHNfY29kZUxpc3RUb0ZpbGUodHNfY29kZUxpc3QsIGZpbGVuYW1lKToKICAgIHN0b2NrRmlsZSA9IG9wZW4oZmlsZW5hbWUsICd3YicpCiAgICBzdG9ja0ZpbGUud3JpdGUoYnl0ZXMoJ1xuJykuam9pbih0c19jb2RlTGlzdCkpCiAgICBzdG9ja0ZpbGUuY2xvc2UoKQoKCmRlZiByZWFkR3V6aGlGaWxlVG9EaWN0KHRzX2NvZGUpOgogICAgIiIiCiAgICC2wcihucDWtc7EvP4KICAgIDpydHlwZTogZGljdAogICAgOnR5cGUgdHNfY29kZTogc3RyaW5nCiAgICA6cmV0dXJuIGRpY3QKICAgICIiIgogICAgZ3V6aGlGaWxlbmFtZSA9IGZpbGVuYW1lR3V6aGkodHNfY29kZSkKICAgIGd1emhpRmlsZSA9IG9wZW4oZ3V6aGlGaWxlbmFtZSkKICAgIGd1emhpRGF0YSA9IGd1emhpRmlsZS5yZWFkKCkKICAgIGd1emhpRmlsZS5jbG9zZSgpCiAgICByZXR1cm4gZGF0YXRyYW5zLnRyYW5zR3V6aGlEYXRhVG9EaWN0KGd1emhpRGF0YSkKCgpkZWYgcmVhZEd1emhpRmlsZXNUb0RmKHN0b2NrTGlzdCk6CiAgICBndXpoaUxpc3QgPSBbXQogICAgZm9yIHRzX2NvZGUgaW4gc3RvY2tMaXN0OgogICAgICAgIGxvZ2dpbmcuZGVidWcoJ3JlYWRHdXpoaUZpbGVzVG9EZjogJXMnLCB0c19jb2RlKQogICAgICAgIGd1emhpZGF0YSA9IHJlYWRHdXpoaUZpbGVUb0RpY3QodHNfY29kZSkKICAgICAgICBpZiBndXpoaWRhdGEgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGd1emhpTGlzdC5hcHBlbmQoZ3V6aGlkYXRhKQogICAgcmV0dXJuIERhdGFGcmFtZShndXpoaUxpc3QpCgoKZGVmIHJlYWRHdXpoaVNRTFRvRGYoc3RvY2tMaXN0KToKICAgIGxpc3RTdHIgPSAnLCcuam9pbihzdG9ja0xpc3QpCiAgICBzcWwgPSAnc2VsZWN0ICogZnJvbSBndXpoaSB3aGVyZSB0c19jb2RlIGluICglcyk7JyAlIGxpc3RTdHIKICAgICMgICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICBwcmludChkZikKICAgIHJldHVybiBkZgoKCmRlZiByZWFkVmFsdWF0aW9uU2FtbWFyeSgpOgogICAgIiIitsHIobnJxrHGwLfW0MXPoiIiIgogICAgIyC7+bG+0MXPogogICAgc3FsID0gKCdzZWxlY3QgdHNfY29kZSwgbmFtZSwgZGF0ZSwgcGYsIHBlLCBwZWcsIHBlMjAwLCBwZTEwMDAgJwogICAgICAgICAgICdmcm9tIHZhbHVhdGlvbiB3aGVyZSBkYXRlID0gKHNlbGVjdCBtYXgoZGF0ZSkgZnJvbSB2YWx1YXRpb24pICcKICAgICAgICAgICAnb3JkZXIgYnkgcGYgZGVzYzsnKQogICAgc3RvY2tzID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCgogICAgIyDQ0NK1w/uzxgogICAgc3FsID0gKCdzZWxlY3QgYS50c19jb2RlLCBhLm5hbWUsIGMubmFtZSBhcyBjbGFzc2lmeV9uYW1lJwogICAgICAgICAgICcgZnJvbSBzdG9ja19iYXNpYyBhLCBjbGFzc2lmeV9tZW1iZXIgYiwgY2xhc3NpZnkgYycKICAgICAgICAgICAnIHdoZXJlIGEudHNfY29kZT1iLnRzX2NvZGUgYW5kIGIuY2xhc3NpZnlfY29kZT1jLmNvZGUnCiAgICAgICAgICAgJyBvcmRlciBieSB0c19jb2RlOycpCiAgICBoeW5hbWUgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHN0b2NrcyA9IHBkLm1lcmdlKHN0b2NrcywgaHluYW1lLCBob3c9J2xlZnQnKQoKICAgICMgssbO8da4seoKICAgIHNxbCA9ICgnc2VsZWN0IGEudHNfY29kZSwgYS5lbmRfZGF0ZSBhcyBmaW5hX2RhdGUsJwogICAgICAgICAgICcgYS5ncm9zc3Byb2ZpdF9tYXJnaW4sIGEucm9lJwogICAgICAgICAgICcgZnJvbSBmaW5hX2luZGljYXRvciBhLCcKICAgICAgICAgICAnIChzZWxlY3QgdHNfY29kZSwgbWF4KGVuZF9kYXRlKSBhcyBmaW5hX2RhdGUgJwogICAgICAgICAgICcgZnJvbSBmaW5hX2luZGljYXRvciBncm91cCBieSB0c19jb2RlKSBiJwogICAgICAgICAgICcgd2hlcmUgYS50c19jb2RlID0gYi50c19jb2RlIGFuZCBhLmVuZF9kYXRlID0gYi5maW5hX2RhdGU7JykKICAgIGZpbmFzdGF0ID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICBmaW5hc3RhdFsnZ3Jvc3Nwcm9maXRfbWFyZ2luJ10gPSBmaW5hc3RhdC5ncm9zc3Byb2ZpdF9tYXJnaW4ucm91bmQoMikKICAgIGZpbmFzdGF0Wydyb2UnXSA9IGZpbmFzdGF0LnJvZS5yb3VuZCgyKQogICAgZmluYXN0YXQgPSBmaW5hc3RhdFtbJ3RzX2NvZGUnLCAnZmluYV9kYXRlJywgJ2dyb3NzcHJvZml0X21hcmdpbicsICdyb2UnXV0KICAgIHN0b2NrcyA9IHBkLm1lcmdlKHN0b2NrcywgZmluYXN0YXQsIGhvdz0nbGVmdCcpCgogICAgIyDDv8jV1rix6gogICAgIyBzcWwgPSAoJ3NlbGVjdCBhLnRzX2NvZGUsIGEuZHZfdHRtLCcKICAgICMgICAgICAgICcgZnJvbSBkYWlseV9iYXNpYyBhLCcKICAgICMgICAgICAgICcgKHNlbGVjdCB0c19jb2RlLCBtYXgoZGF0ZSkgYXMgZGFpbHlfZGF0ZScKICAgICMgICAgICAgICcgZnJvbSBkYWlseV9iYXNpYyBncm91cCBieSB0c19jb2RlKSBiJwogICAgIyAgICAgICAgJyB3aGVyZSBhLnRzX2NvZGU9Yi50c19jb2RlIGFuZCBhLmRhdGUgPSBiLmRhaWx5X2RhdGUnKQogICAgc3FsID0gIiIic2VsZWN0IGEudHNfY29kZSwgYS5kdl90dG0gZnJvbSBkYWlseV9iYXNpYyBhLAogICAgICAgICAgICAoc2VsZWN0IHRzX2NvZGUsIG1heCh0cmFkZV9kYXRlKSBhcyBkYWlseV9kYXRlIAogICAgICAgICAgICBmcm9tIGRhaWx5X2Jhc2ljIGdyb3VwIGJ5IHRzX2NvZGUpIGIKICAgICAgICAgICAgd2hlcmUgYS50c19jb2RlID0gYi50c19jb2RlIGFuZCBhLnRyYWRlX2RhdGUgPSBiLmRhaWx5X2RhdGU7IiIiCgogICAgZGFpbHkgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHN0b2NrcyA9IHBkLm1lcmdlKHN0b2NrcywgZGFpbHksIGhvdz0nbGVmdCcpCgogICAgIyDFxdDyCiAgICBzdG9ja3Muc29ydF92YWx1ZXMoYnk9WydwZicsICdwZSddLCBhc2NlbmRpbmc9KEZhbHNlLCBUcnVlKSwgaW5wbGFjZT1UcnVlKQogICAgcmV0dXJuIHN0b2NrcwoKCmRlZiByZWFkVmFsdWF0aW9uKHRzX2NvZGUpOgogICAgc3FsID0gKGYnc2VsZWN0ICogZnJvbSB2YWx1YXRpb24gd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IicKICAgICAgICAgICAnb3JkZXIgYnkgZGF0ZSBkZXNjIGxpbWl0IDEnKQogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5mZXRjaG9uZSgpCiAgICByZXR1cm4gcmVzdWx0CgoKIyBkZWYgZG93bmxvYWRLbGluZSh0c19jb2RlLCBzdGFydERhdGU9Tm9uZSwgZW5kRGF0ZT1Ob25lKToKIyAgICAgaWYgc3RhcnREYXRlIGlzIE5vbmU6ICAjIHN0YXJ0RGF0Zc6qv9XKscihucnGsdfuuvO4/NDCyNXG2gojICAgICAgICAgc3RhcnREYXRlID0gZ2V0S2xpbmVVcGRhdGVEYXRlKHRzX2NvZGUpCiMgICAgICAgICBzdGFydERhdGUgPSBzdGFydERhdGUuc3RyZnRpbWUoJyVZLSVtLSVkJykKIyAgICAgaWYgZW5kRGF0ZSBpcyBOb25lOgojICAgICAgICAgZW5kRGF0ZSA9IGR0LmRhdGV0aW1lLnRvZGF5KCkuc3RyZnRpbWUoJyVZLSVtLSVkJykKIyAgICAgcmV0dXJuIGRvd25sb2FkS2xpbmVUdVNoYXJlKHRzX2NvZGUsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSkKIwojCiMgZGVmIGRvd25sb2FkS2xpbmVUdVNoYXJlKHRzX2NvZGUsCiMgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZT0nMTk5MC0wMS0wMScsIGVuZERhdGU9JzIwOTktMTItMzEnKToKIyAgICAgdHJ5OgojICAgICAgICAgaGlzdERmID0gdHMuZ2V0X2hpc3RfZGF0YSh0c19jb2RlLCBzdGFydERhdGUsIGVuZERhdGUpCiMgICAgIGV4Y2VwdCBJT0Vycm9yOgojICAgICAgICAgcmV0dXJuIE5vbmUKIyAgICAgcmV0dXJuIGhpc3REZgoKCmRlZiByZWFkTGlydW5MaXN0KGRhdGUpOgogICAgc3FsID0gJ3NlbGVjdCAqIGZyb20gbGlydW4gd2hlcmUgYGRhdGVgID49ICVzIGFuZCBgZGF0ZWAgPD0gJXMnICUgKAogICAgICAgIHN0cihkYXRlIC0gMTApLCBzdHIoZGF0ZSkpCiAgICBkZiA9IHBkLnJlYWRfc3FsKHNxbCwgZW5naW5lKQogICAgcmV0dXJuIGRmCgoKZGVmIHJlYWRQRVJhdGUodHNfY29kZSk6CiAgICAiIiIgtsHIodK71ru5ycaxtcRQRcD6yrfLrsa9o6wKICAgICMgt7W72FBFMjAwo6wgUEUxMDAwwb249sr91rWjrLfWsfC0+rHtuMO5ycaxtbHHsFBF1rXU2rn9yKUyMDChojEwMDC49r270tfI1dbQtcTLrsa9CiAgICAiIiIKICAgIHNxbCA9IChmJ3NlbGVjdCByb3VuZChwZTIwMCwgMikgcGUyMDAsIHJvdW5kKHBlMTAwMCwgMikgcGUxMDAwJwogICAgICAgICAgIGYnIGZyb20gZ3V6aGlyZXN1bHQgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IiBsaW1pdCAxJykKICAgIHByaW50KHNxbCkKICAgICMg1ri2qMjVxtqjqLqso6nHsM7eVFRNwPvI88r9vt21xKOssunRr8bwyrzI1cbayei2qM6qc3RhcnREYXRlCiAgICAjILfx1PLJ6LaozqrX7r380ru0zsr9vt3I1cbaCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpLmZldGNob25lKCkKICAgIGlmIHJlc3VsdCBpcyBOb25lOgogICAgICAgIHJldHVybiBOb25lLCBOb25lCiAgICBlbHNlOgogICAgICAgIHJldHVybiByZXN1bHQKCgpkZWYgcmVhZFRUTVByb2ZpdHModHNfY29kZTogc3RyLCBzdGFydERhdGU9Tm9uZSwgZW5kRGF0ZT1Ob25lKToKICAgICIiIsih1ri2qLnJxrHSu7bOyNW85LXEVFRNwPvI86Osc3RhcnREYXRltbHI1c7eyv2+3cqxo6zIodaux7DX7r380ru0zsr9vt0KICAgIFBhcmFtZXRlcnMKICAgIC0tLS0tLS0tCiAgICB0c19jb2RlOiBzdHIgucnGsbT6wusgIGUuZzogJzYwMDUxOScKICAgIHN0YXJ0RGF0ZTogZGF0ZSDG8Mq8yNXG2iAgZS5nOiAnMTk5MC0wMS0wMScKICAgIGVuZERhdGU6IGRhdGUgvdjWucjVxtogIGUuZzogJzE5OTAtMDEtMDEnCgogICAgUmV0dXJuCiAgICAtLS0tLS0tLQogICAgRGF0YUZyYW1lOiC3tbvYRGF0YUZyYW1luPHKvVRUTcD7yPMKICAgICIiIgogICAgIyDWuLaoyNXG2qOouqyjqcew1+69/NK7tM7A+8jzseS2r8jVxtoKICAgIGlmIHN0YXJ0RGF0ZSBpcyBOb25lOgogICAgICAgIHJldHVybgogICAgc3RhcnREYXRlU3RyID0gc3RhcnREYXRlLnN0cmZ0aW1lKCclWS0lbS0lZCcpCiAgICBzcWwgPSAoJ3NlbGVjdCBtYXgocmVwb3J0ZGF0ZSkgZnJvbSB0dG1saXJ1biAnCiAgICAgICAgICAgJ3doZXJlIHRzX2NvZGU9IiUodHNfY29kZSlzIiAnCiAgICAgICAgICAgJ2FuZCByZXBvcnRkYXRlPD0iJShzdGFydERhdGVTdHIpcyInICUgbG9jYWxzKCkpCiAgICAjICAgICBwcmludCBzcWwKICAgICMg1ri2qMjVxtqjqLqso6nHsM7eVFRNwPvI88r9vt21xKOssunRr8bwyrzI1cbayei2qM6qc3RhcnREYXRlCiAgICAjILfx1PLJ6LaozqrX7r380ru0zsr9vt3I1cbaCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpLmZldGNob25lKCkKICAgIGlmIHJlc3VsdFswXSBpcyBOb25lOgogICAgICAgIFRUTUxpcnVuU3RhcnREYXRlID0gc3RhcnREYXRlU3RyCiAgICBlbHNlOgogICAgICAgIFRUTUxpcnVuU3RhcnREYXRlID0gcmVzdWx0WzBdCiAgICBzcWwgPSAoJ3NlbGVjdCAqIGZyb20gdHRtbGlydW4gd2hlcmUgdHNfY29kZSA9ICIlKHRzX2NvZGUpcyIgJwogICAgICAgICAgICdhbmQgYHJlcG9ydGRhdGVgID49ICIlKFRUTUxpcnVuU3RhcnREYXRlKXMiICcKICAgICAgICAgICAnb3JkZXIgYnkgZGF0ZScgJSBsb2NhbHMoKSkKICAgICMgICAgIHByaW50IHNxbAogICAgaWYgZW5kRGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBzcWwgKz0gJyBhbmQgYGRhdGVgIDw9ICIlcyInICUgZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKCiAgICAjINa4tqjI1cbao6i6rKOpx7C05tTaucmxvrHktq/K/b7dtcSjrNbYyei12jG0zrHktq/I1cbazqpzdGFydERhdGWjrAogICAgIyC89cnZuPzQwktsaW5lse3W0NfcytDWtcv50Oi8xsvjwb8KICAgIGlmIFRUTUxpcnVuU3RhcnREYXRlICE9IHN0YXJ0RGF0ZVN0cjoKICAgICAgICBkZi5sb2NbZGYucmVwb3J0ZGF0ZSA9PSBUVE1MaXJ1blN0YXJ0RGF0ZSwgJ3JlcG9ydGRhdGUnXSA9IHN0YXJ0RGF0ZQogICAgcmV0dXJuIGRmCgoKZGVmIHJlYWRMYXN0VFRNUHJvZml0KHRzX2NvZGUsIGxpbWl0PTEsIGRhdGU9Tm9uZSk6CiAgICAiIiLIoda4tqi5ycax1+69/Ly4xtpUVE3A+8jzCiAgICBQYXJhbWV0ZXJzCiAgICAtLS0tLS0tLQogICAgdHNfY29kZTogc3RyILnJxrG0+sLrICBlLmc6ICc2MDA1MTkuU0gnCiAgICBkYXRlOiBzdHIgsunRr73Y1rnI1cbao6wgZS5nOiAnMjAxOTEyMzEnCiAgICBsaW1pdDogyKHX7r38xtrK/bXEyv2+3QoKICAgIFJldHVybgogICAgLS0tLS0tLS0KICAgIGxpc3Q6ILe1u9hsaXN0uPHKvVRUTcD7yPMKICAgICIiIgogICAgc3FsID0gZidzZWxlY3QgaW5jcmF0ZSBmcm9tIHR0bXByb2ZpdHMgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IiAnCiAgICBpZiBkYXRlIGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSBmJyBhbmQgcmVwb3J0ZGF0ZTw9IntkYXRlfSInCiAgICBzcWwgKz0gZicgb3JkZXIgYnkgZGF0ZSBkZXNjIGxpbWl0IHtsaW1pdH0nCiAgICAjICAgICBwcmludCBzcWwKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkuZmV0Y2hhbGwoKQogICAgcmVzdWx0ID0gW2lbMF0gZm9yIGkgaW4gcmV2ZXJzZWQocmVzdWx0KV0KICAgIHJldHVybiByZXN1bHQKCgpkZWYgcmVhZExhc3RUVE1Qcm9maXRzKHN0b2NrTGlzdCwgbGltaXQ9MSwgZGF0ZT1Ob25lKToKICAgICIiIsihucnGscHQse3X7r38vLjG2lRUTcD7yPMKICAgIFBhcmFtZXRlcnMKICAgIC0tLS0tLS0tCiAgICA6cGFyYW0gc3RvY2tMaXN0OiBzdHIgucnGsbT6wusgIGUuZzogWyc2MDA1MTkuU0gnLCAnMDAyNTE4LlNaJ10KICAgIDpwYXJhbSBsaW1pdDogyKHX7r38xtrK/bXEyv2+3QogICAgOnBhcmFtIGRhdGU6CgogICAgUmV0dXJuCiAgICAtLS0tLS0tLQogICAgRGF0YUZyYW1lOiC3tbvYRGF0YUZyYW1luPHKvVRUTcD7yPMKICAgICIiIgogICAgVFRNTGlydW5MaXN0ID0gW10KICAgIGZvciB0c19jb2RlIGluIHN0b2NrTGlzdDoKICAgICAgICBUVE1MaXJ1biA9IHJlYWRMYXN0VFRNUHJvZml0KHRzX2NvZGUsIGxpbWl0LCBkYXRlKQogICAgICAgIFRUTUxpcnVuLmluc2VydCgwLCB0c19jb2RlKQogICAgICAgIFRUTUxpcnVuTGlzdC5hcHBlbmQoVFRNTGlydW4pCgogICAgIyAgICAgcHJpbnQgVFRNTGlydW5MaXN0CiAgICBjb2x1bW5zID0gWydpbmNyYXRlJXMnICUgaSBmb3IgaSBpbiByYW5nZShsaW1pdCldCiAgICBjb2x1bW5zLmluc2VydCgwLCAndHNfY29kZScpCiAgICBUVE1MaXJ1bkRmID0gRGF0YUZyYW1lKFRUTUxpcnVuTGlzdCwgY29sdW1ucz1jb2x1bW5zKQogICAgcmV0dXJuIFRUTUxpcnVuRGYKCgpkZWYgcmVhZFRUTVByb2ZpdHNGb3JEYXRlKGRhdGUpOgogICAgIiIitNNUVE1MaXJ1brHttsHIocSzvL62yLnJxrFUVE3A+8jzCiAgICBkYXRlOiC48cq9WVlZWVEsIDTOu8TqKzHOu7y+tsijrMD7yPPL+cr0yNXG2gogICAgcmV0dXJuOiC3tbvYRGF0YUZyYW1luPHKvVRUTcD7yPMKICAgICIiIgogICAgc3FsID0gKCdzZWxlY3QgKiBmcm9tIHR0bWxpcnVuIHdoZXJlICcKICAgICAgICAgICAnYGRhdGVgID0gIiUoZGF0ZSlzIicgJSBsb2NhbHMoKSkKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICByZXR1cm4gZGYKCgpkZWYgcmVhZExpcnVuRm9yRGF0ZShkYXRlKToKICAgICIiIrTTTGlydW6x7bbByKHSu8baucnGscD7yPMKICAgIGRhdGU6ILjxyr1ZWVlZUSwgNM67xOorMc67vL62yKOswPvI88v5yvTI1cbaCiAgICByZXR1cm46ILe1u9hEYXRhRnJhbWW48cq9wPvI8wogICAgIiIiCiAgICBzcWwgPSAoJ3NlbGVjdCAqIGZyb20gbGlydW4gd2hlcmUgJwogICAgICAgICAgICdgZGF0ZWAgPSAiJShkYXRlKXMiJyAlIGxvY2FscygpKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHJldHVybiBkZgoKCmRlZiByZWFkVFRNUEUodHNfY29kZSk6CiAgICAiIiIgtsHIocSz1qe5ycaxtcTIq7K/VFRNUEUKICAgICIiIgogICAgc3FsID0gKCdzZWxlY3QgZGF0ZSwgdHRtcGUgZnJvbSBrbGluZXN0b2NrIHdoZXJlIHRzX2NvZGU9IiUodHNfY29kZSlzIjsnCiAgICAgICAgICAgJSBsb2NhbHMoKSkKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICByZXR1cm4gZGYKCgpkZWYgcmVhZExhc3RUVE1QRSh0c19jb2RlLCBkYXRlPU5vbmUpOgogICAgIiIitsHIoda4tqi5ycax1ri2qMjVxtq1xFRUTVBFo6zErMjPzqrX7rrz0rvM7LXEVFRNUEUKCiAgICA6cGFyYW0gdHNfY29kZTogc3RyCiAgICAgICAgucnGsbT6wuujrCDI5yc2MDAwMTMnCiAgICA6cGFyYW0gZGF0ZTogc3RyCiAgICAgICAg1ri2qMjVxtqjrCC48cq9J1lZWVltbWRkJwogICAgOnJldHVybjoKICAgICIiIgogICAgc3FsID0gKGYnc2VsZWN0IHBlX3R0bSBmcm9tIGRhaWx5X2Jhc2ljIHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSIgJwogICAgICAgICAgIGYnYW5kIHRyYWRlX2RhdGU9KHNlbGVjdCBtYXgoYHRyYWRlX2RhdGVgKSBmcm9tIGRhaWx5X2Jhc2ljIHdoZXJlICcKICAgICAgICAgICBmJ3RzX2NvZGU9Int0c19jb2RlfSInKQogICAgaWYgZGF0ZSBpcyBOb25lOgogICAgICAgIHNxbCArPSAnKScKICAgIGVsc2U6CiAgICAgICAgc3FsICs9IGYnIGFuZCB0cmFkZV9kYXRlPD17ZGF0ZX0pJwoKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkuZmV0Y2hvbmUoKQogICAgaWYgcmVzdWx0IGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHJlc3VsdFswXQoKCmRlZiByZWFkQ2FsKHN0YXJ0RGF0ZT1Ob25lLCBlbmREYXRlPU5vbmUsIGV4Y2hhbmdlPSdTU0UnLCBpc19vcGVuPTEpOgogICAgc3FsID0gKGYnc2VsZWN0IGNhbF9kYXRlIHRyYWRlX2RhdGUgZnJvbSB0cmFkZV9jYWwnCiAgICAgICAgICAgZicgd2hlcmUgZXhjaGFuZ2U9IntleGNoYW5nZX0iJykKICAgIGlmIHN0YXJ0RGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBzcWwgKz0gZicgYW5kIGNhbF9kYXRlPj0ie3N0YXJ0RGF0ZX0iJwogICAgaWYgZW5kRGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBzcWwgKz0gZicgYW5kIGNhbF9kYXRlPD0ie2VuZERhdGV9IicKICAgIHNxbCArPSBmJyBhbmQgaXNfb3Blbj17aXNfb3Blbn0nCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpLmZldGNoYWxsKCkKICAgIHJldHVybiBbZFswXS5zdHJmdGltZSgnJVklbSVkJykgZm9yIGQgaW4gcmVzdWx0XQoKCmRlZiByZWFkTGFzdFRUTVBFcyhzdG9ja0xpc3QsIHRyYWRlX2RhdGU9Tm9uZSk6CiAgICAiIiIKICAgILbByKFzdG9ja0xpc3TW0LnJxrHWuLaoyNXG2rXEVFRNUEUsIMSsyM/IodfuuvPSu8zstcRUVE1QRQogICAgOnBhcmFtIHN0b2NrTGlzdDogbGlzdAogICAgICAgILnJxrHB0LHtCiAgICA6cGFyYW0gdHJhZGVfZGF0ZTogc3RyCiAgICAgICAgJ1lZWVltbWRkJ7jxyr21xMjVxtoKICAgIDpyZXR1cm46CiAgICAiIiIKICAgIHNxbCA9ICdzZWxlY3QgdHNfY29kZSwgcGVfdHRtIHBlIGZyb20gZGFpbHlfYmFzaWMgd2hlcmUgdHJhZGVfZGF0ZT0nCiAgICBpZiB0cmFkZV9kYXRlIGlzIE5vbmU6CiAgICAgICAgc3FsICs9ICcoc2VsZWN0IG1heCh0cmFkZV9kYXRlKSBmcm9tIGRhaWx5X2Jhc2ljKScKICAgIGVsc2U6CiAgICAgICAgc3FsICs9IGYnInt0cmFkZV9kYXRlfSInCgogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5mZXRjaGFsbCgpCiAgICBpZiBub3QgcmVzdWx0OgogICAgICAgIGxvZ2dpbmcud2FybmluZyhmJ8ixydl7dHJhZGVfZGF0ZX3Dv8jV1rix6icpCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICAjIHRzX2NvZGVzLCB0dG1wZXMgPSB6aXAoKnJlc3VsdCkKICAgICMgZGYgPSBwZC5EYXRhRnJhbWUoeyd0c19jb2RlJzogdHNfY29kZXMsICdwZSc6IHR0bXBlc30pCiAgICBkZiA9IGRmLmxvY1tkZlsndHNfY29kZSddLmlzaW4oc3RvY2tMaXN0KV0KICAgIGRmID0gZGYuZHJvcG5hKCkKICAgIHJldHVybiBkZgoKCiMgZGVmIGFsdGVyS2xpbmUoKToKIyAgICAgc3FsID0gJ3Nob3cgdGFibGVzIGxpa2UgJXMnCiMgICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCwgJ2tsaW5lJScpCiMgICAgIHJlc3VsdCA9IHJlc3VsdC5mZXRjaGFsbCgpCiMKIyAgICAgZm9yIGkgaW4gcmVzdWx0OgojICAgICAgICAgdGFibGVuYW1lID0gaVswXQojICAgICAgICAgc3FsID0gJ2NhbGwgc3RvY2tkYXRhLmFsdGVya2xpbmUoJXMpJwojICAgICAgICAgdHJ5OgojICAgICAgICAgICAgIGVuZ2luZS5leGVjdXRlKHNxbCwgdGFibGVuYW1lKQojICAgICAgICAgICAgICMgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZldGNoYWxsKCkKIyAgICAgICAgICAgICBwcmludCh0YWJsZW5hbWUpCiMgICAgICAgICBleGNlcHQgc3FsYWxjaGVteS5leGMuT3BlcmF0aW9uYWxFcnJvciBhcyBlOgojICAgICAgICAgICAgIHByaW50KGUpCiMgICAgIHJldHVybgoKCmRlZiBjYWxBbGxUVE1MaXJ1bihkYXRlLCBpbmNyZW1lbnRVcGRhdGU9VHJ1ZSk6CiAgICAiIiK8xsvjyKuyv7nJxrGxvsbaVFRNwPvI87Ki0LTI61RUTUxpcnVuse0KICAgIGRhdGU6ILjxyr1ZWVlZUaOsIDTOu8TqKzHOu7y+tsgKICAgIGluY3JlbWVudFVwZGF0ZTogVHJ1ZSwg1PbBv7j80MKjrCBGYWxzZSwguLK4x9LR09DK/b7dtcS4/NDCt73KvQogICAgIyC8xsvjuavKvaO6IFRUTcD7yPMgPSCxvsbawPvI8yArIMnPxOq12svEvL62yMD7yPMgLSDJz8TqzazG2sD7yPMKICAgICMgvMbL49StwO2julRUTcD7yPPOqtaux7DBrND4y8S49ry+tsjA+8jz1q66zQogICAgIyCxvsbawPvI87D8uqy98cTq0tTAtLL6yfrL+dPQwPvI86Osyc/E6rXay8S8vrbIwPvI8yC89cnPxOrNrMbawPvI886qyc/E6s2sxtq689K7uPa8vrbI1sHE6sSpwPvI8wogICAgIyDBvdXfz+C807y0zqpUVE3A+8jzCiAgICAjIL7ZwP2jujIwMTbE6jG8vrbIVFRNwPvI8yA9IDIwMTbE6jG8vrbIwPvI8yArIDIwMTXE6jS8vrbIwPvI8yAgLSAyMDE1xOoxvL62yMD7yPMKICAgICMgyv2+3c3q1fu1xMfpv/bPwrXIzazT2qO6CiAgICAjIDIwMTXE6jK8vrbIwPvI8yArIDIwMTXE6jO8vrbIwPvI8yArIDIwMTXE6jS8vrbIwPvI8yArIDIwMTbE6jG8vrbIwPvI8wogICAgIyC1sbG+xtrOqrXaNLy+tsjKsaOsvMbL47mryr3I1NPQ0KejrCDI56O6CiAgICAjIDIwMTbE6jS8vrbIVFRNwPvI8yA9IDIwMTbE6jS8vrbIwPvI8yArIDIwMTXE6jS8vrbIwPvI8yAgLSAyMDE1xOo0vL62yMD7yPMKICAgICOhobWrzqrM4bjf0KfCyqOstbGxvsbazqq12jS8vrbIyrGjrFRUTcD7yPM9sb7G2sD7yPOjrCDWsb3Tt7W72MD7yPPK/b7dCiAgICAiIiIKICAgIGxpcnVuQ3VyID0gcmVhZExpcnVuRm9yRGF0ZShkYXRlKQogICAgaWYgKGRhdGUgJSAxMCkgPT0gNDoKICAgICAgICBUVE1MaXJ1biA9IGxpcnVuQ3VyLmNvcHkoKQogICAgICAgIFRUTUxpcnVuLmNvbHVtbnMgPSBbJ3RzX2NvZGUnLCAnZGF0ZScsICd0dG1wcm9maXRzJywgJ3JlcG9ydGRhdGUnXQogICAgIyAgICAgICAgIHJldHVybiB3cml0ZVNRTChUVE1MaXJ1biwgJ3R0bWxpcnVuJykKICAgIGVsc2U6CiAgICAgICAgaWYgaW5jcmVtZW50VXBkYXRlOgogICAgICAgICAgICBUVE1MaXJ1bkN1ciA9IHJlYWRUVE1Qcm9maXRzRm9yRGF0ZShkYXRlKQogICAgICAgICAgICBsaXJ1bkN1ciA9IGxpcnVuQ3VyW35saXJ1bkN1ci50c19jb2RlLmlzaW4oVFRNTGlydW5DdXIudHNfY29kZSldCgogICAgICAgICMgyc/E6rXay8S8vrbIwPvI8ywgvfbIocD7yPPX1rbOsqK4/MP7zqpwcm9maXRzMQogICAgICAgIGxhc3RZZWFyRW5kID0gKGRhdGUgLy8gMTAgLSAxKSAqIDEwICsgNAogICAgICAgIGxpcnVuTGFzdFllYXJFbmQgPSByZWFkTGlydW5Gb3JEYXRlKGxhc3RZZWFyRW5kKQogICAgICAgIHByaW50KCgnbGlydW5MYXN0WWVhckVuZC5oZWFkKCk6JywgbGlydW5MYXN0WWVhckVuZC5oZWFkKCkpKQogICAgICAgIGxpcnVuTGFzdFllYXJFbmQgPSBsaXJ1bkxhc3RZZWFyRW5kW1sndHNfY29kZScsICdwcm9maXRzJ11dCiAgICAgICAgbGlydW5MYXN0WWVhckVuZC5jb2x1bW5zID0gWyd0c19jb2RlJywgJ3Byb2ZpdHMxJ10KCiAgICAgICAgIyDJz8TqzazG2sD7yPMsIL32yKHA+8jz19a2zrKiuPzD+86qcHJvZml0czIKICAgICAgICBsYXN0WWVhclF1YXJ0ZXIgPSBkYXRlIC0gMTAKICAgICAgICBsaXJ1bkxhc3RRYXJ0ZXIgPSByZWFkTGlydW5Gb3JEYXRlKGxhc3RZZWFyUXVhcnRlcikKICAgICAgICBsaXJ1bkxhc3RRYXJ0ZXIgPSBsaXJ1bkxhc3RRYXJ0ZXJbWyd0c19jb2RlJywgJ3Byb2ZpdHMnXV0KICAgICAgICBsaXJ1bkxhc3RRYXJ0ZXIuY29sdW1ucyA9IFsndHNfY29kZScsICdwcm9maXRzMiddCgogICAgICAgICMg1fu6z9LUyc/I/bj2vL62yMD7yPOjrHRzX2NvZGXOqtX7us+8/AogICAgICAgIFRUTUxpcnVuID0gcGQubWVyZ2UobGlydW5DdXIsIGxpcnVuTGFzdFllYXJFbmQsIG9uPSd0c19jb2RlJykKICAgICAgICBUVE1MaXJ1biA9IHBkLm1lcmdlKFRUTUxpcnVuLCBsaXJ1bkxhc3RRYXJ0ZXIsIG9uPSd0c19jb2RlJykKCiAgICAgICAgVFRNTGlydW5bJ3R0bXByb2ZpdHMnXSA9IChUVE1MaXJ1bi5wcm9maXRzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRUTUxpcnVuLnByb2ZpdHMxIC0gVFRNTGlydW4ucHJvZml0czIpCiAgICAgICAgVFRNTGlydW4gPSBUVE1MaXJ1bltbJ3RzX2NvZGUnLCAnZGF0ZScsICd0dG1wcm9maXRzJywgJ3JlcG9ydGRhdGUnXV0KICAgIHByaW50KCdUVE1MaXJ1bi5oZWFkKCk6XG4nLCBUVE1MaXJ1bi5oZWFkKCkpCgogICAgIyDQtMjrdHRtbGlydW6x7brzo6zW2MvjVFRNwPvI89T2s6TCygogICAgaWYgaW5jcmVtZW50VXBkYXRlOgogICAgICAgIHdyaXRlU1FMKFRUTUxpcnVuLCAndHRtbGlydW4nKQogICAgZWxzZToKICAgICAgICByZXBsYWNlVFRNTGlucnVuKFRUTUxpcnVuKQoKICAgIHJldHVybiBjYWxUVE1MaXJ1bkluY1JhdGUoZGF0ZSkKCgpkZWYgcmVwbGFjZVRUTUxpbnJ1bihkZik6CiAgICAiIiIKICAgINLUzOa7u7e9yr24/NDCVFRNwPvI86Os08PT2sX6wb/Q3tX9VFRNwPvI87HttO3O8wogICAgOnBhcmFtIGRmOgogICAgOnJldHVybjoKICAgICIiIgogICAgZm9yIGluZGV4LCByb3cgaW4gZGYuaXRlcnJvd3MoKToKICAgICAgICAjIHByaW50KHJvd1sndHNfY29kZSddKQogICAgICAgIHRzX2NvZGUgPSByb3dbJ3RzX2NvZGUnXQogICAgICAgIF9kYXRlID0gcm93WydkYXRlJ10KICAgICAgICB0dG1wcm9maXRzID0gcm93Wyd0dG1wcm9maXRzJ10KICAgICAgICByZXBvcnRkYXRlID0gcm93WydyZXBvcnRkYXRlJ10KICAgICAgICBzcWwgPSAoJ3JlcGxhY2UgaW50byB0dG1saXJ1bih0c19jb2RlLCBkYXRlLCB0dG1wcm9maXRzLCByZXBvcnRkYXRlKSAnCiAgICAgICAgICAgICAgICd2YWx1ZXMoIiUodHNfY29kZSlzIiwgJShfZGF0ZSlzLCAnCiAgICAgICAgICAgICAgICclKHR0bXByb2ZpdHMpcywgIiUocmVwb3J0ZGF0ZSlzIik7JyAlIGxvY2FscygpKQogICAgICAgIHByaW50KHNxbCkKICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCgoKZGVmIGNhbFRUTUxpcnVuSW5jUmF0ZShkYXRlLCBpbmNyZW1lbnRVcGRhdGU9VHJ1ZSk6CiAgICAiIiK8xsvjyKuyv7nJxrGxvsbaVFRNwPvI89T2s6TCyrKi0LTI61RUTUxpcnVuse0KICAgIGRhdGU6ILjxyr1ZWVlZUaOsIDTOu8TqKzHOu7y+tsgKICAgICMgvMbL47mryr2juiBUVE3A+8jz1PazpMLKPSAosb7G2lRUTcD7yPMgIC0gyc/E6s2sxtpUVE3A+8jzKSAvIFRUTcD7yPMgKiAxMDAKICAgICIiIgogICAgVFRNTGlydW5DdXIgPSByZWFkVFRNUHJvZml0c0ZvckRhdGUoZGF0ZSkKICAgIGlmIGluY3JlbWVudFVwZGF0ZToKICAgICAgICBUVE1MaXJ1bkN1ciA9IFRUTUxpcnVuQ3VyW1RUTUxpcnVuQ3VyLmluY3JhdGUuaXNudWxsKCldCiAgICBUVE1MaXJ1bkxhc3RZZWFyID0gcmVhZFRUTVByb2ZpdHNGb3JEYXRlKGRhdGUgLSAxMCkKICAgIFRUTUxpcnVuTGFzdFllYXIgPSBUVE1MaXJ1bkxhc3RZZWFyW1sndHNfY29kZScsICd0dG1wcm9maXRzJ11dCiAgICBUVE1MaXJ1bkxhc3RZZWFyLmNvbHVtbnMgPSBbJ3RzX2NvZGUnLCAndHRtcHJvZml0czEnXQogICAgVFRNTGlydW5MYXN0WWVhciA9IFRUTUxpcnVuTGFzdFllYXJbVFRNTGlydW5MYXN0WWVhci50dG1wcm9maXRzMSAhPSAwXQoKICAgICMg1fu6z9LUyc8yuPax7aOsdHNfY29kZc6q1fu6z7z8CiAgICBUVE1MaXJ1bkN1ciA9IHBkLm1lcmdlKFRUTUxpcnVuQ3VyLCBUVE1MaXJ1bkxhc3RZZWFyLCBvbj0ndHNfY29kZScpCgogICAgVFRNTGlydW5DdXJbJ2luY3JhdGUnXSA9ICgoVFRNTGlydW5DdXIudHRtcHJvZml0cyAtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUVE1MaXJ1bkN1ci50dG1wcm9maXRzMSkgLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYnMoVFRNTGlydW5DdXIudHRtcHJvZml0czEpICogMTAwKQogICAgZm9yIGkgaW4gVFRNTGlydW5DdXIudmFsdWVzOgogICAgICAgIHRzX2NvZGUgPSBpWzBdCiAgICAgICAgaW5jUmF0ZSA9IHJvdW5kKGlbNF0sIDIpCiAgICAgICAgc3FsID0gKCd1cGRhdGUgdHRtbGlydW4gJwogICAgICAgICAgICAgICAnc2V0IGluY3JhdGUgPSAlKGluY1JhdGUpcycKICAgICAgICAgICAgICAgJyB3aGVyZSB0c19jb2RlID0gIiUodHNfY29kZSlzIicKICAgICAgICAgICAgICAgJ2FuZCBgZGF0ZWAgPSAlKGRhdGUpcycgJSBsb2NhbHMoKSkKICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4KCgpkZWYgY2FsVFRNTGlydW4oc3RvY2tkZiwgZGF0ZSk6CiAgICBsaXJ1bjEgPSBzdG9ja2RmW3N0b2NrZGYuZGF0ZSA9PSBkYXRlIC0gMTBdICAjIMnPxOrNrMbawPvI8wogICAgbGlydW4yID0gc3RvY2tkZltzdG9ja2RmLmRhdGUgPT0gKGRhdGUgLyAxMCAtIDEpICogMTAgKyA0XSAgIyDJz8TqxKnA+8jzCiAgICBsaXJ1bjMgPSBzdG9ja2RmW3N0b2NrZGYuZGF0ZSA9PSBkYXRlXSAgIyCxvsbawPvI8wogICAgaWYgbGlydW4xLmVtcHR5IG9yIGxpcnVuMi5lbXB0eSBvciBsaXJ1bjMuZW1wdHk6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGxpcnVuMSA9IGxpcnVuMS5pYXRbMCwgMl0KICAgIGxpcnVuMiA9IGxpcnVuMi5pYXRbMCwgMl0KICAgIHRzX2NvZGUgPSBsaXJ1bjMuaWF0WzAsIDBdCiAgICByZXBvcnRkYXRlID0gbGlydW4zLmlhdFswLCAzXQogICAgbGlydW4zID0gbGlydW4zLmlhdFswLCAyXQogICAgIyBUVE3A+8jzID0gsb7G2sD7yPOjq8nPxOrEqcD7yPMtyc/E6s2sxtrA+8jzCiAgICBsaXJ1biA9IGxpcnVuMyArIGxpcnVuMiAtIGxpcnVuMQogICAgcmV0dXJuIFt0c19jb2RlLCBkYXRlLCBsaXJ1biwgcmVwb3J0ZGF0ZV0KCgpkZWYgZ2V0TGlydW5VcGRhdGVFbmRRdWFydGVyKCk6CiAgICBjdXJRdWFydGVyID0gZGF0YXRyYW5zLnRyYW5zRGF0ZVRvUXVhcnRlcihkdC5kYXRldGltZS5ub3coKSkKICAgIHJldHVybiBkYXRhdHJhbnMucXVhcnRlclN1YihjdXJRdWFydGVyLCAxKQoKCmRlZiBfZ2V0TGFzdFVwZGF0ZShzcWwpOgogICAgIiIiCiAgICBQYXJhbWV0ZXJzCiAgICAtLS0tLS0tLQogICAgc3FsOiBzdHIgINa4tqiy6dGvuPzQwsjVxtq1xFNRTNPvvuQKICAgIGUuZzogJ3NlbGVjdCB0dG1wZSBmcm9tIGxhc3R1cGRhdGUgd2hlcmUgdHNfY29kZT0iMDAyNzk2IicKCiAgICBSZXR1cm4KICAgIC0tLS0tLS0tCiAgICBkYXRldGltZaO6ZGF0ZXRpbWUKICAgICIiIgogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5maXJzdCgpCiAgICBpZiByZXN1bHQgaXMgTm9uZToKICAgICAgICByZXR1cm4gZHQuZGF0ZXRpbWUuc3RycHRpbWUoJzE5OTAtMDEtMDEnLCAnJVktJW0tJWQnKS5kYXRlKCkKCiAgICBsYXN0VXBkYXRlRGF0ZSA9IHJlc3VsdFswXQogICAgaWYgbGFzdFVwZGF0ZURhdGUgaXMgTm9uZToKICAgICAgICByZXR1cm4gZHQuZGF0ZXRpbWUuc3RycHRpbWUoJzE5OTAtMDEtMDEnLCAnJVktJW0tJWQnKS5kYXRlKCkKCiAgICAjIGxhc3RVcGRhdGVEYXRlID0gbGFzdFVwZGF0ZURhdGVbMF0KICAgIGlmIGlzaW5zdGFuY2UobGFzdFVwZGF0ZURhdGUsIGR0LmRhdGUpOgogICAgICAgIHJldHVybiBsYXN0VXBkYXRlRGF0ZQogICAgICAgICMgcmV0dXJuIGxhc3RVcGRhdGVEYXRlICsgZHQudGltZWRlbHRhKGRheXM9MSkKICAgIGVsc2U6CiAgICAgICAgbG9nZ2luZy5kZWJ1ZygnbGFzdFVwZGF0ZURhdGUgdHlwZSBpczogJXMnLCB0eXBlKGxhc3RVcGRhdGVEYXRlKSkKICAgICAgICByZXR1cm4gZHQuZGF0ZXRpbWUuc3RycHRpbWUobGFzdFVwZGF0ZURhdGUsICclWS0lbS0lZCcpLmRhdGUoKQoKCmRlZiB3cml0ZUNoaWd1KHN0b2NrTGlzdCk6CiAgICBlbmdpbmUuZXhlY3V0ZSgnVFJVTkNBVEUgVEFCTEUgY2hpZ3UnKQogICAgZm9yIHRzX2NvZGUgaW4gc3RvY2tMaXN0OgogICAgICAgIHNxbCA9ICgnaW5zZXJ0IGludG8gY2hpZ3UgKGB0c19jb2RlYCkgJwogICAgICAgICAgICAgICAndmFsdWVzICgiJXMiKTsnKSAlIHRzX2NvZGUKICAgICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCgoKIyBkZWYgc2F2ZVBFTGlydW5JbmNyZWFzZShzdGFydERhdGU9JzIwMDctMDEtMDEnLCBlbmREYXRlPU5vbmUpOgojICAgICBzdG9ja0xpc3QgPSByZWFkU3RvY2tMaXN0RnJvbVNRTCgpCiMgICAgIGZvciB0c19jb2RlLCBzdG9ja05hbWVfIGluIHN0b2NrTGlzdDoKIyAgICAgICAgICMgICAgIHNxbCA9ICh1J2luc2VydCBpZ25vcmUgaW50byBwZWxpcnVuaW5jcmVhc2UodHNfY29kZSwgZGF0ZSwgcGUpICcKIyAgICAgICAgICMgICAgICAgICAgICB1J3NlbGVjdCAiJSh0c19jb2RlKXMiLCBkYXRlLCB0dG1wZSAnCiMgICAgICAgICAjICAgICAgICAgICAgdSdmcm9tIGtsaW5lc3RvY2slKHRzX2NvZGUpcyAnCiMgICAgICAgICAjICAgICAgICAgICAgdSd3aGVyZSBgZGF0ZWA+PSIlKHN0YXJ0RGF0ZSlzIjsnKSAlIGxvY2FscygpCiMgICAgICAgICAjCiMgICAgICAgICAjICAgICBlbmdpbmUuZXhlY3V0ZShzcWwpCiMKIyAgICAgICAgIFRUTUxpcnVuRGYgPSByZWFkVFRNUHJvZml0cyh0c19jb2RlLCBzdGFydERhdGUpCiMgICAgICAgICBUVE1MaXJ1bkRmID0gVFRNTGlydW5EZi5kcm9wbmEoKS5yZXNldF9pbmRleChkcm9wPVRydWUpCiMgICAgICAgICBrbGluZVRhYmxlbmFtZSA9ICdrbGluZXN0b2NrJwojICAgICAgICAgVFRNTGlydW5Db3VudCA9IGxlbihUVE1MaXJ1bkRmKQojICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoVFRNTGlydW5Db3VudCk6CiMgICAgICAgICAgICAgaW5jcmF0ZSA9IFRUTUxpcnVuRGZbJ2luY3JhdGUnXS5pbG9jW2ldCiMgICAgICAgICAgICAgc3RhcnREYXRlXyA9IFRUTUxpcnVuRGZbJ3JlcG9ydGRhdGUnXS5pbG9jW2ldCiMgICAgICAgICAgICAgdHJ5OgojICAgICAgICAgICAgICAgICBlbmREYXRlXyA9IFRUTUxpcnVuRGZbJ3JlcG9ydGRhdGUnXS5pbG9jW2kgKyAxXQojICAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgojICAgICAgICAgICAgICAgICBlbmREYXRlXyA9IE5vbmUKIwojICAgICAgICAgICAgIHNxbCA9ICgndXBkYXRlIHBlbGlydW5pbmNyZWFzZSAnCiMgICAgICAgICAgICAgICAgICAgICdzZXQgbGlydW5pbmNyZWFzZSA9ICUoaW5jcmF0ZSlzJwojICAgICAgICAgICAgICAgICAgICAnIHdoZXJlIHRzX2NvZGU9IiUodHNfY29kZSlzIicKIyAgICAgICAgICAgICAgICAgICAgJyBhbmQgZGF0ZT49IiUoc3RhcnREYXRlXylzIicpICUgbG9jYWxzKCkKIyAgICAgICAgICAgICBpZiBlbmREYXRlXyBpcyBub3QgTm9uZToKIyAgICAgICAgICAgICAgICAgc3FsICs9ICgnIGFuZCBkYXRlPCIlKGVuZERhdGVfKXMiJyAlIGxvY2FscygpKQojICAgICAgICAgICAgIGVuZ2luZS5leGVjdXRlKHNxbCkKIwojCiMgIyAgICAgICAgIGJyZWFrCgoKIyBkZWYgc2V0S2xpbmVUVE1QRUxhc3RVcGRhdGUodHNfY29kZSwgZW5kRGF0ZSk6CiMgICAgIHNxbCA9ICgnaW5zZXJ0IGludG8gbGFzdHVwZGF0ZSAoYHRzX2NvZGVgLCBgdHRtcGVgKSAnCiMgICAgICAgICAgICAndmFsdWVzICgiJSh0c19jb2RlKXMiLCAiJShlbmREYXRlKXMiKSAnCiMgICAgICAgICAgICAnb24gZHVwbGljYXRlIGtleSB1cGRhdGUgYHR0bXBlYD0iJShlbmREYXRlKXMiOycgJSBsb2NhbHMoKSkKIyAgICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKQojICAgICByZXR1cm4gcmVzdWx0CgoKZGVmIHNldEd1YmVuTGFzdFVwZGF0ZSh0c19jb2RlLCBlbmREYXRlPU5vbmUpOgogICAgc3FsID0gKCdpbnNlcnQgaW50byBsYXN0dXBkYXRlIChgdHNfY29kZWAsIGBndWJlbmApICcKICAgICAgICAgICAndmFsdWVzICgiJSh0c19jb2RlKXMiLCAiJShlbmREYXRlKXMiKSAnCiAgICAgICAgICAgJ29uIGR1cGxpY2F0ZSBrZXkgdXBkYXRlIGBndWJlbmA9IiUoZW5kRGF0ZSlzIjsnICUgbG9jYWxzKCkpCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGRlbF91cGRhdGVLbGluZVRUTVBFKHRzX2NvZGUsIHN0YXJ0RGF0ZSwgZW5kRGF0ZT1Ob25lKToKICAgICIiIgogICAgIyC4/NDCS2xpbmWx7VRUTVBFCiAgICAiIiIKICAgICMgICAgIGVuZ2luZSA9IGdldEVuZ2luZSgpCiAgICBpZiBzdGFydERhdGUgaXMgTm9uZToKICAgICAgICByZXR1cm4KCiAgICBzdGFydERhdGVTdHIgPSBzdGFydERhdGUuc3RyZnRpbWUoJyVZLSVtLSVkJykKICAgIGtsaW5lVGFibGVuYW1lID0gJ2tsaW5lc3RvY2snCiAgICBzcWwgPSAoJ3VwZGF0ZSAlKGtsaW5lVGFibGVuYW1lKXMgJwogICAgICAgICAgICdzZXQgdHRtcGUgPSByb3VuZCh0b3RhbG1hcmtldHZhbHVlIC8gdHRtcHJvZml0cywgMiknCiAgICAgICAgICAgJyB3aGVyZSB0c19jb2RlPSIlKHRzX2NvZGUpcyIgYW5kIGRhdGU+PSIlKHN0YXJ0RGF0ZVN0cilzIicKICAgICAgICAgICAlIGxvY2FscygpKQogICAgaWYgZW5kRGF0ZToKICAgICAgICBzcWwgKz0gJyBhbmQgZGF0ZSA8ICIlcyInICUgZW5kRGF0ZQogICAgc3FsICs9ICcgYW5kIHRvdGFsbWFya2V0dmFsdWUgaXMgbm90IG51bGwnCiAgICBzcWwgKz0gJyBhbmQgdHRtcHJvZml0cyBpcyBub3QgbnVsbCcKICAgIHVudXNlZFJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHNxbCA9IGYnc2VsZWN0IG1heChkYXRlKSBmcm9tIGtsaW5lc3RvY2sgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IicKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGVuZERhdGUgPSByZXN1bHQuZmV0Y2hvbmUoKVswXQogICAgaWYgZW5kRGF0ZSBpcyBub3QgTm9uZToKICAgICAgICBlbmREYXRlID0gZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgZWxzZToKICAgICAgICBlbmREYXRlID0gKGR0LmRhdGV0aW1lLnRvZGF5KCkgLSBkdC50aW1lZGVsdGEoZGF5cz0xKSkKICAgICAgICBlbmREYXRlID0gZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgcmV0dXJuIGVuZERhdGUKCgpkZWYgcmVhZEd1YmVuKHRzX2NvZGUsIHN0YXJ0RGF0ZT1Ob25lLCBlbmREYXRlPU5vbmUpOgogICAgIiIiyKHWuLaoucnGsdK7ts7I1bzktcS5ybG+seS2r8r9vt2jrHN0YXJ0RGF0ZbWxyNXO3sr9vt3KsaOsyKHWrsew1+69/NK7tM6x5Lavyv2+3QogICAgUGFyYW1ldGVycwogICAgLS0tLS0tLS0KICAgIHRzX2NvZGU6IHN0ciC5ycaxtPrC6yAgZS5nOiAnNjAwNTE5JwogICAgc3RhcnREYXRlOiBzdHIgxvDKvMjVxtogIGUuZzogJzE5OTAtMDEtMDEnCiAgICBlbmREYXRlOiBzdHIgvdjWucjVxtogIGUuZzogJzE5OTAtMDEtMDEnCgogICAgUmV0dXJuCiAgICAtLS0tLS0tLQogICAgRGF0YUZyYW1lCiAgICAgICAgZGF0ZTogucmxvrHktq/I1cbaCiAgICAgICAgdG90YWxzaGFyZXM6ILHktq+689fcucmxvgogICAgIiIiCiAgICAjINa4tqjI1cbao6i6rKOpx7DX7r380ru0zrnJsb6x5LavyNXG2gogICAgaWYgc3RhcnREYXRlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuCiAgICBzdGFydERhdGVTdHIgPSBzdGFydERhdGUuc3RyZnRpbWUoJyVZLSVtLSVkJykKICAgIHNxbCA9ICgnc2VsZWN0IG1heChkYXRlKSBmcm9tIGd1YmVuICcKICAgICAgICAgICAnd2hlcmUgdHNfY29kZT0iJSh0c19jb2RlKXMiICcKICAgICAgICAgICAnYW5kIGRhdGU8PSIlKHN0YXJ0RGF0ZVN0cilzIicgJSBsb2NhbHMoKSkKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGxhc3RVcGRhdGUgPSByZXN1bHQuZmV0Y2hvbmUoKVswXQoKICAgICMg1ri2qMjVxtqjqLqso6nHsM7eucmxvrHktq/K/b7dtcSjrLLp0a/G8Mq8yNXG2snotqjOqnN0YXJ0RGF0ZQogICAgIyC38dTyyei2qM6q1+69/NK7tM6x5LavyNXG2gogICAgaWYgbGFzdFVwZGF0ZSBpcyBOb25lOgogICAgICAgIGd1YmVuU3RhcnREYXRlID0gc3RhcnREYXRlU3RyCiAgICBlbHNlOgogICAgICAgIGd1YmVuU3RhcnREYXRlID0gbGFzdFVwZGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQoKICAgIHNxbCA9ICgnc2VsZWN0IGRhdGUsIHRvdGFsc2hhcmVzIGZyb20gZ3ViZW4gJwogICAgICAgICAgICd3aGVyZSB0c19jb2RlID0gIiUodHNfY29kZSlzIicKICAgICAgICAgICAnIGFuZCBgZGF0ZWA+PSIlKGd1YmVuU3RhcnREYXRlKXMiJyAlIGxvY2FscygpKQogICAgaWYgZW5kRGF0ZToKICAgICAgICBzcWwgKz0gJyBhbmQgYGRhdGVgIDw9ICIlcyInICUgZW5kRGF0ZS5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKCiAgICAjINa4tqjI1cbao6i6rKOpx7C05tTaucmxvrHktq/K/b7dtcSjrNbYyei12jG0zrHktq/I1cbazqpzdGFydERhdGWjrAogICAgIyC89cnZuPzQwktsaW5lse3W0NfcytDWtcv50Oi8xsvjwb8KICAgIGlmIGxhc3RVcGRhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgZ2JkYXRlID0gZGF0ZXRpbWUuc3RycHRpbWUoZ3ViZW5TdGFydERhdGUsICclWS0lbS0lZCcpLmRhdGUoKQogICAgICAgIGRmLmxvY1tkZlsnZGF0ZSddID09IGdiZGF0ZSwgJ2RhdGUnXSA9IHN0YXJ0RGF0ZVN0cgogICAgcmV0dXJuIGRmCgoKZGVmIHJlYWRHdWJlblVwZGF0ZUxpc3QoKToKICAgICIiIiCxyL3PucnGsdLRtOa5ybG+yv2+3dPr1+7QwrnJyv2+3aOssrvP4M2syrHU8rHtyr7Q6NKquPzQwrXEucnGsQogICAgIiIiCiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUsIHRvdGFscyBhcyB0b3RhbHNuZXcgZnJvbSBzdG9ja2xpc3Q7JwogICAgZGZOZXcgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKCiAgICAjICAgICBkZk5ldyA9IHRzLmdldF9zdG9ja19iYXNpY3MoKQogICAgIyAgICAgZGZOZXcgPSBkZk5ldy5yZXNldF9pbmRleCgpCiAgICAjICAgICBkZk5ldyA9IGRmTmV3W1snY29kZScsICd0b3RhbHMnXV0KICAgICMgICAgIGRmTmV3LmNvbHVtbnMgPSBbJ3RzX2NvZGUnLCAndG90YWxzbmV3J10KICAgIHNxbCA9ICgnU0VMRUNUIHRzX2NvZGUsIHRvdGFsc2hhcmVzIGFzIHRvdGFsc29sZCAnCiAgICAgICAgICAgJ0ZST00gKHNlbGVjdCAqIGZyb20gc3RvY2tkYXRhLmd1YmVuIG9yZGVyIGJ5IGRhdGUgZGVzYykgJwogICAgICAgICAgICdhcyB0YWJsZWEgZ3JvdXAgYnkgdHNfY29kZTsnKQogICAgZGZPbGQgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIGRmT2xkLnRvdGFsc29sZCA9IGRmT2xkLnRvdGFsc29sZCAvIDEwMDAwMDAwMAogICAgZGZPbGQgPSBkZk9sZC5yb3VuZCgyKQogICAgdXBkYXRlTGlzdCA9IHBkLm1lcmdlKGRmTmV3LCBkZk9sZCwgb249J3RzX2NvZGUnLCBob3c9J2xlZnQnKQogICAgdXBkYXRlTGlzdC5maWxsbmEoeyd0b3RhbHNvbGQnOiAwfSwgaW5wbGFjZT1UcnVlKQogICAgdXBkYXRlTGlzdCA9IHVwZGF0ZUxpc3RbYWJzKAogICAgICAgIHVwZGF0ZUxpc3QudG90YWxzbmV3IC0gdXBkYXRlTGlzdC50b3RhbHNvbGQpID4gMC4xXQogICAgcmV0dXJuIHVwZGF0ZUxpc3QudHNfY29kZQoKCmRlZiByZWFkQ2xvc2UodHNfY29kZSk6CiAgICBzcWwgPSAoJ3NlbGVjdCBkYXRlLCBjbG9zZSBmcm9tIGtsaW5lc3RvY2sgd2hlcmUgdHNfY29kZT0iJSh0c19jb2RlKXMiOycKICAgICAgICAgICAlIGxvY2FscygpKQogICAgZGYgPSBwZC5yZWFkX3NxbChzcWwsIGVuZ2luZSkKICAgIHJldHVybiBkZgoKCmRlZiByZWFkQ3VycmVudENsb3NlKHRzX2NvZGUpOgogICAgc3FsID0gKGYnc2VsZWN0IGNsb3NlIGZyb20gZGFpbHkgd2hlcmUgdHNfY29kZT0ie3RzX2NvZGV9IiAnCiAgICAgICAgICAgZicgYW5kIHRyYWRlX2RhdGU9KHNlbGVjdCBtYXgoYHRyYWRlX2RhdGVgKScKICAgICAgICAgICBmJyBmcm9tIGRhaWx5IHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSIpJykKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHJldHVybiByZXN1bHQuZmV0Y2hvbmUoKVswXQoKCmRlZiByZWFkQ3VycmVudFBFRyh0c19jb2RlKToKICAgIHNxbCA9ICdzZWxlY3QgcGVnIGZyb20gZ3V6aGlyZXN1bHQgd2hlcmUgdHNfY29kZT0iJXMiIGxpbWl0IDEnICUgdHNfY29kZQogICAgbG9nZ2luZy5pbmZvKHNxbCkKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHRyeToKICAgICAgICByZXN1bHQgPSByZXN1bHQuZmV0Y2hvbmUoKVswXQogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICByZXR1cm4gTm9uZQogICAgZWxzZToKICAgICAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGdldHRzX2NvZGVzRm9yQ2xhc3NpZmllZChjbGFzc2lmaWVkKToKICAgIHNxbCA9ICgnc2VsZWN0IHRzX2NvZGUgZnJvbSBjbGFzc2lmaWVkICcKICAgICAgICAgICAnd2hlcmUgY25hbWUgPSAiJShjbGFzc2lmaWVkKXMiJyAlIGxvY2FscygpKQogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKQogICAgdHNfY29kZUxpc3QgPSBbY2xhc3NpZmllZElEWzBdIGZvciBjbGFzc2lmaWVkSUQgaW4gcmVzdWx0LmZldGNoYWxsKCldCiAgICByZXR1cm4gdHNfY29kZUxpc3QKCgpkZWYgY2xhc3NpZmllZFRvU1FMKGNsYXNzaWZpZWREZik6CiAgICAiIiIgvsmw5tC00NDStbfWwOC1vcr9vt2/4qOsILzGu67JvrP9sb66r8r9CiAgICAiIiIKICAgIHRhYmxlbmFtZSA9ICdjbGFzc2lmaWVkJwogICAgcmV0dXJuIHdyaXRlU1FMKGNsYXNzaWZpZWREZiwgdGFibGVuYW1lKQoKCmRlZiBnZXRDaGlndUxpc3QoKToKICAgICMgICAgIHNxbCA9ICgnc2VsZWN0IGNoaWd1LnRzX2NvZGUsIHN0b2NrbGlzdC5uYW1lIGZyb20gY2hpZ3UsIHN0b2NrbGlzdCAnCiAgICAjICAgICAgICAgICAgJ3doZXJlIGNoaWd1LnRzX2NvZGU9c3RvY2tsaXN0LnRzX2NvZGUnKQogICAgc3FsID0gJ3NlbGVjdCB0c19jb2RlIGZyb20gY2hpZ3UnCiAgICByZXN1bHQgPSBlbmdpbmUuZXhlY3V0ZShzcWwpCiAgICByZXR1cm4gW3RzX2NvZGVbMF0gZm9yIHRzX2NvZGUgaW4gcmVzdWx0LmZldGNoYWxsKCldCgoKZGVmIGdldEd1emhpTGlzdCgpOgogICAgIyAgICAgc3FsID0gKCdzZWxlY3QgZ3V6aGlyZXN1bHQudHNfY29kZSwgc3RvY2tsaXN0Lm5hbWUgJwogICAgIyAgICAgICAgICAgICdmcm9tIGd1emhpcmVzdWx0LCBzdG9ja2xpc3QgJwogICAgIyAgICAgICAgICAgICd3aGVyZSBndXpoaXJlc3VsdC50c19jb2RlPXN0b2NrbGlzdC50c19jb2RlJykKICAgIHNxbCA9ICdzZWxlY3QgdHNfY29kZSBmcm9tIHlvdXpoaWd1emhpJwogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKQogICAgcmV0dXJuIFt0c19jb2RlWzBdIGZvciB0c19jb2RlIGluIHJlc3VsdC5mZXRjaGFsbCgpXQoKCiMgICAgIHJldHVybiByZXN1bHQuZmV0Y2hhbGwoKQoKCmRlZiBnZXRZb3V6aGlMaXN0KCk6CiAgICAjICAgICBzcWwgPSAoJ3NlbGVjdCB5b3V6aGlndXpoaS50c19jb2RlLCBzdG9ja2xpc3QubmFtZSAnCiAgICAjICAgICAgICAgICAgJ2Zyb20geW91emhpZ3V6aGksIHN0b2NrbGlzdCAnCiAgICAjICAgICAgICAgICAgJ3doZXJlIHlvdXpoaWd1emhpLnRzX2NvZGU9c3RvY2tsaXN0LnRzX2NvZGUnKQogICAgIyAgICAgc3FsID0gJ3NlbGVjdCB0c19jb2RlIGZyb20gZ3V6aGlyZXN1bHQnCiAgICBzcWwgPSAnc2VsZWN0IHRzX2NvZGUgZnJvbSB5b3V6aGlndXpoaScKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIHJldHVybiBbdHNfY29kZVswXSBmb3IgdHNfY29kZSBpbiByZXN1bHQuZmV0Y2hhbGwoKV0KCgpkZWYgZ2V0Q2xhc3NpZmllZEZvclN0b2Nrc0lEKHRzX2NvZGUpOgogICAgc3FsID0gKCdzZWxlY3QgY25hbWUgZnJvbSBjbGFzc2lmaWVkICcKICAgICAgICAgICAnd2hlcmUgdHNfY29kZSA9ICIlKHRzX2NvZGUpcyInICUgdHNfY29kZSkKICAgIHJlc3VsdCA9IGVuZ2luZS5leGVjdXRlKHNxbCkKICAgIGNsYXNzaWZpZWQgPSByZXN1bHQuZmlyc3QoKVswXQogICAgcmV0dXJuIGNsYXNzaWZpZWQKCgpkZWYgZ2V0U3RvY2tOYW1lKHRzX2NvZGUpOgogICAgc3FsID0gZidzZWxlY3QgbmFtZSBmcm9tIHN0b2NrX2Jhc2ljIHdoZXJlIHRzX2NvZGU9Int0c19jb2RlfSI7JwogICAgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5maXJzdCgpCiAgICBpZiByZXN1bHQgaXMgbm90IE5vbmU6CiAgICAgICAgcmV0dXJuIHJlc3VsdFswXQogICAgZWxzZToKICAgICAgICByZXR1cm4gTm9uZQoKCmRlZiByZWFkU3RvY2tLbGluZSh0c19jb2RlLCBzdGFydERhdGU9Tm9uZSwgZW5kRGF0ZT1Ob25lLCBkYXlzPTApOgogICAgIiIiCiAgICC2wcihucnGsUvP38r9vt0KICAgIDpwYXJhbSBlbmREYXRlOgogICAgOnBhcmFtIHN0YXJ0RGF0ZToKICAgIDpwYXJhbSB0c19jb2RlOiBzdHIsIDbOu7nJxrG0+sLrCiAgICA6cGFyYW0gZGF5czogaW50LCC2wcihtcTM7Mr9CiAgICA6cmV0dXJuOiBEYXRhZnJhbWUKICAgIGtsaW5lRGYgPSBwZC5EYXRhRnJhbWUoeydkYXRlJzogZGF0ZUxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbic6IG9wZW5MaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogY2xvc2VMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZ2gnOiBoaWdoTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb3cnOiBsb3dMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BlJzogcGVMaXN0fSkKICAgICIiIgogICAgc3FsID0gKGYnc2VsZWN0IGEudHJhZGVfZGF0ZSwgYS5vcGVuLCBhLmhpZ2gsIGEubG93LCBhLmNsb3NlLCBiLnBlX3R0bScKICAgICAgICAgICBmJyBmcm9tIGRhaWx5IGEsIGRhaWx5X2Jhc2ljIGIgd2hlcmUgYS50c19jb2RlPSJ7dHNfY29kZX0iICcpCiAgICBpZiBzdGFydERhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgc3FsICs9IGYnIGFuZCBhLnRyYWRlX2RhdGU+PSJ7c3RhcnREYXRlfSInCiAgICBpZiBlbmREYXRlIGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSBmJyBhbmQgYS50cmFkZV9kYXRlPD0ie2VuZERhdGV9IicKICAgIHNxbCArPSBmJyBhbmQgYS50c19jb2RlPWIudHNfY29kZSBhbmQgYS50cmFkZV9kYXRlPWIudHJhZGVfZGF0ZScKICAgIGlmIGRheXMgIT0gMDoKICAgICAgICBzcWwgKz0gZicgb3JkZXIgYnkgYS50cmFkZV9kYXRlIGRlc2MgbGltaXQge2RheXN9JwogICAgcmV0dXJuIF9yZWFkS2xpbmUoc3FsKQoKCmRlZiByZWFkUHJvZml0c0luY0FkZigpOgogICAgc3RvY2tzID0gcGQucmVhZF9leGNlbCgnZGF0YS9wcm9maXRzX2luY19hZGZfbGluZWFyLnhsc3gnKQogICAgc3RvY2tzID0gc3RvY2tzLnJvdW5kKDIpCiAgICAjIHN0b2NrcyA9IHN0b2Nrc1soc3RvY2tzWydtZWFuJ10gPj0gMTApICYKICAgICMgICAgICAgICAgICAgICAgIChzdG9ja3Muc2hhcnAgPj0gMC44KSAmCiAgICAjICAgICAgICAgICAgICAgICAoc3RvY2tzLnBlX3R0bSA8PSAzMCldCiAgICBzdG9ja3MgPSBzdG9ja3NbKHN0b2Nrc1sncjInXSA+PSAwLjMpICYgKHN0b2Nrc1snY29lZiddID4gMCldCiAgICBzdG9ja3Muc29ydF92YWx1ZXMoJ3NoYXJwJywgYXNjZW5kaW5nPUZhbHNlLCBpbnBsYWNlPVRydWUpCiAgICByZXR1cm4gc3RvY2tzCgoKZGVmIHJlYWRJbmRleEtsaW5lKGluZGV4X2NvZGUsIGRheXMpOgogICAgIiIiCiAgICC2wcih1rjK/UvP38r9vt0KICAgIDpwYXJhbSBpbmRleF9jb2RlOiBzdHIsIDnOu9a4yv20+sLrCiAgICA6cGFyYW0gZGF5czogaW50LCC2wcihtcTM7Mr9CiAgICA6cmV0dXJuOiBEYXRhZnJhbWUKICAgIGluZGV4RGYgPSBwZC5EYXRhRnJhbWUoeydkYXRlJzogZGF0ZUxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbic6IG9wZW5MaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogY2xvc2VMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hpZ2gnOiBoaWdoTGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb3cnOiBsb3dMaXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BlJzogcGVMaXN0fSkKICAgICIiIgogICAgcGVUYWJsZSA9ICdpbmRleF9wZScgaWYgaW5kZXhfY29kZSA9PSAnMDAwMDEwLlNIJyBlbHNlICdpbmRleF9kYWlseWJhc2ljJwogICAgc3FsID0gKGYnc2VsZWN0IGEudHJhZGVfZGF0ZSwgYS5vcGVuLCBhLmhpZ2gsIGEubG93LCBhLmNsb3NlLCBiLnBlX3R0bSAnCiAgICAgICAgICAgZicgZnJvbSBpbmRleF9kYWlseSBhLCB7cGVUYWJsZX0gYiAnCiAgICAgICAgICAgZicgd2hlcmUgYS50c19jb2RlPSJ7aW5kZXhfY29kZX0iIGFuZCBhLnRzX2NvZGU9Yi50c19jb2RlICcKICAgICAgICAgICBmJyBhbmQgYS50cmFkZV9kYXRlPWIudHJhZGVfZGF0ZScKICAgICAgICAgICBmJyBvcmRlciBieSB0cmFkZV9kYXRlIGRlc2MgbGltaXQge2RheXN9OycpCiAgICBkZiA9IF9yZWFkS2xpbmUoc3FsKQogICAgIyBkZiA9IHBkLnJlYWRfc3FsKHNxbCwgZW5naW5lKQogICAgIyBkZi5yZW5hbWUoY29sdW1ucz17J3BlX3R0bSc6ICdwZSd9LCBpbnBsYWNlPVRydWUpCiAgICAjIGRmWydkYXRlJ10gPSBkZi50cmFkZV9kYXRlLmFwcGx5KGxhbWJkYSB4OiB4LnN0cmZ0aW1lKCclWSVtJWQnKSkKICAgICMgZGYuc29ydF92YWx1ZXMoYnk9J2RhdGUnLCBpbnBsYWNlPVRydWUpCiAgICAjIGRmLnNldF9pbmRleChrZXlzPSdkYXRlJywgaW5wbGFjZT1UcnVlKQogICAgIyBkZi5yZXNldF9pbmRleChpbnBsYWNlPVRydWUpCiAgICAjIGRmLnNvcnRfdmFsdWVzKGJ5PSd0cmFkZV9kYXRlJywgaW5wbGFjZT1UcnVlKQogICAgcmV0dXJuIGRmCgoKZGVmIF9yZWFkS2xpbmUoc3FsKToKICAgIGRmID0gcGQucmVhZF9zcWwoc3FsLCBlbmdpbmUpCiAgICBkZi5yZW5hbWUoY29sdW1ucz17J3RyYWRlX2RhdGUnOiAnZGF0ZScsICdwZV90dG0nOiAncGUnfSwgaW5wbGFjZT1UcnVlKQogICAgZGYuZGF0ZSA9IHBkLnRvX2RhdGV0aW1lKGRmLmRhdGUpCiAgICBkZiA9IGRmLnNldF9pbmRleCgnZGF0ZScpCiAgICBkZiA9IGRmLnNvcnRfaW5kZXgoKQogICAgZGYgPSBkZi5yZXNldF9pbmRleCgpCiAgICByZXR1cm4gZGYKICAgICMgcmVzdWx0ID0gZW5naW5lLmV4ZWN1dGUoc3FsKS5mZXRjaGFsbCgpCiAgICAjIHN0b2NrRGF0YXMgPSBbaSBmb3IgaSBpbiByZXZlcnNlZChyZXN1bHQpXQogICAgIyAjIGtsaW5lRGF0YXMgPSBbXQogICAgIyBkYXRlTGlzdCA9IFtdCiAgICAjIG9wZW5MaXN0ID0gW10KICAgICMgY2xvc2VMaXN0ID0gW10KICAgICMgaGlnaExpc3QgPSBbXQogICAgIyBsb3dMaXN0ID0gW10KICAgICMgcGVMaXN0ID0gW10KICAgICMgaW5kZXhlcyA9IGxpc3QocmFuZ2UobGVuKHJlc3VsdCkpKQogICAgIyBmb3IgaSBpbiBpbmRleGVzOgogICAgIyAgICAgZGF0ZSwgX29wZW4sIGhpZ2gsIGxvdywgY2xvc2UsIHR0bXBlID0gc3RvY2tEYXRhc1tpXQogICAgIyAgICAgZGF0ZUxpc3QuYXBwZW5kKGRhdGUuc3RyZnRpbWUoIiVZLSVtLSVkIikpCiAgICAjICAgICAjIFF1YXJ0ZXJMaXN0LmFwcGVuZChkYXRlKQogICAgIyAgICAgb3Blbkxpc3QuYXBwZW5kKF9vcGVuKQogICAgIyAgICAgY2xvc2VMaXN0LmFwcGVuZChjbG9zZSkKICAgICMgICAgIGhpZ2hMaXN0LmFwcGVuZChoaWdoKQogICAgIyAgICAgbG93TGlzdC5hcHBlbmQobG93KQogICAgIyAgICAgcGVMaXN0LmFwcGVuZCh0dG1wZSkKICAgICMga2xpbmVEZiA9IHBkLkRhdGFGcmFtZSh7J2RhdGUnOiBkYXRlTGlzdCwKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgJ29wZW4nOiBvcGVuTGlzdCwKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogY2xvc2VMaXN0LAogICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAnaGlnaCc6IGhpZ2hMaXN0LAogICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAnbG93JzogbG93TGlzdCwKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgJ3BlJzogcGVMaXN0fSkKICAgICMgcmV0dXJuIGtsaW5lRGYKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgaW5pdGxvZygpCiAgICBwYXNzCiAgICAjICAgIGh5bGlzdCA9IGdldEhZTGlzdCgpCiAgICAjICAgICBwcmludChyZWFkQ3VycmVudFRUTVBFKCcwMDI1MDgnKSkKCiAgICAjILLiytR1cGRhdGVLbGluZUVYVERhdGEKICAgIHRzX2NvZGUgPSAnMDAwNjUxJwogICAgc3RhcnREYXRlID0gJzIwMTYtMDEtMDEnCiAgICAjIHVwZGF0ZUtsaW5lRVhURGF0YSh0c19jb2RlLCBzdGFydERhdGUpCgoKZGVmIHJlYWRUYWJsZUZpZWxkcyh0YWJsZSk6CiAgICBzcWwgPSAoZidzZWxlY3QgY29sdW1uX25hbWUgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucycKICAgICAgICAgICBmJyB3aGVyZSB0YWJsZV9uYW1lPQ==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgIGxpbWl0OiDIodfuvfzG2sr9tcTK/b7dCg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgIHN0b2NrTGlzdDogCg==</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">IyBkZWYgdXBkYXRlTGlydW4oKToKIyAgICAgc3RhcnRRdWFydGVyID0gZ2V0TGlydW5VcGRhdGVTdGFydFF1YXJ0ZXIoKQojICAgICBlbmRRdWFydGVyID0gZ2V0TGlydW5VcGRhdGVFbmRRdWFydGVyKCkKIwojICAgICBkYXRlcyA9IGRhdGF0cmFucy5RdWFydGVyTGlzdChzdGFydFF1YXJ0ZXIsIGVuZFF1YXJ0ZXIpCiMgICAgIGZvciBkYXRlIGluIGRhdGVzOgojICAgICAgICAgIyAgICAgICAgIHByaW50IGRhdGUKIyAgICAgICAgIGxvZ2dpbmcuZGVidWcoJ3VwZGF0ZUxpcnVuOiAlcycsIGRhdGUpCiMgICAgICAgICB0cnk6CiMgICAgICAgICAgICAgZGYgPSBkb3dubG9hZExpcnVuKGRhdGUpCiMgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKIyAgICAgICAgICAgICBjb250aW51ZQojICAgICAgICAgaWYgZGYgaXMgTm9uZToKIyAgICAgICAgICAgICBjb250aW51ZQojICMgICAgICAgICBwcmludCBsZW4oZGYpCiMgICAgICAgICAjILbByKHS0bTmtKK1xMD7yPPK/b7do6y008/C1NjK/b7d1tDJvrP9uMOyv7fWo6y21M60tOa0orXEwPvI89C0yOvK/b7dv+IKIyAgICAgICAgIGxpcnVuQ3VyID0gcmVhZExpcnVuRm9yRGF0ZShkYXRlKQojICAgICAgICAgZGYgPSBkZlt+ZGYudHNfY29kZS5pc2luKGxpcnVuQ3VyLnRzX2NvZGUpXQojICAgICAgICAgZGYgPSBkZltkZi5wcm9maXRzLm5vdG51bGwoKV0KIyAjICAgICAgICAgcHJpbnQgZGYKIwojICAgICAgICAgIyC21M60tOa0orXEwPvI89C0yOvK/b7dv+KjrLKi1tjQwrzGy+NUVE3A+8jzCiMgICAgICAgICBpZiBub3QgZGYuZW1wdHk6CiMgICAgICAgICAgICAgd3JpdGVMaXJ1bihkZikKIyAgICAgICAgICAgICBjYWxBbGxUVE1MaXJ1bihkYXRlKQoKCiMg0snLxs7e08O6r8r9o6y0/cm+s/0KIyBkZWYgcmVhZEd1YmVuRnJvbURmKGRmLCBkYXRlKToKIyAgICAgIiIitNO5ybG+wdCx7dbQtsHIoda4tqjI1cbatcS5ybG+yv3WtQojICAgICAjINa4tqjI1cbazt65ybG+yv2+3cqxo6zRocih1q7HsNfuvfy1xLnJsb7K/b7dCiMgICAgICIiIgojICAgICBkID0gZGZbZGYuZGF0ZSA8PSBkYXRlXQojICAgICBpZiBkLmVtcHR5OgojICAgICAgICAgcmV0dXJuIE5vbmUKIyAgICAgZ3ViZW4gPSBkW2QuZGF0ZSA9PSBkWydkYXRlJ10ubWF4KCksICd0b3RhbHNoYXJlcyddCiMgIyAgICAgZ3ViZW4gPSBkLmlhdFswLCAzXQojICAgICByZXR1cm4gZ3ViZW4KCgo=</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ZGVmIGRlbF9yZWFkVFRNTGlydW5Gcm9tRGYoZGYsIGRhdGUpOgogICAgIiIitNNUVE3A+8jzwdCx7dbQtsHIoda4tqjI1cbatcRUVE3A+8jzyv3WtQogICAgIyDWuLaoyNXG2s7eVFRNwPvI88r9vt3KsaOs0aHIodaux7DX7r38tcRUVE3A+8jzyv2+3QogICAgIiIiCiAgICBkID0gZGZbZGYucmVwb3J0ZGF0ZSA8PSBkYXRlXQogICAgaWYgZC5lbXB0eToKICAgICAgICByZXR1cm4gTm9uZQogICAgZCA9IGRbZC5yZXBvcnRkYXRlID09IGRbJ3JlcG9ydGRhdGUnXS5tYXgoKV0KICAgIHR0bUxpcnVuID0gZFtkLmRhdGUgPT0gZFsnZGF0ZSddLm1heCgpLCAndHRtcHJvZml0cyddCiAgICAjICAgICB0dG1MaXJ1biA9IGQuaWF0WzAsIDNdCiAgICByZXR1cm4gdHRtTGlydW4KCgo=</text>
      </register>
      <register name=":" type="4">
        <text>s/1/2/g</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-search>readTa</last-search>
      <last-offset />
      <last-pattern>readTa</last-pattern>
      <last-replace>2</last-replace>
      <last-substitute>1</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="true" />
      <idea-put enabled="false" />
    </notifications>
  </component>
</application>